<!-- generated by the src2html.pl tool from code2ebook:
  https://github.com/agentzh/code2ebook
-->

<html>
 <head>
  <title>utils/mb/conversion_procs/euc_tw_and_big5/big5.c - pgsql17devel-backend</title>
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
  <style>
body {
    text-align: left;
    text-align-last: left;
}

.nav-bar {
    font-size: 120%;
    margin-top: 5px;
    margin-bottom: 5px;
}

.nav-link {
    padding-left: 5em;
    padding-right: 5em;
}

ul.toc {
    line-height: 200%;
    font-size: 150%;
}

code {
    font-family: consolas, monospace;
    line-height: 130%;
}

span.Constant {
    color: DarkGreen;
}

span.Special {
    color: #c06000;
}

span.Comment {
    color: DarkRed;
    font-style: italic;
}

span.Identifier {
    color: DarkCyan;
}

span.PreProc {
    color: DarkMagenta;
}

span.Statement, span.Type, span.Keyword, span.Repeat, span.Conditional,
    span.Operator, span.Exception
{
    color: DarkBlue;
}

span.Todo {
    color: DarkRed;
    background-color: Gold;
    font-style: italic;
}

span.Underlined {
    text-decoration: underline;
}

span.linkable {
    font-weight: bold;
}

code ol {
    counter-reset: item;
    list-style-type: none;
    margin-left: 0;
    padding-left: 0;
    list-style-position: inside;
}

code li {
    display: block;
}

code li:before {
    content: counter(item) "  ";
    counter-increment: item;
    color: #999;
    padding-right: 0.5em;
    padding-left: 0.4em;
    list-style-position: inside;
    text-align: right
}

  </style>
 </head>
 <body>
 <p class="nav-bar">
  <span class="nav-link"><a href="./index.html">One Level Up</a></span>
  <span class="nav-link"><a href="../../../../index.html">Top Level</a></span>
 </p>

  <h1>utils/mb/conversion_procs/euc_tw_and_big5/big5.c - pgsql17devel-backend</h1>
 <h2>Global variables defined</h2>
 <ul class="toc">
<li><a href="#L189">b1c4</a></li>
<li><a href="#L197">b2c3</a></li>
<li><a href="#L25">big5Level1ToCnsPlane1</a></li>
<li><a href="#L84">big5Level2ToCnsPlane2</a></li>
<li><a href="#L54">cnsPlane1ToBig5Level1</a></li>
<li><a href="#L136">cnsPlane2ToBig5Level2</a></li>
</ul>
 <h2>Data types defined</h2>
 <ul class="toc">
<li><a href="#L22">codes_t</a></li>
</ul>
 <h2>Functions defined</h2>
 <ul class="toc">
<li><a href="#L292">BIG5toCNS</a></li>
<li><a href="#L207">BinarySearchRange</a></li>
<li><a href="#L345">CNStoBIG5</a></li>
</ul>
 <h2>Source code</h2>

  <code><ol><li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * conversion between BIG5 and Mule Internal Code(CNS 116643-1992<br/></li>
<li></span><span class="Comment"> * plane 1 and plane 2).<br/></li>
<li></span><span class="Comment"> * This program is partially copied from lv(Multilingual file viewer)<br/></li>
<li></span><span class="Comment"> * and slightly modified. lv is written and copyrighted by NARITA Tomio<br/></li>
<li></span><span class="Comment"> * (nrt@web.ad.jp).<br/></li>
<li></span><span class="Comment"> *<br/></li>
<li></span><span class="Comment"> * 1999/1/15 Tatsuo Ishii<br/></li>
<li></span><span class="Comment"> *<br/></li>
<li></span><span class="Comment"> * src/backend/utils/mb/conversion_procs/euc_tw_and_big5/big5.c<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><br/></li>
<li><span class="Comment">/* can be used in either frontend or backend */<br/></li>
<li></span><span class="PreProc">#include </span><span class="Constant">&quot;postgres_fe.h&quot;<br/></li>
<li></span><br/></li>
<li><span class="PreProc">#include </span><span class="Constant">&quot;mb/pg_wchar.h&quot;<br/></li>
<li></span><br/></li>
<li><span class="Type">typedef</span> <span class="Type">struct<br/></li>
<li></span>{<br/></li>
<li>&nbsp; &nbsp; <span class="Type">unsigned</span> <span class="Type">short</span> code,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; peer;<br/></li>
<li><a id="L22">&#x200c;</a>} <span class="linkable">codes_t</span>;<br/></li>
<li><br/></li>
<li><span class="Comment">/* map Big5 Level 1 to CNS 11643-1992 Plane 1 */<br/></li>
<li><a id="L25">&#x200c;</a></span><span class="Type">static</span> <span class="Type">const</span> <a href="#L22" title="utils/mb/conversion_procs/euc_tw_and_big5/big5.c:22">codes_t</a> <span class="linkable">big5Level1ToCnsPlane1</span>[<span class="Constant">25</span>] = {&nbsp; &nbsp; <span class="Comment">/* <a href="../../../../regex/regc_locale.c.html#L412" title="regex/regc_locale.c:412">range</a> */<br/></li>
<li></span>&nbsp; &nbsp; {<span class="Constant">0xA140</span>, <span class="Constant">0x2121</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0xA1F6</span>, <span class="Constant">0x2258</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0xA1F7</span>, <span class="Constant">0x2257</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0xA1F8</span>, <span class="Constant">0x2259</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0xA2AF</span>, <span class="Constant">0x2421</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0xA3C0</span>, <span class="Constant">0x4221</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0xa3e1</span>, <span class="Constant">0x0000</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0xA440</span>, <span class="Constant">0x4421</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0xACFE</span>, <span class="Constant">0x5753</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0xacff</span>, <span class="Constant">0x0000</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0xAD40</span>, <span class="Constant">0x5323</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0xAFD0</span>, <span class="Constant">0x5754</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0xBBC8</span>, <span class="Constant">0x6B51</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0xBE52</span>, <span class="Constant">0x6B50</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0xBE53</span>, <span class="Constant">0x6F5C</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0xC1AB</span>, <span class="Constant">0x7536</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0xC2CB</span>, <span class="Constant">0x7535</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0xC2CC</span>, <span class="Constant">0x7737</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0xC361</span>, <span class="Constant">0x782E</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0xC3B9</span>, <span class="Constant">0x7865</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0xC3BA</span>, <span class="Constant">0x7864</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0xC3BB</span>, <span class="Constant">0x7866</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0xC456</span>, <span class="Constant">0x782D</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0xC457</span>, <span class="Constant">0x7962</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0xc67f</span>, <span class="Constant">0x0000</span>}<br/></li>
<li>};<br/></li>
<li><br/></li>
<li><span class="Comment">/* map CNS 11643-1992 Plane 1 to Big5 Level 1 */<br/></li>
<li><a id="L54">&#x200c;</a></span><span class="Type">static</span> <span class="Type">const</span> <a href="#L22" title="utils/mb/conversion_procs/euc_tw_and_big5/big5.c:22">codes_t</a> <span class="linkable">cnsPlane1ToBig5Level1</span>[<span class="Constant">26</span>] = {&nbsp; &nbsp; <span class="Comment">/* <a href="../../../../regex/regc_locale.c.html#L412" title="regex/regc_locale.c:412">range</a> */<br/></li>
<li></span>&nbsp; &nbsp; {<span class="Constant">0x2121</span>, <span class="Constant">0xA140</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0x2257</span>, <span class="Constant">0xA1F7</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0x2258</span>, <span class="Constant">0xA1F6</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0x2259</span>, <span class="Constant">0xA1F8</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0x234f</span>, <span class="Constant">0x0000</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0x2421</span>, <span class="Constant">0xA2AF</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0x2571</span>, <span class="Constant">0x0000</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0x4221</span>, <span class="Constant">0xA3C0</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0x4242</span>, <span class="Constant">0x0000</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0x4421</span>, <span class="Constant">0xA440</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0x5323</span>, <span class="Constant">0xAD40</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0x5753</span>, <span class="Constant">0xACFE</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0x5754</span>, <span class="Constant">0xAFD0</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0x6B50</span>, <span class="Constant">0xBE52</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0x6B51</span>, <span class="Constant">0xBBC8</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0x6F5C</span>, <span class="Constant">0xBE53</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0x7535</span>, <span class="Constant">0xC2CB</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0x7536</span>, <span class="Constant">0xC1AB</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0x7737</span>, <span class="Constant">0xC2CC</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0x782D</span>, <span class="Constant">0xC456</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0x782E</span>, <span class="Constant">0xC361</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0x7864</span>, <span class="Constant">0xC3BA</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0x7865</span>, <span class="Constant">0xC3B9</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0x7866</span>, <span class="Constant">0xC3BB</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0x7962</span>, <span class="Constant">0xC457</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0x7d4c</span>, <span class="Constant">0x0000</span>}<br/></li>
<li>};<br/></li>
<li><br/></li>
<li><span class="Comment">/* map Big5 Level 2 to CNS 11643-1992 Plane 2 */<br/></li>
<li><a id="L84">&#x200c;</a></span><span class="Type">static</span> <span class="Type">const</span> <a href="#L22" title="utils/mb/conversion_procs/euc_tw_and_big5/big5.c:22">codes_t</a> <span class="linkable">big5Level2ToCnsPlane2</span>[<span class="Constant">48</span>] = {&nbsp; &nbsp; <span class="Comment">/* <a href="../../../../regex/regc_locale.c.html#L412" title="regex/regc_locale.c:412">range</a> */<br/></li>
<li></span>&nbsp; &nbsp; {<span class="Constant">0xC940</span>, <span class="Constant">0x2121</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0xc94a</span>, <span class="Constant">0x0000</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0xC94B</span>, <span class="Constant">0x212B</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0xC96C</span>, <span class="Constant">0x214D</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0xC9BE</span>, <span class="Constant">0x214C</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0xC9BF</span>, <span class="Constant">0x217D</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0xC9ED</span>, <span class="Constant">0x224E</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0xCAF7</span>, <span class="Constant">0x224D</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0xCAF8</span>, <span class="Constant">0x2439</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0xD77A</span>, <span class="Constant">0x3F6A</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0xD77B</span>, <span class="Constant">0x387E</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0xDBA7</span>, <span class="Constant">0x3F6B</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0xDDFC</span>, <span class="Constant">0x4176</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0xDDFD</span>, <span class="Constant">0x4424</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0xE8A3</span>, <span class="Constant">0x554C</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0xE976</span>, <span class="Constant">0x5723</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0xEB5B</span>, <span class="Constant">0x5A29</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0xEBF1</span>, <span class="Constant">0x554B</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0xEBF2</span>, <span class="Constant">0x5B3F</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0xECDE</span>, <span class="Constant">0x5722</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0xECDF</span>, <span class="Constant">0x5C6A</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0xEDAA</span>, <span class="Constant">0x5D75</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0xEEEB</span>, <span class="Constant">0x642F</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0xEEEC</span>, <span class="Constant">0x6039</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0xF056</span>, <span class="Constant">0x5D74</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0xF057</span>, <span class="Constant">0x6243</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0xF0CB</span>, <span class="Constant">0x5A28</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0xF0CC</span>, <span class="Constant">0x6337</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0xF163</span>, <span class="Constant">0x6430</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0xF16B</span>, <span class="Constant">0x6761</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0xF16C</span>, <span class="Constant">0x6438</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0xF268</span>, <span class="Constant">0x6934</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0xF269</span>, <span class="Constant">0x6573</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0xF2C3</span>, <span class="Constant">0x664E</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0xF375</span>, <span class="Constant">0x6762</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0xF466</span>, <span class="Constant">0x6935</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0xF4B5</span>, <span class="Constant">0x664D</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0xF4B6</span>, <span class="Constant">0x6962</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0xF4FD</span>, <span class="Constant">0x6A4C</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0xF663</span>, <span class="Constant">0x6A4B</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0xF664</span>, <span class="Constant">0x6C52</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0xF977</span>, <span class="Constant">0x7167</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0xF9C4</span>, <span class="Constant">0x7166</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0xF9C5</span>, <span class="Constant">0x7234</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0xF9C6</span>, <span class="Constant">0x7240</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0xF9C7</span>, <span class="Constant">0x7235</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0xF9D2</span>, <span class="Constant">0x7241</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0xf9d6</span>, <span class="Constant">0x0000</span>}<br/></li>
<li>};<br/></li>
<li><br/></li>
<li><span class="Comment">/* map CNS 11643-1992 Plane 2 to Big5 Level 2 */<br/></li>
<li><a id="L136">&#x200c;</a></span><span class="Type">static</span> <span class="Type">const</span> <a href="#L22" title="utils/mb/conversion_procs/euc_tw_and_big5/big5.c:22">codes_t</a> <span class="linkable">cnsPlane2ToBig5Level2</span>[<span class="Constant">49</span>] = {&nbsp; &nbsp; <span class="Comment">/* <a href="../../../../regex/regc_locale.c.html#L412" title="regex/regc_locale.c:412">range</a> */<br/></li>
<li></span>&nbsp; &nbsp; {<span class="Constant">0x2121</span>, <span class="Constant">0xC940</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0x212B</span>, <span class="Constant">0xC94B</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0x214C</span>, <span class="Constant">0xC9BE</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0x214D</span>, <span class="Constant">0xC96C</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0x217D</span>, <span class="Constant">0xC9BF</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0x224D</span>, <span class="Constant">0xCAF7</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0x224E</span>, <span class="Constant">0xC9ED</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0x2439</span>, <span class="Constant">0xCAF8</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0x387E</span>, <span class="Constant">0xD77B</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0x3F6A</span>, <span class="Constant">0xD77A</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0x3F6B</span>, <span class="Constant">0xDBA7</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0x4424</span>, <span class="Constant">0x0000</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0x4176</span>, <span class="Constant">0xDDFC</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0x4177</span>, <span class="Constant">0x0000</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0x4424</span>, <span class="Constant">0xDDFD</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0x554B</span>, <span class="Constant">0xEBF1</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0x554C</span>, <span class="Constant">0xE8A3</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0x5722</span>, <span class="Constant">0xECDE</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0x5723</span>, <span class="Constant">0xE976</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0x5A28</span>, <span class="Constant">0xF0CB</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0x5A29</span>, <span class="Constant">0xEB5B</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0x5B3F</span>, <span class="Constant">0xEBF2</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0x5C6A</span>, <span class="Constant">0xECDF</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0x5D74</span>, <span class="Constant">0xF056</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0x5D75</span>, <span class="Constant">0xEDAA</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0x6039</span>, <span class="Constant">0xEEEC</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0x6243</span>, <span class="Constant">0xF057</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0x6337</span>, <span class="Constant">0xF0CC</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0x642F</span>, <span class="Constant">0xEEEB</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0x6430</span>, <span class="Constant">0xF163</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0x6438</span>, <span class="Constant">0xF16C</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0x6573</span>, <span class="Constant">0xF269</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0x664D</span>, <span class="Constant">0xF4B5</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0x664E</span>, <span class="Constant">0xF2C3</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0x6761</span>, <span class="Constant">0xF16B</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0x6762</span>, <span class="Constant">0xF375</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0x6934</span>, <span class="Constant">0xF268</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0x6935</span>, <span class="Constant">0xF466</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0x6962</span>, <span class="Constant">0xF4B6</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0x6A4B</span>, <span class="Constant">0xF663</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0x6A4C</span>, <span class="Constant">0xF4FD</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0x6C52</span>, <span class="Constant">0xF664</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0x7166</span>, <span class="Constant">0xF9C4</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0x7167</span>, <span class="Constant">0xF977</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0x7234</span>, <span class="Constant">0xF9C5</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0x7235</span>, <span class="Constant">0xF9C7</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0x7240</span>, <span class="Constant">0xF9C6</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0x7241</span>, <span class="Constant">0xF9D2</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0x7245</span>, <span class="Constant">0x0000</span>}<br/></li>
<li>};<br/></li>
<li><br/></li>
<li><span class="Comment">/* Big Five Level 1 Correspondence to CNS 11643-1992 Plane 4 */<br/></li>
<li><a id="L189">&#x200c;</a></span><span class="Type">static</span> <span class="Type">const</span> <span class="Type">unsigned</span> <span class="Type">short</span> <span class="linkable">b1c4</span>[][<span class="Constant">2</span>] = {<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0xC879</span>, <span class="Constant">0x2123</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0xC87B</span>, <span class="Constant">0x2124</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0xC87D</span>, <span class="Constant">0x212A</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0xC8A2</span>, <span class="Constant">0x2152</span>}<br/></li>
<li>};<br/></li>
<li><br/></li>
<li><span class="Comment">/* Big Five Level 2 Correspondence to CNS 11643-1992 Plane 3 */<br/></li>
<li><a id="L197">&#x200c;</a></span><span class="Type">static</span> <span class="Type">const</span> <span class="Type">unsigned</span> <span class="Type">short</span> <span class="linkable">b2c3</span>[][<span class="Constant">2</span>] = {<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0xF9D6</span>, <span class="Constant">0x4337</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0xF9D7</span>, <span class="Constant">0x4F50</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0xF9D8</span>, <span class="Constant">0x444E</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0xF9D9</span>, <span class="Constant">0x504A</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0xF9DA</span>, <span class="Constant">0x2C5D</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0xF9DB</span>, <span class="Constant">0x3D7E</span>},<br/></li>
<li>&nbsp; &nbsp; {<span class="Constant">0xF9DC</span>, <span class="Constant">0x4B5C</span>}<br/></li>
<li>};<br/></li>
<li><br/></li>
<li><a id="L207">&#x200c;</a><span class="Type">static</span> <span class="Type">unsigned</span> <span class="Type">short</span> <span class="linkable">BinarySearchRange</span><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (<span class="Type">const</span> <a href="#L22" title="utils/mb/conversion_procs/euc_tw_and_big5/big5.c:22">codes_t</a> *array, <span class="Type">int</span> high, <span class="Type">unsigned</span> <span class="Type">short</span> code)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; <span class="Type">int</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; low,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mid,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; distance,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tmp;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; low = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; mid = high &gt;&gt; <span class="Constant">1</span>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">for</span> (; low &lt;= high; mid = (low + high) &gt;&gt; <span class="Constant">1</span>)<br/></li>
<li>&nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> ((array[mid].code &lt;= code) &amp;&amp; (array[mid + <span class="Constant">1</span>].code &gt; code))<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (<span class="Constant">0</span> == array[mid].peer)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (code &gt;= <span class="Constant">0xa140U</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Comment">/* big5 to cns */<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tmp = ((code &amp; <span class="Constant">0xff00</span>) - (array[mid].code &amp; <span class="Constant">0xff00</span>)) &gt;&gt; <span class="Constant">8</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; high = code &amp; <span class="Constant">0x00ff</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; low = array[mid].code &amp; <span class="Constant">0x00ff</span>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Comment">/*<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; * <a href="../../../../regex/regcomp.c.html#L324" title="regex/regcomp.c:324">NOTE</a>: big5 high_byte: 0xa1-0xfe, low_byte: 0x40-0x7e,<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; * 0xa1-0xfe (radicals: 0x00-0x3e, 0x3f-0x9c) big5 radix is<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; * 0x9d.&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [region_low, region_high] We<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; * should remember big5 has two different regions (above).<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; * There is a bias for the distance between these regions.<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; * 0xa1 - 0x7e + bias = 1 (Distance between 0xa1 and 0x7e is<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; * 1.) bias = - 0x22.<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; */<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; distance = tmp * <span class="Constant">0x9d</span> + high - low +<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (high &gt;= <span class="Constant">0xa1</span> ? (low &gt;= <span class="Constant">0xa1</span> ? <span class="Constant">0</span> : -<span class="Constant">0x22</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; : (low &gt;= <span class="Constant">0xa1</span> ? +<span class="Constant">0x22</span> : <span class="Constant">0</span>));<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Comment">/*<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; * <a href="../../../../regex/regcomp.c.html#L324" title="regex/regcomp.c:324">NOTE</a>: we have to convert the distance into a code point.<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; * The code point's low_byte is 0x21 plus mod_0x5e. In the<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; * first, we extract the mod_0x5e of the starting code point,<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; * subtracting 0x21, and add distance to it. Then we calculate<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; * again mod_0x5e of them, and restore the final codepoint,<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; * adding 0x21.<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; */<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tmp = (array[mid].peer &amp; <span class="Constant">0x00ff</span>) + distance - <span class="Constant">0x21</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tmp = (array[mid].peer &amp; <span class="Constant">0xff00</span>) + ((tmp / <span class="Constant">0x5e</span>) &lt;&lt; <span class="Constant">8</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; + <span class="Constant">0x21</span> + tmp % <span class="Constant">0x5e</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> tmp;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">else<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Comment">/* cns to big5 */<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tmp = ((code &amp; <span class="Constant">0xff00</span>) - (array[mid].code &amp; <span class="Constant">0xff00</span>)) &gt;&gt; <span class="Constant">8</span>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Comment">/*<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; * <a href="../../../../regex/regcomp.c.html#L324" title="regex/regcomp.c:324">NOTE</a>: ISO charsets ranges between 0x21-0xfe (94charset).<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; * Its radix is 0x5e. But there is no distance bias like big5.<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; */<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; distance = tmp * <span class="Constant">0x5e<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; + ((<span class="Type">int</span>) (code &amp; <span class="Constant">0x00ff</span>) - (<span class="Type">int</span>) (array[mid].code &amp; <span class="Constant">0x00ff</span>));<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Comment">/*<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; * <a href="../../../../regex/regcomp.c.html#L324" title="regex/regcomp.c:324">NOTE</a>: Similar to big5 to cns conversion, we extract<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; * mod_0x9d and restore mod_0x9d into a code point.<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; */<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; low = array[mid].peer &amp; <span class="Constant">0x00ff</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tmp = low + distance - (low &gt;= <span class="Constant">0xa1</span> ? <span class="Constant">0x62</span> : <span class="Constant">0x40</span>);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; low = tmp % <span class="Constant">0x9d</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tmp = (array[mid].peer &amp; <span class="Constant">0xff00</span>) + ((tmp / <span class="Constant">0x9d</span>) &lt;&lt; <span class="Constant">8</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; + (low &gt; <span class="Constant">0x3e</span> ? <span class="Constant">0x62</span> : <span class="Constant">0x40</span>) + low;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> tmp;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">else</span> <span class="Statement">if</span> (array[mid].code &gt; code)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; high = mid - <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">else<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; low = mid + <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> <span class="Constant">0</span>;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Type">unsigned</span> <span class="Type">short<br/></li>
<li><a id="L292">&#x200c;</a></span><span class="linkable">BIG5toCNS</span>(<span class="Type">unsigned</span> <span class="Type">short</span> big5, <span class="Type">unsigned</span> <span class="Type">char</span> *lc)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; <span class="Type">unsigned</span> <span class="Type">short</span> cns = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Type">int</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; i;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (big5 &lt; <span class="Constant">0xc940U</span>)<br/></li>
<li>&nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Comment">/* level 1 */<br/></li>
<li></span><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">for</span> (i = <span class="Constant">0</span>; i &lt; <span class="Statement"><a href="../../../../storage/page/itemptr.c.html#L23" title="storage/page/itemptr.c:23">sizeof</a></span>(<a href="#L189" title="utils/mb/conversion_procs/euc_tw_and_big5/big5.c:189">b1c4</a>) / (<span class="Statement"><a href="../../../../storage/page/itemptr.c.html#L23" title="storage/page/itemptr.c:23">sizeof</a></span>(<span class="Type">unsigned</span> <span class="Type">short</span>) * <span class="Constant">2</span>); i++)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (<a href="#L189" title="utils/mb/conversion_procs/euc_tw_and_big5/big5.c:189">b1c4</a>[i][<span class="Constant">0</span>] == big5)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; *lc = LC_CNS11643_4;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> (<a href="#L189" title="utils/mb/conversion_procs/euc_tw_and_big5/big5.c:189">b1c4</a>[i][<span class="Constant">1</span>] | <span class="Constant">0x8080U</span>);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (<span class="Constant">0</span> &lt; (cns = <a href="#L207" title="utils/mb/conversion_procs/euc_tw_and_big5/big5.c:207">BinarySearchRange</a>(<a href="#L25" title="utils/mb/conversion_procs/euc_tw_and_big5/big5.c:25">big5Level1ToCnsPlane1</a>, <span class="Constant">23</span>, big5)))<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; *lc = LC_CNS11643_1;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">else</span> <span class="Statement">if</span> (big5 == <span class="Constant">0xc94aU</span>)<br/></li>
<li>&nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Comment">/* level 2 */<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; *lc = LC_CNS11643_1;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; cns = <span class="Constant">0x4442</span>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">else<br/></li>
<li></span>&nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Comment">/* level 2 */<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">for</span> (i = <span class="Constant">0</span>; i &lt; <span class="Statement"><a href="../../../../storage/page/itemptr.c.html#L23" title="storage/page/itemptr.c:23">sizeof</a></span>(<a href="#L197" title="utils/mb/conversion_procs/euc_tw_and_big5/big5.c:197">b2c3</a>) / (<span class="Statement"><a href="../../../../storage/page/itemptr.c.html#L23" title="storage/page/itemptr.c:23">sizeof</a></span>(<span class="Type">unsigned</span> <span class="Type">short</span>) * <span class="Constant">2</span>); i++)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (<a href="#L197" title="utils/mb/conversion_procs/euc_tw_and_big5/big5.c:197">b2c3</a>[i][<span class="Constant">0</span>] == big5)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; *lc = LC_CNS11643_3;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> (<a href="#L197" title="utils/mb/conversion_procs/euc_tw_and_big5/big5.c:197">b2c3</a>[i][<span class="Constant">1</span>] | <span class="Constant">0x8080U</span>);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (<span class="Constant">0</span> &lt; (cns = <a href="#L207" title="utils/mb/conversion_procs/euc_tw_and_big5/big5.c:207">BinarySearchRange</a>(<a href="#L84" title="utils/mb/conversion_procs/euc_tw_and_big5/big5.c:84">big5Level2ToCnsPlane2</a>, <span class="Constant">46</span>, big5)))<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; *lc = LC_CNS11643_2;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (<span class="Constant">0</span> == cns)<br/></li>
<li>&nbsp; &nbsp; {&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Comment">/* no mapping Big5 to CNS 11643-1992 */<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; *lc = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> (<span class="Type">unsigned</span> <span class="Type">short</span>) <span class="Constant">'?'</span>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> cns | <span class="Constant">0x8080</span>;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><span class="Type">unsigned</span> <span class="Type">short<br/></li>
<li><a id="L345">&#x200c;</a></span><span class="linkable">CNStoBIG5</span>(<span class="Type">unsigned</span> <span class="Type">short</span> cns, <span class="Type">unsigned</span> <span class="Type">char</span> lc)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; <span class="Type">int</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; i;<br/></li>
<li>&nbsp; &nbsp; <span class="Type">unsigned</span> <span class="Type">int</span> big5 = <span class="Constant">0</span>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; cns &amp;= <span class="Constant">0x7f7f</span>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">switch</span> (lc)<br/></li>
<li>&nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">case</span> LC_CNS11643_1:<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; big5 = <a href="#L207" title="utils/mb/conversion_procs/euc_tw_and_big5/big5.c:207">BinarySearchRange</a>(<a href="#L54" title="utils/mb/conversion_procs/euc_tw_and_big5/big5.c:54">cnsPlane1ToBig5Level1</a>, <span class="Constant">24</span>, cns);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">break</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">case</span> LC_CNS11643_2:<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; big5 = <a href="#L207" title="utils/mb/conversion_procs/euc_tw_and_big5/big5.c:207">BinarySearchRange</a>(<a href="#L136" title="utils/mb/conversion_procs/euc_tw_and_big5/big5.c:136">cnsPlane2ToBig5Level2</a>, <span class="Constant">47</span>, cns);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">break</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">case</span> LC_CNS11643_3:<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">for</span> (i = <span class="Constant">0</span>; i &lt; <span class="Statement"><a href="../../../../storage/page/itemptr.c.html#L23" title="storage/page/itemptr.c:23">sizeof</a></span>(<a href="#L197" title="utils/mb/conversion_procs/euc_tw_and_big5/big5.c:197">b2c3</a>) / (<span class="Statement"><a href="../../../../storage/page/itemptr.c.html#L23" title="storage/page/itemptr.c:23">sizeof</a></span>(<span class="Type">unsigned</span> <span class="Type">short</span>) * <span class="Constant">2</span>); i++)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (<a href="#L197" title="utils/mb/conversion_procs/euc_tw_and_big5/big5.c:197">b2c3</a>[i][<span class="Constant">1</span>] == cns)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <a href="#L197" title="utils/mb/conversion_procs/euc_tw_and_big5/big5.c:197">b2c3</a>[i][<span class="Constant">0</span>];<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">break</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">case</span> LC_CNS11643_4:<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">for</span> (i = <span class="Constant">0</span>; i &lt; <span class="Statement"><a href="../../../../storage/page/itemptr.c.html#L23" title="storage/page/itemptr.c:23">sizeof</a></span>(<a href="#L189" title="utils/mb/conversion_procs/euc_tw_and_big5/big5.c:189">b1c4</a>) / (<span class="Statement"><a href="../../../../storage/page/itemptr.c.html#L23" title="storage/page/itemptr.c:23">sizeof</a></span>(<span class="Type">unsigned</span> <span class="Type">short</span>) * <span class="Constant">2</span>); i++)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (<a href="#L189" title="utils/mb/conversion_procs/euc_tw_and_big5/big5.c:189">b1c4</a>[i][<span class="Constant">1</span>] == cns)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <a href="#L189" title="utils/mb/conversion_procs/euc_tw_and_big5/big5.c:189">b1c4</a>[i][<span class="Constant">0</span>];<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">default</span>:<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">break</span>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> big5;<br/></li>
<li>}<br/></li>
</ol></code>
 <p class="nav-bar">
  <span class="nav-link"><a href="./index.html">One Level Up</a></span>
  <span class="nav-link"><a href="../../../../index.html">Top Level</a></span>
 </p>

 </body>
</html>
