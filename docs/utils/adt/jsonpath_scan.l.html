<!-- generated by the src2html.pl tool from code2ebook:
  https://github.com/agentzh/code2ebook
-->

<html>
 <head>
  <title>utils/adt/jsonpath_scan.l - pgsql17devel-backend</title>
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
  <style>
body {
    text-align: left;
    text-align-last: left;
}

.nav-bar {
    font-size: 120%;
    margin-top: 5px;
    margin-bottom: 5px;
}

.nav-link {
    padding-left: 5em;
    padding-right: 5em;
}

ul.toc {
    line-height: 200%;
    font-size: 150%;
}

code {
    font-family: consolas, monospace;
    line-height: 130%;
}

span.Constant {
    color: DarkGreen;
}

span.Special {
    color: #c06000;
}

span.Comment {
    color: DarkRed;
    font-style: italic;
}

span.Identifier {
    color: DarkCyan;
}

span.PreProc {
    color: DarkMagenta;
}

span.Statement, span.Type, span.Keyword, span.Repeat, span.Conditional,
    span.Operator, span.Exception
{
    color: DarkBlue;
}

span.Todo {
    color: DarkRed;
    background-color: Gold;
    font-style: italic;
}

span.Underlined {
    text-decoration: underline;
}

span.linkable {
    font-weight: bold;
}

code ol {
    counter-reset: item;
    list-style-type: none;
    margin-left: 0;
    padding-left: 0;
    list-style-position: inside;
}

code li {
    display: block;
}

code li:before {
    content: counter(item) "  ";
    counter-increment: item;
    color: #999;
    padding-right: 0.5em;
    padding-left: 0.4em;
    list-style-position: inside;
    text-align: right
}

  </style>
 </head>
 <body>
 <p class="nav-bar">
  <span class="nav-link"><a href="./index.html">One Level Up</a></span>
  <span class="nav-link"><a href="../../index.html">Top Level</a></span>
 </p>

  <h1>utils/adt/jsonpath_scan.l - pgsql17devel-backend</h1>

  <code><ol><li><span class="Special">%top{<br/></li>
<li></span><span class="Comment">/*-------------------------------------------------------------------------<br/></li>
<li></span><span class="Comment"> *<br/></li>
<li></span><span class="Comment"> * jsonpath_scan.l<br/></li>
<li></span><span class="Comment"> *&nbsp; &nbsp; Lexical parser for jsonpath datatype<br/></li>
<li></span><span class="Comment"> *<br/></li>
<li></span><span class="Comment"> * Splits jsonpath string into tokens represented as <a href="jsonpath_internal.h.html#L18" title="utils/adt/jsonpath_internal.h:18">JsonPathString</a> structs.<br/></li>
<li></span><span class="Comment"> * Decodes unicode and hex escaped strings.<br/></li>
<li></span><span class="Comment"> *<br/></li>
<li></span><span class="Comment"> * Copyright (c) 2019-2024, PostgreSQL Global Development Group<br/></li>
<li></span><span class="Comment"> *<br/></li>
<li></span><span class="Comment"> * IDENTIFICATION<br/></li>
<li></span><span class="Comment"> *&nbsp; &nbsp; src/backend/utils/adt/jsonpath_scan.l<br/></li>
<li></span><span class="Comment"> *<br/></li>
<li></span><span class="Comment"> *-------------------------------------------------------------------------<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><br/></li>
<li><span class="PreProc">#include </span><span class="Constant">&quot;postgres.h&quot;<br/></li>
<li></span><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * NB: include jsonpath_gram.h only AFTER including jsonpath_internal.h,<br/></li>
<li></span><span class="Comment"> * because jsonpath_internal.h contains the declaration for <a href="jsonpath_internal.h.html#L18" title="utils/adt/jsonpath_internal.h:18">JsonPathString</a>.<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><span class="PreProc">#include </span><span class="Constant">&quot;jsonpath_internal.h&quot;<br/></li>
<li></span><span class="PreProc">#include </span><span class="Constant">&quot;jsonpath_gram.h&quot;<br/></li>
<li></span><br/></li>
<li><span class="PreProc">#include </span><span class="Constant">&quot;mb/pg_wchar.h&quot;<br/></li>
<li></span><span class="PreProc">#include </span><span class="Constant">&quot;nodes/miscnodes.h&quot;<br/></li>
<li></span><span class="PreProc">#include </span><span class="Constant">&quot;nodes/pg_list.h&quot;<br/></li>
<li></span><span class="Special">}<br/></li>
<li></span><br/></li>
<li><span class="Special">%{<br/></li>
<li></span><span class="Type">static</span><span class="lexInclude"> <a href="jsonpath_internal.h.html#L18" title="utils/adt/jsonpath_internal.h:18">JsonPathString</a> scanstring;<br/></li>
<li></span><br/></li>
<li><span class="Comment">/* Handles to the buffer that the lexer uses internally */<br/></li>
<li></span><span class="Type">static</span><span class="lexInclude"> YY_BUFFER_STATE scanbufhandle;<br/></li>
<li></span><span class="Type">static</span><span class="lexInclude"> </span><span class="Type">char</span><span class="lexInclude"> *scanbuf;<br/></li>
<li></span><span class="Type">static</span><span class="lexInclude"> </span><span class="Type">int</span><span class="lexInclude">&nbsp; &nbsp; scanbuflen;<br/></li>
<li></span><br/></li>
<li><span class="Type">static</span><span class="lexInclude"> </span><span class="Type">void</span><span class="lexInclude"> addstring(</span><span class="Type"><a href="../fmgr/dfmgr.c.html#L28" title="utils/fmgr/dfmgr.c:28">bool</a></span><span class="lexInclude"> init, </span><span class="Type">char</span><span class="lexInclude"> *s, </span><span class="Type">int</span><span class="lexInclude"> l);<br/></li>
<li></span><span class="Type">static</span><span class="lexInclude"> </span><span class="Type">void</span><span class="lexInclude"> addchar(</span><span class="Type"><a href="../fmgr/dfmgr.c.html#L28" title="utils/fmgr/dfmgr.c:28">bool</a></span><span class="lexInclude"> init, </span><span class="Type">char</span><span class="lexInclude"> c);<br/></li>
<li></span><span class="Type">static</span><span class="lexInclude"> </span><span class="Type">enum</span><span class="lexInclude"> yytokentype checkKeyword(</span><span class="Type">void</span><span class="lexInclude">);<br/></li>
<li></span><span class="Type">static</span><span class="lexInclude"> </span><span class="Type"><a href="../fmgr/dfmgr.c.html#L28" title="utils/fmgr/dfmgr.c:28">bool</a></span><span class="lexInclude"> parseUnicode(</span><span class="Type">char</span><span class="lexInclude"> *s, </span><span class="Type">int</span><span class="lexInclude"> l, </span><span class="Type">struct</span><span class="lexInclude"> Node *escontext);<br/></li>
<li></span><span class="Type">static</span><span class="lexInclude"> </span><span class="Type"><a href="../fmgr/dfmgr.c.html#L28" title="utils/fmgr/dfmgr.c:28">bool</a></span><span class="lexInclude"> parseHexChar(</span><span class="Type">char</span><span class="lexInclude"> *s, </span><span class="Type">struct</span><span class="lexInclude"> Node *escontext);<br/></li>
<li></span><br/></li>
<li><span class="Comment">/* Avoid exit() on fatal scanner errors (a <a href="varbit.c.html#L391" title="utils/adt/varbit.c:391">bit</a> ugly -- see yy_fatal_error) */<br/></li>
<li></span><span class="PreProc">#undef fprintf<br/></li>
<li></span><span class="PreProc">#define fprintf(file, fmt, msg)&nbsp; fprintf_to_ereport(fmt, msg)<br/></li>
<li></span><br/></li>
<li><span class="Type">static</span><span class="lexInclude"> </span><span class="Type">void<br/></li>
<li></span><span class="lexInclude">fprintf_to_ereport(</span><span class="Type">const</span><span class="lexInclude"> </span><span class="Type">char</span><span class="lexInclude"> *fmt, </span><span class="Type">const</span><span class="lexInclude"> </span><span class="Type">char</span><span class="lexInclude"> *msg)<br/></li>
<li></span><span class="lexInclude">{<br/></li>
<li></span><span class="lexInclude">&nbsp; &nbsp; ereport(ERROR, (<a href="../error/elog.c.html#L1159" title="utils/error/elog.c:1159">errmsg_internal</a>(</span><span class="Constant">&quot;</span><span class="Special">%s</span><span class="Constant">&quot;</span><span class="lexInclude">, msg)));<br/></li>
<li></span><span class="lexInclude">}<br/></li>
<li></span><br/></li>
<li><span class="Comment">/* LCOV_EXCL_START */<br/></li>
<li></span><br/></li>
<li><span class="Special">%}<br/></li>
<li></span><br/></li>
<li><span class="PreProc">%option 8bit<br/></li>
<li></span><span class="PreProc">%option never-interactive<br/></li>
<li></span><span class="PreProc">%option nodefault<br/></li>
<li></span><span class="PreProc">%option noinput<br/></li>
<li></span><span class="PreProc">%option nounput<br/></li>
<li></span><span class="PreProc">%option noyywrap<br/></li>
<li></span><span class="PreProc">%option warn<br/></li>
<li></span><span class="PreProc">%option prefix</span><span class="Statement">=</span><span class="Constant">&quot;</span><span class="Identifier">jsonpath_yy</span><span class="Constant">&quot;<br/></li>
<li></span><span class="PreProc">%option bison-bridge<br/></li>
<li></span><span class="PreProc">%option noyyalloc<br/></li>
<li></span><span class="PreProc">%option noyyrealloc<br/></li>
<li></span><span class="PreProc">%option noyyfree<br/></li>
<li></span><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * We use exclusive states for quoted and non-quoted strings,<br/></li>
<li></span><span class="Comment"> * quoted variable names and C-style comments.<br/></li>
<li></span><span class="Comment"> * Exclusive states:<br/></li>
<li></span><span class="Comment"> *&nbsp; &lt;xq&gt; - quoted strings<br/></li>
<li></span><span class="Comment"> *&nbsp; &lt;xnq&gt; - non-quoted strings<br/></li>
<li></span><span class="Comment"> *&nbsp; &lt;xvq&gt; - quoted variable names<br/></li>
<li></span><span class="Comment"> *&nbsp; &lt;xc&gt; - C-style comment<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><br/></li>
<li><span class="Special">%x</span><span class="Statement"> xq<br/></li>
<li></span><span class="Special">%x</span><span class="Statement"> xnq<br/></li>
<li></span><span class="Special">%x</span><span class="Statement"> xvq<br/></li>
<li></span><span class="Special">%x</span><span class="Statement"> xc<br/></li>
<li></span><br/></li>
<li><span class="Special">special</span><span class="lexAbbrvBlock">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Constant">[</span><span class="Identifier">\?\%\$\.\[\]\{\}\(\)\|\&amp;\!\=\&lt;\&gt;\@\#\,\*:\-\+\/</span><span class="Constant">]<br/></li>
<li></span><span class="Special">blank</span><span class="lexAbbrvBlock">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Constant">[</span><span class="Identifier"> \t\n\r\f</span><span class="Constant">]<br/></li>
<li></span><span class="Comment">/* &quot;other&quot; means anything that's not special, blank, or '\' or '&quot;' */<br/></li>
<li></span><span class="Special">other</span><span class="lexAbbrvBlock">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Constant">[</span><span class="Identifier">^\?\%\$\.\[\]\{\}\(\)\|\&amp;\!\=\&lt;\&gt;\@\#\,\*:\-\+\/\\\&quot; \t\n\r\f</span><span class="Constant">]<br/></li>
<li></span><br/></li>
<li><span class="Special">decdigit</span><span class="lexAbbrvBlock">&nbsp; &nbsp; </span><span class="Constant">[</span><span class="Identifier">0-9</span><span class="Constant">]<br/></li>
<li></span><span class="Special">hexdigit</span><span class="lexAbbrvBlock">&nbsp; &nbsp; </span><span class="Constant">[</span><span class="Identifier">0-9A-Fa-f</span><span class="Constant">]<br/></li>
<li></span><span class="Special">octdigit</span><span class="lexAbbrvBlock">&nbsp; &nbsp; </span><span class="Constant">[</span><span class="Identifier">0-7</span><span class="Constant">]<br/></li>
<li></span><span class="Special">bindigit</span><span class="lexAbbrvBlock">&nbsp; &nbsp; </span><span class="Constant">[</span><span class="Identifier">0-1</span><span class="Constant">]<br/></li>
<li></span><br/></li>
<li><span class="Comment">/* DecimalInteger in ECMAScript; must not start with 0 unless it's exactly 0 */<br/></li>
<li></span><span class="Special">decinteger</span><span class="lexAbbrvBlock">&nbsp; &nbsp; </span><span class="Identifier">(0|</span><span class="Constant">[</span><span class="Identifier">1-9</span><span class="Constant">]</span><span class="Identifier">(<a href="../error/elog.c.html#L89" title="utils/error/elog.c:89">_</a>?{</span><span class="Special">decdigit</span><span class="Identifier">})*)<br/></li>
<li></span><span class="Comment">/* DecimalDigits in ECMAScript; only used as part of other rules */<br/></li>
<li></span><span class="Special">decdigits</span><span class="lexAbbrvBlock">&nbsp; &nbsp; </span><span class="Identifier">{</span><span class="Special">decdigit</span><span class="Identifier">}(<a href="../error/elog.c.html#L89" title="utils/error/elog.c:89">_</a>?{</span><span class="Special">decdigit</span><span class="Identifier">})*<br/></li>
<li></span><span class="Comment">/* Non-decimal integers; in ECMAScript, these must not have underscore after prefix */<br/></li>
<li></span><span class="Special">hexinteger</span><span class="lexAbbrvBlock">&nbsp; &nbsp; </span><span class="Identifier">0</span><span class="Constant">[</span><span class="Identifier">xX</span><span class="Constant">]</span><span class="Identifier">{</span><span class="Special">hexdigit</span><span class="Identifier">}(<a href="../error/elog.c.html#L89" title="utils/error/elog.c:89">_</a>?{</span><span class="Special">hexdigit</span><span class="Identifier">})*<br/></li>
<li></span><span class="Special">octinteger</span><span class="lexAbbrvBlock">&nbsp; &nbsp; </span><span class="Identifier">0</span><span class="Constant">[</span><span class="Identifier">oO</span><span class="Constant">]</span><span class="Identifier">{</span><span class="Special">octdigit</span><span class="Identifier">}(<a href="../error/elog.c.html#L89" title="utils/error/elog.c:89">_</a>?{</span><span class="Special">octdigit</span><span class="Identifier">})*<br/></li>
<li></span><span class="Special">bininteger</span><span class="lexAbbrvBlock">&nbsp; &nbsp; </span><span class="Identifier">0</span><span class="Constant">[</span><span class="Identifier">bB</span><span class="Constant">]</span><span class="Identifier">{</span><span class="Special">bindigit</span><span class="Identifier">}(<a href="../error/elog.c.html#L89" title="utils/error/elog.c:89">_</a>?{</span><span class="Special">bindigit</span><span class="Identifier">})*<br/></li>
<li></span><br/></li>
<li><span class="Special">decimal</span><span class="lexAbbrvBlock">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Identifier">({</span><span class="Special">decinteger</span><span class="Identifier">}\.{</span><span class="Special">decdigits</span><span class="Identifier">}?|\.{</span><span class="Special">decdigits</span><span class="Identifier">})<br/></li>
<li></span><span class="Special">real</span><span class="lexAbbrvBlock">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Identifier">({</span><span class="Special">decinteger</span><span class="Identifier">}|{</span><span class="Special">decimal</span><span class="Identifier">})</span><span class="Constant">[</span><span class="Identifier">Ee</span><span class="Constant">][</span><span class="Identifier">-+</span><span class="Constant">]</span><span class="Identifier">?{</span><span class="Special">decdigits</span><span class="Identifier">}<br/></li>
<li></span><span class="Special">realfail</span><span class="lexAbbrvBlock">&nbsp; &nbsp; </span><span class="Identifier">({</span><span class="Special">decinteger</span><span class="Identifier">}|{</span><span class="Special">decimal</span><span class="Identifier">})</span><span class="Constant">[</span><span class="Identifier">Ee</span><span class="Constant">][</span><span class="Identifier">-+</span><span class="Constant">]<br/></li>
<li></span><br/></li>
<li><span class="Special">decinteger_junk</span><span class="lexAbbrvBlock">&nbsp; &nbsp; </span><span class="Identifier">{</span><span class="Special">decinteger</span><span class="Identifier">}{</span><span class="Special">other</span><span class="Identifier">}<br/></li>
<li></span><span class="Special">decimal_junk</span><span class="lexAbbrvBlock">&nbsp; &nbsp; </span><span class="Identifier">{</span><span class="Special">decimal</span><span class="Identifier">}{</span><span class="Special">other</span><span class="Identifier">}<br/></li>
<li></span><span class="Special">real_junk</span><span class="lexAbbrvBlock">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Identifier">{</span><span class="Special">real</span><span class="Identifier">}{</span><span class="Special">other</span><span class="Identifier">}<br/></li>
<li></span><br/></li>
<li><span class="Special">unicode</span><span class="lexAbbrvBlock">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Identifier">\\u({</span><span class="Special">hexdigit</span><span class="Identifier">}{4}|\{{</span><span class="Special">hexdigit</span><span class="Identifier">}{1,6}\})<br/></li>
<li></span><span class="Special">unicodefail</span><span class="lexAbbrvBlock">&nbsp; &nbsp; </span><span class="Identifier">\\u({</span><span class="Special">hexdigit</span><span class="Identifier">}{0,3}|\{{</span><span class="Special">hexdigit</span><span class="Identifier">}{0,6})<br/></li>
<li></span><span class="Special">hex_char</span><span class="lexAbbrvBlock">&nbsp; &nbsp; </span><span class="Identifier">\\x{</span><span class="Special">hexdigit</span><span class="Identifier">}{2}<br/></li>
<li></span><span class="Special">hex_fail</span><span class="lexAbbrvBlock">&nbsp; &nbsp; </span><span class="Identifier">\\x{</span><span class="Special">hexdigit</span><span class="Identifier">}{0,1}<br/></li>
<li></span><br/></li>
<li><span class="Todo">%%<br/></li>
<li></span><br/></li>
<li><span class="Statement">&lt;xnq&gt;</span><span class="Identifier">{</span><span class="Special">other</span><span class="Identifier">}+</span><span class="lexPatSep">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Special">{<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; addstring(</span><span class="Constant">false</span><span class="lexPatCode">, yytext, yyleng);<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Special">}<br/></li>
<li></span><br/></li>
<li><span class="Statement">&lt;xnq&gt;</span><span class="Identifier">{</span><span class="Special">blank</span><span class="Identifier">}+</span><span class="lexPatSep">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Special">{<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; yylval-&gt;str = scanstring;<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="PreProc">BEGIN</span><span class="lexPatCode"> INITIAL;<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">return</span><span class="lexPatCode"> checkKeyword();<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Special">}<br/></li>
<li></span><br/></li>
<li><span class="Statement">&lt;xnq&gt;</span><span class="Identifier">\/\*</span><span class="lexPatSep">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Special">{<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; yylval-&gt;str = scanstring;<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="PreProc">BEGIN</span><span class="lexPatCode"> xc;<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Special">}<br/></li>
<li></span><br/></li>
<li><span class="Statement">&lt;xnq&gt;</span><span class="Identifier">({</span><span class="Special">special</span><span class="Identifier">}|\&quot;)</span><span class="lexPatSep">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Special">{<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; yylval-&gt;str = scanstring;<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="PreProc">yyless</span><span class="lexPatCode">(</span><span class="Constant">0</span><span class="lexPatCode">);<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="PreProc">BEGIN</span><span class="lexPatCode"> INITIAL;<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">return</span><span class="lexPatCode"> checkKeyword();<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Special">}<br/></li>
<li></span><br/></li>
<li><span class="Statement">&lt;xnq&gt;</span><span class="Identifier">&lt;&lt;EOF&gt;&gt;</span><span class="lexPatSep">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Special">{<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; yylval-&gt;str = scanstring;<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="PreProc">BEGIN</span><span class="lexPatCode"> INITIAL;<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">return</span><span class="lexPatCode"> checkKeyword();<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Special">}<br/></li>
<li></span><br/></li>
<li><span class="Statement">&lt;xnq,xq,xvq&gt;</span><span class="Identifier">\\b</span><span class="lexPatSep">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Special">{</span><span class="lexPatCode"> addchar(</span><span class="Constant">false</span><span class="lexPatCode">, </span><span class="Special">'\b'</span><span class="lexPatCode">); </span><span class="Special">}<br/></li>
<li></span><br/></li>
<li><span class="Statement">&lt;xnq,xq,xvq&gt;</span><span class="Identifier">\\f</span><span class="lexPatSep">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Special">{</span><span class="lexPatCode"> addchar(</span><span class="Constant">false</span><span class="lexPatCode">, </span><span class="Special">'\f'</span><span class="lexPatCode">); </span><span class="Special">}<br/></li>
<li></span><br/></li>
<li><span class="Statement">&lt;xnq,xq,xvq&gt;</span><span class="Identifier">\\n</span><span class="lexPatSep">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Special">{</span><span class="lexPatCode"> addchar(</span><span class="Constant">false</span><span class="lexPatCode">, </span><span class="Special">'\n'</span><span class="lexPatCode">); </span><span class="Special">}<br/></li>
<li></span><br/></li>
<li><span class="Statement">&lt;xnq,xq,xvq&gt;</span><span class="Identifier">\\r</span><span class="lexPatSep">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Special">{</span><span class="lexPatCode"> addchar(</span><span class="Constant">false</span><span class="lexPatCode">, </span><span class="Special">'\r'</span><span class="lexPatCode">); </span><span class="Special">}<br/></li>
<li></span><br/></li>
<li><span class="Statement">&lt;xnq,xq,xvq&gt;</span><span class="Identifier">\\t</span><span class="lexPatSep">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Special">{</span><span class="lexPatCode"> addchar(</span><span class="Constant">false</span><span class="lexPatCode">, </span><span class="Special">'\t'</span><span class="lexPatCode">); </span><span class="Special">}<br/></li>
<li></span><br/></li>
<li><span class="Statement">&lt;xnq,xq,xvq&gt;</span><span class="Identifier">\\v</span><span class="lexPatSep">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Special">{</span><span class="lexPatCode"> addchar(</span><span class="Constant">false</span><span class="lexPatCode">, </span><span class="Special">'\v'</span><span class="lexPatCode">); </span><span class="Special">}<br/></li>
<li></span><br/></li>
<li><span class="Statement">&lt;xnq,xq,xvq&gt;</span><span class="Identifier">{</span><span class="Special">unicode</span><span class="Identifier">}+</span><span class="lexPatSep">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Special">{<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">if</span><span class="lexPatCode"> (!parseUnicode(yytext, yyleng, escontext))<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="PreProc">yyterminate</span><span class="lexPatCode">();<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Special">}<br/></li>
<li></span><br/></li>
<li><span class="Statement">&lt;xnq,xq,xvq&gt;</span><span class="Identifier">{</span><span class="Special">hex_char</span><span class="Identifier">}</span><span class="lexPatSep">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Special">{<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">if</span><span class="lexPatCode"> (!parseHexChar(yytext, escontext))<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="PreProc">yyterminate</span><span class="lexPatCode">();<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Special">}<br/></li>
<li></span><br/></li>
<li><span class="Statement">&lt;xnq,xq,xvq&gt;</span><span class="Identifier">{</span><span class="Special">unicode</span><span class="Identifier">}*{</span><span class="Special">unicodefail</span><span class="Identifier">}</span><span class="lexPatSep"> </span><span class="Special">{<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; jsonpath_yyerror(</span><span class="Constant">NULL</span><span class="lexPatCode">, escontext,<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="Constant">&quot;invalid Unicode escape sequence&quot;</span><span class="lexPatCode">);<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="PreProc">yyterminate</span><span class="lexPatCode">();<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Special">}<br/></li>
<li></span><br/></li>
<li><span class="Statement">&lt;xnq,xq,xvq&gt;</span><span class="Identifier">{</span><span class="Special">hex_fail</span><span class="Identifier">}</span><span class="lexPatSep">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Special">{<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; jsonpath_yyerror(</span><span class="Constant">NULL</span><span class="lexPatCode">, escontext,<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="Constant">&quot;invalid hexadecimal character sequence&quot;</span><span class="lexPatCode">);<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="PreProc">yyterminate</span><span class="lexPatCode">();<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Special">}<br/></li>
<li></span><br/></li>
<li><span class="Statement">&lt;xnq,xq,xvq&gt;</span><span class="Identifier">{</span><span class="Special">unicode</span><span class="Identifier">}+\\</span><span class="lexPatSep">&nbsp; &nbsp; </span><span class="Special">{<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Comment">/* throw back the \\, and treat as unicode */<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="PreProc">yyless</span><span class="lexPatCode">(yyleng - </span><span class="Constant">1</span><span class="lexPatCode">);<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">if</span><span class="lexPatCode"> (!parseUnicode(yytext, yyleng, escontext))<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="PreProc">yyterminate</span><span class="lexPatCode">();<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Special">}<br/></li>
<li></span><br/></li>
<li><span class="Statement">&lt;xnq,xq,xvq&gt;</span><span class="Identifier">\\.</span><span class="lexPatSep">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Special">{</span><span class="lexPatCode"> addchar(</span><span class="Constant">false</span><span class="lexPatCode">, yytext[</span><span class="Constant">1</span><span class="lexPatCode">]); </span><span class="Special">}<br/></li>
<li></span><br/></li>
<li><span class="Statement">&lt;xnq,xq,xvq&gt;</span><span class="Identifier">\\&nbsp; &nbsp; </span><span class="lexPatSep">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Special">{<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; jsonpath_yyerror(</span><span class="Constant">NULL</span><span class="lexPatCode">, escontext,<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="Constant">&quot;unexpected end after backslash&quot;</span><span class="lexPatCode">);<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="PreProc">yyterminate</span><span class="lexPatCode">();<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Special">}<br/></li>
<li></span><br/></li>
<li><span class="Statement">&lt;xq,xvq&gt;</span><span class="Identifier">&lt;&lt;EOF&gt;&gt;</span><span class="lexPatSep">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Special">{<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; jsonpath_yyerror(</span><span class="Constant">NULL</span><span class="lexPatCode">, escontext,<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="Constant">&quot;unterminated quoted string&quot;</span><span class="lexPatCode">);<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="PreProc">yyterminate</span><span class="lexPatCode">();<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Special">}<br/></li>
<li></span><br/></li>
<li><span class="Statement">&lt;xq&gt;</span><span class="Identifier">\&quot;</span><span class="lexPatSep">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Special">{<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; yylval-&gt;str = scanstring;<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="PreProc">BEGIN</span><span class="lexPatCode"> INITIAL;<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">return</span><span class="lexPatCode"> STRING_P;<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Special">}<br/></li>
<li></span><br/></li>
<li><span class="Statement">&lt;xvq&gt;</span><span class="Identifier">\&quot;</span><span class="lexPatSep">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Special">{<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; yylval-&gt;str = scanstring;<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="PreProc">BEGIN</span><span class="lexPatCode"> INITIAL;<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">return</span><span class="lexPatCode"> VARIABLE_P;<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Special">}<br/></li>
<li></span><br/></li>
<li><span class="Statement">&lt;xq,xvq&gt;</span><span class="Constant">[</span><span class="Identifier">^\\\&quot;</span><span class="Constant">]</span><span class="Identifier">+</span><span class="lexPatSep">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Special">{</span><span class="lexPatCode"> addstring(</span><span class="Constant">false</span><span class="lexPatCode">, yytext, yyleng); </span><span class="Special">}<br/></li>
<li></span><br/></li>
<li><span class="Statement">&lt;xc&gt;</span><span class="Identifier">\*\/</span><span class="lexPatSep">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Special">{</span><span class="lexPatCode"> </span><span class="PreProc">BEGIN</span><span class="lexPatCode"> INITIAL; </span><span class="Special">}<br/></li>
<li></span><br/></li>
<li><span class="Statement">&lt;xc&gt;</span><span class="Constant">[</span><span class="Identifier">^\*</span><span class="Constant">]</span><span class="Identifier">+</span><span class="lexPatSep">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Special">{</span><span class="lexPatCode"> </span><span class="Special">}<br/></li>
<li></span><br/></li>
<li><span class="Statement">&lt;xc&gt;</span><span class="Identifier">\*</span><span class="lexPatSep">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Special">{</span><span class="lexPatCode"> </span><span class="Special">}<br/></li>
<li></span><br/></li>
<li><span class="Statement">&lt;xc&gt;</span><span class="Identifier">&lt;&lt;EOF&gt;&gt;</span><span class="lexPatSep">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Special">{<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; jsonpath_yyerror(<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Constant">NULL</span><span class="lexPatCode">, escontext,<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Constant">&quot;unexpected end of comment&quot;</span><span class="lexPatCode">);<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="PreProc">yyterminate</span><span class="lexPatCode">();<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Special">}<br/></li>
<li></span><span class="Identifier">\&amp;\&amp;</span><span class="lexPatSep">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Special">{</span><span class="lexPatCode"> </span><span class="Statement">return</span><span class="lexPatCode"> AND_P; </span><span class="Special">}<br/></li>
<li></span><br/></li>
<li><span class="Identifier">\|\|</span><span class="lexPatSep">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Special">{</span><span class="lexPatCode"> </span><span class="Statement">return</span><span class="lexPatCode"> OR_P; </span><span class="Special">}<br/></li>
<li></span><br/></li>
<li><span class="Identifier">\!</span><span class="lexPatSep">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Special">{</span><span class="lexPatCode"> </span><span class="Statement">return</span><span class="lexPatCode"> NOT_P; </span><span class="Special">}<br/></li>
<li></span><br/></li>
<li><span class="Identifier">\*\*</span><span class="lexPatSep">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Special">{</span><span class="lexPatCode"> </span><span class="Statement">return</span><span class="lexPatCode"> ANY_P; </span><span class="Special">}<br/></li>
<li></span><br/></li>
<li><span class="Identifier">\&lt;</span><span class="lexPatSep">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Special">{</span><span class="lexPatCode"> </span><span class="Statement">return</span><span class="lexPatCode"> LESS_P; </span><span class="Special">}<br/></li>
<li></span><br/></li>
<li><span class="Identifier">\&lt;\=</span><span class="lexPatSep">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Special">{</span><span class="lexPatCode"> </span><span class="Statement">return</span><span class="lexPatCode"> LESSEQUAL_P; </span><span class="Special">}<br/></li>
<li></span><br/></li>
<li><span class="Identifier">\=\=</span><span class="lexPatSep">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Special">{</span><span class="lexPatCode"> </span><span class="Statement">return</span><span class="lexPatCode"> EQUAL_P; </span><span class="Special">}<br/></li>
<li></span><br/></li>
<li><span class="Identifier">\&lt;\&gt;</span><span class="lexPatSep">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Special">{</span><span class="lexPatCode"> </span><span class="Statement">return</span><span class="lexPatCode"> NOTEQUAL_P; </span><span class="Special">}<br/></li>
<li></span><br/></li>
<li><span class="Identifier">\!\=</span><span class="lexPatSep">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Special">{</span><span class="lexPatCode"> </span><span class="Statement">return</span><span class="lexPatCode"> NOTEQUAL_P; </span><span class="Special">}<br/></li>
<li></span><br/></li>
<li><span class="Identifier">\&gt;\=</span><span class="lexPatSep">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Special">{</span><span class="lexPatCode"> </span><span class="Statement">return</span><span class="lexPatCode"> GREATEREQUAL_P; </span><span class="Special">}<br/></li>
<li></span><br/></li>
<li><span class="Identifier">\&gt;</span><span class="lexPatSep">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Special">{</span><span class="lexPatCode"> </span><span class="Statement">return</span><span class="lexPatCode"> GREATER_P; </span><span class="Special">}<br/></li>
<li></span><br/></li>
<li><span class="Identifier">\${</span><span class="Special">other</span><span class="Identifier">}+</span><span class="lexPatSep">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Special">{<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; addstring(</span><span class="Constant">true</span><span class="lexPatCode">, yytext + </span><span class="Constant">1</span><span class="lexPatCode">, yyleng - </span><span class="Constant">1</span><span class="lexPatCode">);<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; addchar(</span><span class="Constant">false</span><span class="lexPatCode">, </span><span class="Special">'\0'</span><span class="lexPatCode">);<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; yylval-&gt;str = scanstring;<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">return</span><span class="lexPatCode"> VARIABLE_P;<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Special">}<br/></li>
<li></span><br/></li>
<li><span class="Identifier">\$\&quot;</span><span class="lexPatSep">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Special">{<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; addchar(</span><span class="Constant">true</span><span class="lexPatCode">, </span><span class="Special">'\0'</span><span class="lexPatCode">);<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="PreProc">BEGIN</span><span class="lexPatCode"> xvq;<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Special">}<br/></li>
<li></span><br/></li>
<li><span class="Identifier">{</span><span class="Special">special</span><span class="Identifier">}</span><span class="lexPatSep">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Special">{</span><span class="lexPatCode"> </span><span class="Statement">return</span><span class="lexPatCode"> *</span><span class="PreProc">yytext</span><span class="lexPatCode">; </span><span class="Special">}<br/></li>
<li></span><br/></li>
<li><span class="Identifier">{</span><span class="Special">blank</span><span class="Identifier">}+</span><span class="lexPatSep">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Special">{</span><span class="lexPatCode"> </span><span class="Comment">/* ignore */</span><span class="lexPatCode"> </span><span class="Special">}<br/></li>
<li></span><br/></li>
<li><span class="Identifier">\/\*</span><span class="lexPatSep">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Special">{<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; addchar(</span><span class="Constant">true</span><span class="lexPatCode">, </span><span class="Special">'\0'</span><span class="lexPatCode">);<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="PreProc">BEGIN</span><span class="lexPatCode"> xc;<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Special">}<br/></li>
<li></span><br/></li>
<li><span class="Identifier">{</span><span class="Special">real</span><span class="Identifier">}</span><span class="lexPatSep">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Special">{<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; addstring(</span><span class="Constant">true</span><span class="lexPatCode">, yytext, yyleng);<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; addchar(</span><span class="Constant">false</span><span class="lexPatCode">, </span><span class="Special">'\0'</span><span class="lexPatCode">);<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; yylval-&gt;str = scanstring;<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">return</span><span class="lexPatCode"> NUMERIC_P;<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Special">}<br/></li>
<li></span><br/></li>
<li><span class="Identifier">{</span><span class="Special">decimal</span><span class="Identifier">}</span><span class="lexPatSep">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Special">{<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; addstring(</span><span class="Constant">true</span><span class="lexPatCode">, yytext, yyleng);<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; addchar(</span><span class="Constant">false</span><span class="lexPatCode">, </span><span class="Special">'\0'</span><span class="lexPatCode">);<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; yylval-&gt;str = scanstring;<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">return</span><span class="lexPatCode"> NUMERIC_P;<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Special">}<br/></li>
<li></span><br/></li>
<li><span class="Identifier">{</span><span class="Special">decinteger</span><span class="Identifier">}</span><span class="lexPatSep">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Special">{<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; addstring(</span><span class="Constant">true</span><span class="lexPatCode">, yytext, yyleng);<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; addchar(</span><span class="Constant">false</span><span class="lexPatCode">, </span><span class="Special">'\0'</span><span class="lexPatCode">);<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; yylval-&gt;str = scanstring;<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">return</span><span class="lexPatCode"> INT_P;<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Special">}<br/></li>
<li></span><br/></li>
<li><span class="Identifier">{</span><span class="Special">hexinteger</span><span class="Identifier">}</span><span class="lexPatSep">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Special">{<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; addstring(</span><span class="Constant">true</span><span class="lexPatCode">, yytext, yyleng);<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; addchar(</span><span class="Constant">false</span><span class="lexPatCode">, </span><span class="Special">'\0'</span><span class="lexPatCode">);<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; yylval-&gt;str = scanstring;<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">return</span><span class="lexPatCode"> INT_P;<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Special">}<br/></li>
<li></span><br/></li>
<li><span class="Identifier">{</span><span class="Special">octinteger</span><span class="Identifier">}</span><span class="lexPatSep">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Special">{<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; addstring(</span><span class="Constant">true</span><span class="lexPatCode">, yytext, yyleng);<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; addchar(</span><span class="Constant">false</span><span class="lexPatCode">, </span><span class="Special">'\0'</span><span class="lexPatCode">);<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; yylval-&gt;str = scanstring;<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">return</span><span class="lexPatCode"> INT_P;<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Special">}<br/></li>
<li></span><br/></li>
<li><span class="Identifier">{</span><span class="Special">bininteger</span><span class="Identifier">}</span><span class="lexPatSep">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Special">{<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; addstring(</span><span class="Constant">true</span><span class="lexPatCode">, yytext, yyleng);<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; addchar(</span><span class="Constant">false</span><span class="lexPatCode">, </span><span class="Special">'\0'</span><span class="lexPatCode">);<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; yylval-&gt;str = scanstring;<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">return</span><span class="lexPatCode"> INT_P;<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Special">}<br/></li>
<li></span><br/></li>
<li><span class="Identifier">{</span><span class="Special">realfail</span><span class="Identifier">}</span><span class="lexPatSep">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Special">{<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; jsonpath_yyerror(<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Constant">NULL</span><span class="lexPatCode">, escontext,<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Constant">&quot;invalid <a href="numeric.c.html#L1237" title="utils/adt/numeric.c:1237">numeric</a> literal&quot;</span><span class="lexPatCode">);<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="PreProc">yyterminate</span><span class="lexPatCode">();<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Special">}<br/></li>
<li></span><span class="Identifier">{</span><span class="Special">decinteger_junk</span><span class="Identifier">}</span><span class="lexPatSep">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Special">{<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; jsonpath_yyerror(<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Constant">NULL</span><span class="lexPatCode">, escontext,<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Constant">&quot;trailing junk after <a href="numeric.c.html#L1237" title="utils/adt/numeric.c:1237">numeric</a> literal&quot;</span><span class="lexPatCode">);<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="PreProc">yyterminate</span><span class="lexPatCode">();<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Special">}<br/></li>
<li></span><span class="Identifier">{</span><span class="Special">decimal_junk</span><span class="Identifier">}</span><span class="lexPatSep">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Special">{<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; jsonpath_yyerror(<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Constant">NULL</span><span class="lexPatCode">, escontext,<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Constant">&quot;trailing junk after <a href="numeric.c.html#L1237" title="utils/adt/numeric.c:1237">numeric</a> literal&quot;</span><span class="lexPatCode">);<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="PreProc">yyterminate</span><span class="lexPatCode">();<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Special">}<br/></li>
<li></span><span class="Identifier">{</span><span class="Special">real_junk</span><span class="Identifier">}</span><span class="lexPatSep">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Special">{<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; jsonpath_yyerror(<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Constant">NULL</span><span class="lexPatCode">, escontext,<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Constant">&quot;trailing junk after <a href="numeric.c.html#L1237" title="utils/adt/numeric.c:1237">numeric</a> literal&quot;</span><span class="lexPatCode">);<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="PreProc">yyterminate</span><span class="lexPatCode">();<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Special">}<br/></li>
<li></span><span class="Identifier">\&quot;</span><span class="lexPatSep">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Special">{<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; addchar(</span><span class="Constant">true</span><span class="lexPatCode">, </span><span class="Special">'\0'</span><span class="lexPatCode">);<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="PreProc">BEGIN</span><span class="lexPatCode"> xq;<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Special">}<br/></li>
<li></span><br/></li>
<li><span class="Identifier">\\&nbsp; &nbsp; </span><span class="lexPatSep">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Special">{<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="PreProc">yyless</span><span class="lexPatCode">(</span><span class="Constant">0</span><span class="lexPatCode">);<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; addchar(</span><span class="Constant">true</span><span class="lexPatCode">, </span><span class="Special">'\0'</span><span class="lexPatCode">);<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="PreProc">BEGIN</span><span class="lexPatCode"> xnq;<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Special">}<br/></li>
<li></span><br/></li>
<li><span class="Identifier">{</span><span class="Special">other</span><span class="Identifier">}+</span><span class="lexPatSep">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Special">{<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; addstring(</span><span class="Constant">true</span><span class="lexPatCode">, yytext, yyleng);<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="PreProc">BEGIN</span><span class="lexPatCode"> xnq;<br/></li>
<li></span><span class="lexPatCode">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Special">}<br/></li>
<li></span><br/></li>
<li><span class="Identifier">&lt;&lt;EOF&gt;&gt;</span><span class="lexPatSep">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Special">{</span><span class="lexPatCode"> </span><span class="PreProc">yyterminate</span><span class="lexPatCode">(); </span><span class="Special">}<br/></li>
<li></span><br/></li>
<li><span class="Todo">%%<br/></li>
<li></span><br/></li>
<li><span class="Comment">/* LCOV_EXCL_STOP */<br/></li>
<li></span><br/></li>
<li><span class="Type">void<br/></li>
<li></span><span class="lexFinalCodeBlock">jsonpath_yyerror(JsonPathParseResult **result, </span><span class="Type">struct</span><span class="lexFinalCodeBlock"> Node *escontext,<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="Type">const</span><span class="lexFinalCodeBlock"> </span><span class="Type">char</span><span class="lexFinalCodeBlock"> *message)<br/></li>
<li></span><span class="lexFinalCodeBlock">{<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; </span><span class="Comment">/* don't overwrite escontext if it's already been set */<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; </span><span class="Statement">if</span><span class="lexFinalCodeBlock"> (SOFT_ERROR_OCCURRED(escontext))<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">return</span><span class="lexFinalCodeBlock">;<br/></li>
<li></span><br/></li>
<li><span class="lexFinalCodeBlock">&nbsp; &nbsp; </span><span class="Statement">if</span><span class="lexFinalCodeBlock"> (*yytext == YY_END_OF_BUFFER_CHAR)<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; {<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; errsave(escontext,<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (<a href="../error/elog.c.html#L859" title="utils/error/elog.c:859">errcode</a>(ERRCODE_SYNTAX_ERROR),<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="Comment">/* translator: %s is typically &quot;syntax <a href="../../parser/check_keywords.pl.html#L17" title="parser/check_keywords.pl:17">error</a>&quot; */<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <a href="../error/elog.c.html#L1072" title="utils/error/elog.c:1072">errmsg</a>(</span><span class="Constant">&quot;</span><span class="Special">%s</span><span class="Constant"> at end of jsonpath input&quot;</span><span class="lexFinalCodeBlock">, <a href="../error/elog.c.html#L89" title="utils/error/elog.c:89">_</a>(message))));<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; }<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; </span><span class="Statement">else<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; {<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; errsave(escontext,<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (<a href="../error/elog.c.html#L859" title="utils/error/elog.c:859">errcode</a>(ERRCODE_SYNTAX_ERROR),<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="Comment">/* translator: first %s is typically &quot;syntax <a href="../../parser/check_keywords.pl.html#L17" title="parser/check_keywords.pl:17">error</a>&quot; */<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <a href="../error/elog.c.html#L1072" title="utils/error/elog.c:1072">errmsg</a>(</span><span class="Constant">&quot;</span><span class="Special">%s</span><span class="Constant"> at or near </span><span class="Special">\&quot;%s\&quot;</span><span class="Constant"> of jsonpath input&quot;</span><span class="lexFinalCodeBlock">,<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="../error/elog.c.html#L89" title="utils/error/elog.c:89">_</a>(message), yytext)));<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; }<br/></li>
<li></span><span class="lexFinalCodeBlock">}<br/></li>
<li></span><br/></li>
<li><span class="Type">typedef</span><span class="lexFinalCodeBlock"> </span><span class="Type">struct</span><span class="lexFinalCodeBlock"> JsonPathKeyword<br/></li>
<li></span><span class="lexFinalCodeBlock">{<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; int16&nbsp; &nbsp; &nbsp; &nbsp; len;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; </span><span class="Type"><a href="../fmgr/dfmgr.c.html#L28" title="utils/fmgr/dfmgr.c:28">bool</a></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; lowercase;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; </span><span class="Type">int</span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; val;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; </span><span class="Type">const</span><span class="lexFinalCodeBlock"> </span><span class="Type">char</span><span class="lexFinalCodeBlock"> *keyword;<br/></li>
<li></span><span class="lexFinalCodeBlock">} JsonPathKeyword;<br/></li>
<li></span><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * Array of key words should be sorted by length and then<br/></li>
<li></span><span class="Comment"> * alphabetical order<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><span class="Type">static</span><span class="lexFinalCodeBlock"> </span><span class="Type">const</span><span class="lexFinalCodeBlock"> JsonPathKeyword keywords[] = {<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; { </span><span class="Constant">2</span><span class="lexFinalCodeBlock">, </span><span class="Constant">false</span><span class="lexFinalCodeBlock">,&nbsp; &nbsp; IS_P,&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Constant">&quot;is&quot;</span><span class="lexFinalCodeBlock">},<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; { </span><span class="Constant">2</span><span class="lexFinalCodeBlock">, </span><span class="Constant">false</span><span class="lexFinalCodeBlock">,&nbsp; &nbsp; TO_P,&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Constant">&quot;to&quot;</span><span class="lexFinalCodeBlock">},<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; { </span><span class="Constant">3</span><span class="lexFinalCodeBlock">, </span><span class="Constant">false</span><span class="lexFinalCodeBlock">,&nbsp; &nbsp; ABS_P,&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Constant">&quot;abs&quot;</span><span class="lexFinalCodeBlock">},<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; { </span><span class="Constant">3</span><span class="lexFinalCodeBlock">, </span><span class="Constant">false</span><span class="lexFinalCodeBlock">,&nbsp; &nbsp; LAX_P,&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Constant">&quot;lax&quot;</span><span class="lexFinalCodeBlock">},<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; { </span><span class="Constant">4</span><span class="lexFinalCodeBlock">, </span><span class="Constant">false</span><span class="lexFinalCodeBlock">,&nbsp; &nbsp; DATE_P,&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Constant">&quot;date&quot;</span><span class="lexFinalCodeBlock">},<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; { </span><span class="Constant">4</span><span class="lexFinalCodeBlock">, </span><span class="Constant">false</span><span class="lexFinalCodeBlock">,&nbsp; &nbsp; FLAG_P,&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Constant">&quot;flag&quot;</span><span class="lexFinalCodeBlock">},<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; { </span><span class="Constant">4</span><span class="lexFinalCodeBlock">, </span><span class="Constant">false</span><span class="lexFinalCodeBlock">,&nbsp; &nbsp; LAST_P,&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Constant">&quot;last&quot;</span><span class="lexFinalCodeBlock">},<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; { </span><span class="Constant">4</span><span class="lexFinalCodeBlock">, </span><span class="Constant">true</span><span class="lexFinalCodeBlock">,&nbsp; &nbsp; NULL_P,&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Constant">&quot;null&quot;</span><span class="lexFinalCodeBlock">},<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; { </span><span class="Constant">4</span><span class="lexFinalCodeBlock">, </span><span class="Constant">false</span><span class="lexFinalCodeBlock">,&nbsp; &nbsp; SIZE_P,&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Constant">&quot;size&quot;</span><span class="lexFinalCodeBlock">},<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; { </span><span class="Constant">4</span><span class="lexFinalCodeBlock">, </span><span class="Constant">false</span><span class="lexFinalCodeBlock">,&nbsp; &nbsp; TIME_P,&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Constant">&quot;time&quot;</span><span class="lexFinalCodeBlock">},<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; { </span><span class="Constant">4</span><span class="lexFinalCodeBlock">, </span><span class="Constant">true</span><span class="lexFinalCodeBlock">,&nbsp; &nbsp; TRUE_P,&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Constant">&quot;true&quot;</span><span class="lexFinalCodeBlock">},<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; { </span><span class="Constant">4</span><span class="lexFinalCodeBlock">, </span><span class="Constant">false</span><span class="lexFinalCodeBlock">,&nbsp; &nbsp; TYPE_P,&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Constant">&quot;type&quot;</span><span class="lexFinalCodeBlock">},<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; { </span><span class="Constant">4</span><span class="lexFinalCodeBlock">, </span><span class="Constant">false</span><span class="lexFinalCodeBlock">,&nbsp; &nbsp; WITH_P,&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Constant">&quot;with&quot;</span><span class="lexFinalCodeBlock">},<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; { </span><span class="Constant">5</span><span class="lexFinalCodeBlock">, </span><span class="Constant">true</span><span class="lexFinalCodeBlock">,&nbsp; &nbsp; FALSE_P,&nbsp; &nbsp; </span><span class="Constant">&quot;false&quot;</span><span class="lexFinalCodeBlock">},<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; { </span><span class="Constant">5</span><span class="lexFinalCodeBlock">, </span><span class="Constant">false</span><span class="lexFinalCodeBlock">,&nbsp; &nbsp; FLOOR_P,&nbsp; &nbsp; </span><span class="Constant">&quot;floor&quot;</span><span class="lexFinalCodeBlock">},<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; { </span><span class="Constant">6</span><span class="lexFinalCodeBlock">, </span><span class="Constant">false</span><span class="lexFinalCodeBlock">,&nbsp; &nbsp; BIGINT_P,&nbsp; &nbsp; </span><span class="Constant">&quot;bigint&quot;</span><span class="lexFinalCodeBlock">},<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; { </span><span class="Constant">6</span><span class="lexFinalCodeBlock">, </span><span class="Constant">false</span><span class="lexFinalCodeBlock">,&nbsp; &nbsp; DOUBLE_P,&nbsp; &nbsp; </span><span class="Constant">&quot;double&quot;</span><span class="lexFinalCodeBlock">},<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; { </span><span class="Constant">6</span><span class="lexFinalCodeBlock">, </span><span class="Constant">false</span><span class="lexFinalCodeBlock">,&nbsp; &nbsp; EXISTS_P,&nbsp; &nbsp; </span><span class="Constant">&quot;exists&quot;</span><span class="lexFinalCodeBlock">},<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; { </span><span class="Constant">6</span><span class="lexFinalCodeBlock">, </span><span class="Constant">false</span><span class="lexFinalCodeBlock">,&nbsp; &nbsp; NUMBER_P,&nbsp; &nbsp; </span><span class="Constant">&quot;number&quot;</span><span class="lexFinalCodeBlock">},<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; { </span><span class="Constant">6</span><span class="lexFinalCodeBlock">, </span><span class="Constant">false</span><span class="lexFinalCodeBlock">,&nbsp; &nbsp; STARTS_P,&nbsp; &nbsp; </span><span class="Constant">&quot;starts&quot;</span><span class="lexFinalCodeBlock">},<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; { </span><span class="Constant">6</span><span class="lexFinalCodeBlock">, </span><span class="Constant">false</span><span class="lexFinalCodeBlock">,&nbsp; &nbsp; STRICT_P,&nbsp; &nbsp; </span><span class="Constant">&quot;strict&quot;</span><span class="lexFinalCodeBlock">},<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; { </span><span class="Constant">6</span><span class="lexFinalCodeBlock">, </span><span class="Constant">false</span><span class="lexFinalCodeBlock">,&nbsp; &nbsp; STRINGFUNC_P, </span><span class="Constant">&quot;string&quot;</span><span class="lexFinalCodeBlock">},<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; { </span><span class="Constant">7</span><span class="lexFinalCodeBlock">, </span><span class="Constant">false</span><span class="lexFinalCodeBlock">,&nbsp; &nbsp; BOOLEAN_P,&nbsp; &nbsp; </span><span class="Constant">&quot;boolean&quot;</span><span class="lexFinalCodeBlock">},<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; { </span><span class="Constant">7</span><span class="lexFinalCodeBlock">, </span><span class="Constant">false</span><span class="lexFinalCodeBlock">,&nbsp; &nbsp; CEILING_P,&nbsp; &nbsp; </span><span class="Constant">&quot;ceiling&quot;</span><span class="lexFinalCodeBlock">},<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; { </span><span class="Constant">7</span><span class="lexFinalCodeBlock">, </span><span class="Constant">false</span><span class="lexFinalCodeBlock">,&nbsp; &nbsp; DECIMAL_P,&nbsp; &nbsp; </span><span class="Constant">&quot;decimal&quot;</span><span class="lexFinalCodeBlock">},<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; { </span><span class="Constant">7</span><span class="lexFinalCodeBlock">, </span><span class="Constant">false</span><span class="lexFinalCodeBlock">,&nbsp; &nbsp; INTEGER_P,&nbsp; &nbsp; </span><span class="Constant">&quot;integer&quot;</span><span class="lexFinalCodeBlock">},<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; { </span><span class="Constant">7</span><span class="lexFinalCodeBlock">, </span><span class="Constant">false</span><span class="lexFinalCodeBlock">,&nbsp; &nbsp; TIME_TZ_P,&nbsp; &nbsp; </span><span class="Constant">&quot;time_tz&quot;</span><span class="lexFinalCodeBlock">},<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; { </span><span class="Constant">7</span><span class="lexFinalCodeBlock">, </span><span class="Constant">false</span><span class="lexFinalCodeBlock">,&nbsp; &nbsp; UNKNOWN_P,&nbsp; &nbsp; </span><span class="Constant">&quot;unknown&quot;</span><span class="lexFinalCodeBlock">},<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; { </span><span class="Constant">8</span><span class="lexFinalCodeBlock">, </span><span class="Constant">false</span><span class="lexFinalCodeBlock">,&nbsp; &nbsp; DATETIME_P,&nbsp; &nbsp; </span><span class="Constant">&quot;datetime&quot;</span><span class="lexFinalCodeBlock">},<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; { </span><span class="Constant">8</span><span class="lexFinalCodeBlock">, </span><span class="Constant">false</span><span class="lexFinalCodeBlock">,&nbsp; &nbsp; KEYVALUE_P,&nbsp; &nbsp; </span><span class="Constant">&quot;keyvalue&quot;</span><span class="lexFinalCodeBlock">},<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; { </span><span class="Constant">9</span><span class="lexFinalCodeBlock">, </span><span class="Constant">false</span><span class="lexFinalCodeBlock">,&nbsp; &nbsp; TIMESTAMP_P, </span><span class="Constant">&quot;timestamp&quot;</span><span class="lexFinalCodeBlock">},<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; { </span><span class="Constant">10</span><span class="lexFinalCodeBlock">,</span><span class="Constant">false</span><span class="lexFinalCodeBlock">, LIKE_REGEX_P, </span><span class="Constant">&quot;like_regex&quot;</span><span class="lexFinalCodeBlock">},<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; { </span><span class="Constant">12</span><span class="lexFinalCodeBlock">,</span><span class="Constant">false</span><span class="lexFinalCodeBlock">, TIMESTAMP_TZ_P, </span><span class="Constant">&quot;timestamp_tz&quot;</span><span class="lexFinalCodeBlock">},<br/></li>
<li></span><span class="lexFinalCodeBlock">};<br/></li>
<li></span><br/></li>
<li><span class="Comment">/* Check if current scanstring value is a keyword */<br/></li>
<li></span><span class="Type">static</span><span class="lexFinalCodeBlock"> </span><span class="Type">enum</span><span class="lexFinalCodeBlock"> yytokentype<br/></li>
<li></span><span class="lexFinalCodeBlock">checkKeyword()<br/></li>
<li></span><span class="lexFinalCodeBlock">{<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; </span><span class="Type">int</span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; res = IDENT_P;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; </span><span class="Type">int</span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; diff;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; </span><span class="Type">const</span><span class="lexFinalCodeBlock"> JsonPathKeyword&nbsp; *StopLow = keywords,<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; *StopHigh = keywords + lengthof(keywords),<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; *StopMiddle;<br/></li>
<li></span><br/></li>
<li><span class="lexFinalCodeBlock">&nbsp; &nbsp; </span><span class="Statement">if</span><span class="lexFinalCodeBlock"> (scanstring.len &gt; keywords[lengthof(keywords) - </span><span class="Constant">1</span><span class="lexFinalCodeBlock">].len)<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">return</span><span class="lexFinalCodeBlock"> res;<br/></li>
<li></span><br/></li>
<li><span class="lexFinalCodeBlock">&nbsp; &nbsp; </span><span class="Statement">while</span><span class="lexFinalCodeBlock"> (StopLow &lt; StopHigh)<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; {<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; StopMiddle = StopLow + ((StopHigh - StopLow) &gt;&gt; </span><span class="Constant">1</span><span class="lexFinalCodeBlock">);<br/></li>
<li></span><br/></li>
<li><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">if</span><span class="lexFinalCodeBlock"> (StopMiddle-&gt;len == scanstring.len)<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; diff = pg_strncasecmp(StopMiddle-&gt;keyword, scanstring.val,<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; scanstring.len);<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">else<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; diff = StopMiddle-&gt;len - scanstring.len;<br/></li>
<li></span><br/></li>
<li><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">if</span><span class="lexFinalCodeBlock"> (diff &lt; </span><span class="Constant">0</span><span class="lexFinalCodeBlock">)<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; StopLow = StopMiddle + </span><span class="Constant">1</span><span class="lexFinalCodeBlock">;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">else</span><span class="lexFinalCodeBlock"> </span><span class="Statement">if</span><span class="lexFinalCodeBlock"> (diff &gt; </span><span class="Constant">0</span><span class="lexFinalCodeBlock">)<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; StopHigh = StopMiddle;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">else<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; {<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">if</span><span class="lexFinalCodeBlock"> (StopMiddle-&gt;lowercase)<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; diff = strncmp(StopMiddle-&gt;keyword, scanstring.val,<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; scanstring.len);<br/></li>
<li></span><br/></li>
<li><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">if</span><span class="lexFinalCodeBlock"> (diff == </span><span class="Constant">0</span><span class="lexFinalCodeBlock">)<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; res = StopMiddle-&gt;val;<br/></li>
<li></span><br/></li>
<li><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">break</span><span class="lexFinalCodeBlock">;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; }<br/></li>
<li></span><br/></li>
<li><span class="lexFinalCodeBlock">&nbsp; &nbsp; </span><span class="Statement">return</span><span class="lexFinalCodeBlock"> res;<br/></li>
<li></span><span class="lexFinalCodeBlock">}<br/></li>
<li></span><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * Called <a href="../../regex/regc_locale.c.html#L488" title="regex/regc_locale.c:488">before</a> <a href="pseudotypes.c.html#L365" title="utils/adt/pseudotypes.c:365">any</a> actual parsing is done<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><span class="Type">static</span><span class="lexFinalCodeBlock"> </span><span class="Type">void<br/></li>
<li></span><span class="lexFinalCodeBlock">jsonpath_scanner_init(</span><span class="Type">const</span><span class="lexFinalCodeBlock"> </span><span class="Type">char</span><span class="lexFinalCodeBlock"> *str, </span><span class="Type">int</span><span class="lexFinalCodeBlock"> slen)<br/></li>
<li></span><span class="lexFinalCodeBlock">{<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; </span><span class="Statement">if</span><span class="lexFinalCodeBlock"> (slen &lt;= </span><span class="Constant">0</span><span class="lexFinalCodeBlock">)<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; slen = strlen(str);<br/></li>
<li></span><br/></li>
<li><span class="lexFinalCodeBlock">&nbsp; &nbsp; </span><span class="Comment">/*<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp;&nbsp; * Might be left over after ereport()<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp;&nbsp; */<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; yy_init_globals();<br/></li>
<li></span><br/></li>
<li><span class="lexFinalCodeBlock">&nbsp; &nbsp; </span><span class="Comment">/*<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp;&nbsp; * Make a scan buffer with special termination needed by flex.<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp;&nbsp; */<br/></li>
<li></span><br/></li>
<li><span class="lexFinalCodeBlock">&nbsp; &nbsp; scanbuflen = slen;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; scanbuf = <a href="../mmgr/mcxt.c.html#L1316" title="utils/mmgr/mcxt.c:1316">palloc</a>(slen + </span><span class="Constant">2</span><span class="lexFinalCodeBlock">);<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; memcpy(scanbuf, str, slen);<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; scanbuf[slen] = scanbuf[slen + </span><span class="Constant">1</span><span class="lexFinalCodeBlock">] = YY_END_OF_BUFFER_CHAR;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; scanbufhandle = yy_scan_buffer(scanbuf, slen + </span><span class="Constant">2</span><span class="lexFinalCodeBlock">);<br/></li>
<li></span><br/></li>
<li><span class="lexFinalCodeBlock">&nbsp; &nbsp; BEGIN(INITIAL);<br/></li>
<li></span><span class="lexFinalCodeBlock">}<br/></li>
<li></span><br/></li>
<li><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * Called after parsing is done to clean up after jsonpath_scanner_init()<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><span class="Type">static</span><span class="lexFinalCodeBlock"> </span><span class="Type">void<br/></li>
<li></span><span class="lexFinalCodeBlock">jsonpath_scanner_finish(</span><span class="Type">void</span><span class="lexFinalCodeBlock">)<br/></li>
<li></span><span class="lexFinalCodeBlock">{<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; yy_delete_buffer(scanbufhandle);<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; <a href="../mmgr/mcxt.c.html#L1520" title="utils/mmgr/mcxt.c:1520">pfree</a>(scanbuf);<br/></li>
<li></span><span class="lexFinalCodeBlock">}<br/></li>
<li></span><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * Resize scanstring so that it can append string of given length.<br/></li>
<li></span><span class="Comment"> * Reinitialize if required.<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><span class="Type">static</span><span class="lexFinalCodeBlock"> </span><span class="Type">void<br/></li>
<li></span><span class="lexFinalCodeBlock">resizeString(</span><span class="Type"><a href="../fmgr/dfmgr.c.html#L28" title="utils/fmgr/dfmgr.c:28">bool</a></span><span class="lexFinalCodeBlock"> init, </span><span class="Type">int</span><span class="lexFinalCodeBlock"> appendLen)<br/></li>
<li></span><span class="lexFinalCodeBlock">{<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; </span><span class="Statement">if</span><span class="lexFinalCodeBlock"> (init)<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; {<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; scanstring.total = Max(</span><span class="Constant">32</span><span class="lexFinalCodeBlock">, appendLen);<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; scanstring.val = (</span><span class="Type">char</span><span class="lexFinalCodeBlock"> *) <a href="../mmgr/mcxt.c.html#L1316" title="utils/mmgr/mcxt.c:1316">palloc</a>(scanstring.total);<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; scanstring.len = </span><span class="Constant">0</span><span class="lexFinalCodeBlock">;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; }<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; </span><span class="Statement">else<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; {<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">if</span><span class="lexFinalCodeBlock"> (scanstring.len + appendLen &gt;= scanstring.total)<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; {<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">while</span><span class="lexFinalCodeBlock"> (scanstring.len + appendLen &gt;= scanstring.total)<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; scanstring.total *= </span><span class="Constant">2</span><span class="lexFinalCodeBlock">;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; scanstring.val = <a href="../mmgr/mcxt.c.html#L1540" title="utils/mmgr/mcxt.c:1540">repalloc</a>(scanstring.val, scanstring.total);<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; }<br/></li>
<li></span><span class="lexFinalCodeBlock">}<br/></li>
<li></span><br/></li>
<li><span class="Comment">/* Add set of bytes at &quot;s&quot; of length &quot;l&quot; to scanstring */<br/></li>
<li></span><span class="Type">static</span><span class="lexFinalCodeBlock"> </span><span class="Type">void<br/></li>
<li></span><span class="lexFinalCodeBlock">addstring(</span><span class="Type"><a href="../fmgr/dfmgr.c.html#L28" title="utils/fmgr/dfmgr.c:28">bool</a></span><span class="lexFinalCodeBlock"> init, </span><span class="Type">char</span><span class="lexFinalCodeBlock"> *s, </span><span class="Type">int</span><span class="lexFinalCodeBlock"> l)<br/></li>
<li></span><span class="lexFinalCodeBlock">{<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; resizeString(init, l + </span><span class="Constant">1</span><span class="lexFinalCodeBlock">);<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; memcpy(scanstring.val + scanstring.len, s, l);<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; scanstring.len += l;<br/></li>
<li></span><span class="lexFinalCodeBlock">}<br/></li>
<li></span><br/></li>
<li><span class="Comment">/* Add single byte &quot;c&quot; to scanstring */<br/></li>
<li></span><span class="Type">static</span><span class="lexFinalCodeBlock"> </span><span class="Type">void<br/></li>
<li></span><span class="lexFinalCodeBlock">addchar(</span><span class="Type"><a href="../fmgr/dfmgr.c.html#L28" title="utils/fmgr/dfmgr.c:28">bool</a></span><span class="lexFinalCodeBlock"> init, </span><span class="Type">char</span><span class="lexFinalCodeBlock"> c)<br/></li>
<li></span><span class="lexFinalCodeBlock">{<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; resizeString(init, </span><span class="Constant">1</span><span class="lexFinalCodeBlock">);<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; scanstring.val[scanstring.len] = c;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; </span><span class="Statement">if</span><span class="lexFinalCodeBlock"> (c != </span><span class="Special">'\0'</span><span class="lexFinalCodeBlock">)<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; scanstring.len++;<br/></li>
<li></span><span class="lexFinalCodeBlock">}<br/></li>
<li></span><br/></li>
<li><span class="Comment">/* Interface to jsonpath parser */<br/></li>
<li></span><span class="lexFinalCodeBlock">JsonPathParseResult *<br/></li>
<li></span><span class="lexFinalCodeBlock">parsejsonpath(</span><span class="Type">const</span><span class="lexFinalCodeBlock"> </span><span class="Type">char</span><span class="lexFinalCodeBlock"> *str, </span><span class="Type">int</span><span class="lexFinalCodeBlock"> len, </span><span class="Type">struct</span><span class="lexFinalCodeBlock"> Node *escontext)<br/></li>
<li></span><span class="lexFinalCodeBlock">{<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; JsonPathParseResult&nbsp; &nbsp; *parseresult;<br/></li>
<li></span><br/></li>
<li><span class="lexFinalCodeBlock">&nbsp; &nbsp; jsonpath_scanner_init(str, len);<br/></li>
<li></span><br/></li>
<li><span class="lexFinalCodeBlock">&nbsp; &nbsp; </span><span class="Statement">if</span><span class="lexFinalCodeBlock"> (jsonpath_yyparse((</span><span class="Type">void</span><span class="lexFinalCodeBlock"> *) &amp;parseresult, escontext) != </span><span class="Constant">0</span><span class="lexFinalCodeBlock">)<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; jsonpath_yyerror(</span><span class="Constant">NULL</span><span class="lexFinalCodeBlock">, escontext, </span><span class="Constant">&quot;invalid input&quot;</span><span class="lexFinalCodeBlock">); </span><span class="Comment">/* shouldn't happen */<br/></li>
<li></span><br/></li>
<li><span class="lexFinalCodeBlock">&nbsp; &nbsp; jsonpath_scanner_finish();<br/></li>
<li></span><br/></li>
<li><span class="lexFinalCodeBlock">&nbsp; &nbsp; </span><span class="Statement">return</span><span class="lexFinalCodeBlock"> parseresult;<br/></li>
<li></span><span class="lexFinalCodeBlock">}<br/></li>
<li></span><br/></li>
<li><span class="Comment">/* Turn hex character into integer */<br/></li>
<li></span><span class="Type">static</span><span class="lexFinalCodeBlock"> </span><span class="Type"><a href="../fmgr/dfmgr.c.html#L28" title="utils/fmgr/dfmgr.c:28">bool</a><br/></li>
<li></span><span class="lexFinalCodeBlock"><a href="varlena.c.html#L6472" title="utils/adt/varlena.c:6472">hexval</a>(</span><span class="Type">char</span><span class="lexFinalCodeBlock"> c, </span><span class="Type">int</span><span class="lexFinalCodeBlock"> *result, </span><span class="Type">struct</span><span class="lexFinalCodeBlock"> Node *escontext)<br/></li>
<li></span><span class="lexFinalCodeBlock">{<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; </span><span class="Statement">if</span><span class="lexFinalCodeBlock"> (c &gt;= </span><span class="Constant">'0'</span><span class="lexFinalCodeBlock"> &amp;&amp; c &lt;= </span><span class="Constant">'9'</span><span class="lexFinalCodeBlock">)<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; {<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; *result = c - </span><span class="Constant">'0'</span><span class="lexFinalCodeBlock">;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">return</span><span class="lexFinalCodeBlock"> </span><span class="Constant">true</span><span class="lexFinalCodeBlock">;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; }<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; </span><span class="Statement">if</span><span class="lexFinalCodeBlock"> (c &gt;= </span><span class="Constant">'a'</span><span class="lexFinalCodeBlock"> &amp;&amp; c &lt;= </span><span class="Constant">'f'</span><span class="lexFinalCodeBlock">)<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; {<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; *result = c - </span><span class="Constant">'a'</span><span class="lexFinalCodeBlock"> + </span><span class="Constant">0xA</span><span class="lexFinalCodeBlock">;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">return</span><span class="lexFinalCodeBlock"> </span><span class="Constant">true</span><span class="lexFinalCodeBlock">;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; }<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; </span><span class="Statement">if</span><span class="lexFinalCodeBlock"> (c &gt;= </span><span class="Constant">'A'</span><span class="lexFinalCodeBlock"> &amp;&amp; c &lt;= </span><span class="Constant">'F'</span><span class="lexFinalCodeBlock">)<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; {<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; *result = c - </span><span class="Constant">'A'</span><span class="lexFinalCodeBlock"> + </span><span class="Constant">0xA</span><span class="lexFinalCodeBlock">;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">return</span><span class="lexFinalCodeBlock"> </span><span class="Constant">true</span><span class="lexFinalCodeBlock">;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; }<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; jsonpath_yyerror(</span><span class="Constant">NULL</span><span class="lexFinalCodeBlock">, escontext, </span><span class="Constant">&quot;invalid hexadecimal digit&quot;</span><span class="lexFinalCodeBlock">);<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; </span><span class="Statement">return</span><span class="lexFinalCodeBlock"> </span><span class="Constant">false</span><span class="lexFinalCodeBlock">;<br/></li>
<li></span><span class="lexFinalCodeBlock">}<br/></li>
<li></span><br/></li>
<li><span class="Comment">/* Add given unicode character to scanstring */<br/></li>
<li></span><span class="Type">static</span><span class="lexFinalCodeBlock"> </span><span class="Type"><a href="../fmgr/dfmgr.c.html#L28" title="utils/fmgr/dfmgr.c:28">bool</a><br/></li>
<li></span><span class="lexFinalCodeBlock">addUnicodeChar(</span><span class="Type">int</span><span class="lexFinalCodeBlock"> ch, </span><span class="Type">struct</span><span class="lexFinalCodeBlock"> Node *escontext)<br/></li>
<li></span><span class="lexFinalCodeBlock">{<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; </span><span class="Statement">if</span><span class="lexFinalCodeBlock"> (ch == </span><span class="Constant">0</span><span class="lexFinalCodeBlock">)<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; {<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Comment">/* We can't allow this, since our TEXT type doesn't */<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; ereturn(escontext, </span><span class="Constant">false</span><span class="lexFinalCodeBlock">,<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (<a href="../error/elog.c.html#L859" title="utils/error/elog.c:859">errcode</a>(ERRCODE_UNTRANSLATABLE_CHARACTER),<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <a href="../error/elog.c.html#L1072" title="utils/error/elog.c:1072">errmsg</a>(</span><span class="Constant">&quot;unsupported Unicode escape sequence&quot;</span><span class="lexFinalCodeBlock">),<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="../error/elog.c.html#L1205" title="utils/error/elog.c:1205">errdetail</a>(</span><span class="Constant">&quot;</span><span class="Special">\\</span><span class="Constant">u0000 cannot be converted to text.&quot;</span><span class="lexFinalCodeBlock">)));<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; }<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; </span><span class="Statement">else<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; {<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Type">char</span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; cbuf[MAX_UNICODE_EQUIVALENT_STRING + </span><span class="Constant">1</span><span class="lexFinalCodeBlock">];<br/></li>
<li></span><br/></li>
<li><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Comment">/*<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; * If we're trapping the <a href="../../parser/check_keywords.pl.html#L17" title="parser/check_keywords.pl:17">error</a> status, call the noerror form of the<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; * conversion function. Otherwise call the normal form which provides<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; * more detailed errors.<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; */<br/></li>
<li></span><br/></li>
<li><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">if</span><span class="lexFinalCodeBlock"> (! escontext&nbsp; || ! IsA(escontext, ErrorSaveContext))<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="../mb/mbutils.c.html#L864" title="utils/mb/mbutils.c:864">pg_unicode_to_server</a>(ch, (</span><span class="Type">unsigned</span><span class="lexFinalCodeBlock"> </span><span class="Type">char</span><span class="lexFinalCodeBlock"> *) cbuf);<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">else</span><span class="lexFinalCodeBlock"> </span><span class="Statement">if</span><span class="lexFinalCodeBlock"> (!<a href="../mb/mbutils.c.html#L926" title="utils/mb/mbutils.c:926">pg_unicode_to_server_noerror</a>(ch, (</span><span class="Type">unsigned</span><span class="lexFinalCodeBlock"> </span><span class="Type">char</span><span class="lexFinalCodeBlock"> *) cbuf))<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ereturn(escontext, </span><span class="Constant">false</span><span class="lexFinalCodeBlock">,<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (<a href="../error/elog.c.html#L859" title="utils/error/elog.c:859">errcode</a>(ERRCODE_SYNTAX_ERROR),<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <a href="../error/elog.c.html#L1072" title="utils/error/elog.c:1072">errmsg</a>(</span><span class="Constant">&quot;could not convert Unicode to server encoding&quot;</span><span class="lexFinalCodeBlock">)));<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; addstring(</span><span class="Constant">false</span><span class="lexFinalCodeBlock">, cbuf, strlen(cbuf));<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; }<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; </span><span class="Statement">return</span><span class="lexFinalCodeBlock"> </span><span class="Constant">true</span><span class="lexFinalCodeBlock">;<br/></li>
<li></span><span class="lexFinalCodeBlock">}<br/></li>
<li></span><br/></li>
<li><span class="Comment">/* Add unicode character, processing <a href="pseudotypes.c.html#L365" title="utils/adt/pseudotypes.c:365">any</a> surrogate pairs */<br/></li>
<li></span><span class="Type">static</span><span class="lexFinalCodeBlock"> </span><span class="Type"><a href="../fmgr/dfmgr.c.html#L28" title="utils/fmgr/dfmgr.c:28">bool</a><br/></li>
<li></span><span class="lexFinalCodeBlock">addUnicode(</span><span class="Type">int</span><span class="lexFinalCodeBlock"> ch, </span><span class="Type">int</span><span class="lexFinalCodeBlock"> *hi_surrogate, </span><span class="Type">struct</span><span class="lexFinalCodeBlock"> Node *escontext)<br/></li>
<li></span><span class="lexFinalCodeBlock">{<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; </span><span class="Statement">if</span><span class="lexFinalCodeBlock"> (is_utf16_surrogate_first(ch))<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; {<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">if</span><span class="lexFinalCodeBlock"> (*hi_surrogate != -</span><span class="Constant">1</span><span class="lexFinalCodeBlock">)<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ereturn(escontext, </span><span class="Constant">false</span><span class="lexFinalCodeBlock">,<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (<a href="../error/elog.c.html#L859" title="utils/error/elog.c:859">errcode</a>(ERRCODE_INVALID_TEXT_REPRESENTATION),<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <a href="../error/elog.c.html#L1072" title="utils/error/elog.c:1072">errmsg</a>(</span><span class="Constant">&quot;invalid input syntax for type </span><span class="Special">%s</span><span class="Constant">&quot;</span><span class="lexFinalCodeBlock">, </span><span class="Constant">&quot;jsonpath&quot;</span><span class="lexFinalCodeBlock">),<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <a href="../error/elog.c.html#L1205" title="utils/error/elog.c:1205">errdetail</a>(</span><span class="Constant">&quot;Unicode high surrogate must not follow &quot;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="Constant">&quot;a high surrogate.&quot;</span><span class="lexFinalCodeBlock">)));<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; *hi_surrogate = ch;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">return</span><span class="lexFinalCodeBlock"> </span><span class="Constant">true</span><span class="lexFinalCodeBlock">;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; }<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; </span><span class="Statement">else</span><span class="lexFinalCodeBlock"> </span><span class="Statement">if</span><span class="lexFinalCodeBlock"> (is_utf16_surrogate_second(ch))<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; {<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">if</span><span class="lexFinalCodeBlock"> (*hi_surrogate == -</span><span class="Constant">1</span><span class="lexFinalCodeBlock">)<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ereturn(escontext, </span><span class="Constant">false</span><span class="lexFinalCodeBlock">,<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (<a href="../error/elog.c.html#L859" title="utils/error/elog.c:859">errcode</a>(ERRCODE_INVALID_TEXT_REPRESENTATION),<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <a href="../error/elog.c.html#L1072" title="utils/error/elog.c:1072">errmsg</a>(</span><span class="Constant">&quot;invalid input syntax for type </span><span class="Special">%s</span><span class="Constant">&quot;</span><span class="lexFinalCodeBlock">, </span><span class="Constant">&quot;jsonpath&quot;</span><span class="lexFinalCodeBlock">),<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <a href="../error/elog.c.html#L1205" title="utils/error/elog.c:1205">errdetail</a>(</span><span class="Constant">&quot;Unicode low surrogate must follow a high &quot;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="Constant">&quot;surrogate.&quot;</span><span class="lexFinalCodeBlock">)));<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; ch = surrogate_pair_to_codepoint(*hi_surrogate, ch);<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; *hi_surrogate = -</span><span class="Constant">1</span><span class="lexFinalCodeBlock">;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; }<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; </span><span class="Statement">else</span><span class="lexFinalCodeBlock"> </span><span class="Statement">if</span><span class="lexFinalCodeBlock"> (*hi_surrogate != -</span><span class="Constant">1</span><span class="lexFinalCodeBlock">)<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; {<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; ereturn(escontext, </span><span class="Constant">false</span><span class="lexFinalCodeBlock">,<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (<a href="../error/elog.c.html#L859" title="utils/error/elog.c:859">errcode</a>(ERRCODE_INVALID_TEXT_REPRESENTATION),<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <a href="../error/elog.c.html#L1072" title="utils/error/elog.c:1072">errmsg</a>(</span><span class="Constant">&quot;invalid input syntax for type </span><span class="Special">%s</span><span class="Constant">&quot;</span><span class="lexFinalCodeBlock">, </span><span class="Constant">&quot;jsonpath&quot;</span><span class="lexFinalCodeBlock">),<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <a href="../error/elog.c.html#L1205" title="utils/error/elog.c:1205">errdetail</a>(</span><span class="Constant">&quot;Unicode low surrogate must follow a high &quot;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="Constant">&quot;surrogate.&quot;</span><span class="lexFinalCodeBlock">)));<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; }<br/></li>
<li></span><br/></li>
<li><span class="lexFinalCodeBlock">&nbsp; &nbsp; </span><span class="Statement">return</span><span class="lexFinalCodeBlock"> addUnicodeChar(ch, escontext);<br/></li>
<li></span><span class="lexFinalCodeBlock">}<br/></li>
<li></span><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * parseUnicode was adopted from json_lex_string() in<br/></li>
<li></span><span class="Comment"> * src/backend/utils/adt/json.c<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><span class="Type">static</span><span class="lexFinalCodeBlock"> </span><span class="Type"><a href="../fmgr/dfmgr.c.html#L28" title="utils/fmgr/dfmgr.c:28">bool</a><br/></li>
<li></span><span class="lexFinalCodeBlock">parseUnicode(</span><span class="Type">char</span><span class="lexFinalCodeBlock"> *s, </span><span class="Type">int</span><span class="lexFinalCodeBlock"> l, </span><span class="Type">struct</span><span class="lexFinalCodeBlock"> Node *escontext)<br/></li>
<li></span><span class="lexFinalCodeBlock">{<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; </span><span class="Type">int</span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; i = </span><span class="Constant">2</span><span class="lexFinalCodeBlock">;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; </span><span class="Type">int</span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; hi_surrogate = -</span><span class="Constant">1</span><span class="lexFinalCodeBlock">;<br/></li>
<li></span><br/></li>
<li><span class="lexFinalCodeBlock">&nbsp; &nbsp; </span><span class="Statement">for</span><span class="lexFinalCodeBlock"> (i = </span><span class="Constant">2</span><span class="lexFinalCodeBlock">; i &lt; l; i += </span><span class="Constant">2</span><span class="lexFinalCodeBlock">)&nbsp; &nbsp; </span><span class="Comment">/* <a href="../../regex/regc_lex.c.html#L982" title="regex/regc_lex.c:982">skip</a> '\u' */<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; {<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Type">int</span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ch = </span><span class="Constant">0</span><span class="lexFinalCodeBlock">;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Type">int</span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; j, si;<br/></li>
<li></span><br/></li>
<li><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">if</span><span class="lexFinalCodeBlock"> (s[i] == </span><span class="Constant">'{'</span><span class="lexFinalCodeBlock">)&nbsp; &nbsp; </span><span class="Comment">/* <a href="../../regex/regcomp.c.html#L715" title="regex/regcomp.c:715">parse</a> '\u{XX...}' */<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; {<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">while</span><span class="lexFinalCodeBlock"> (s[++i] != </span><span class="Constant">'}'</span><span class="lexFinalCodeBlock"> &amp;&amp; i &lt; l)<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">if</span><span class="lexFinalCodeBlock"> (!<a href="varlena.c.html#L6472" title="utils/adt/varlena.c:6472">hexval</a>(s[i], &amp;si, escontext))<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">return</span><span class="lexFinalCodeBlock"> </span><span class="Constant">false</span><span class="lexFinalCodeBlock">;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ch = (ch &lt;&lt; </span><span class="Constant">4</span><span class="lexFinalCodeBlock">) | si;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; i++;&nbsp; &nbsp; </span><span class="Comment">/* <a href="../../regex/regc_lex.c.html#L982" title="regex/regc_lex.c:982">skip</a> '}' */<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">else</span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Comment">/* <a href="../../regex/regcomp.c.html#L715" title="regex/regcomp.c:715">parse</a> '\uXXXX' */<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; {<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">for</span><span class="lexFinalCodeBlock"> (j = </span><span class="Constant">0</span><span class="lexFinalCodeBlock">; j &lt; </span><span class="Constant">4</span><span class="lexFinalCodeBlock"> &amp;&amp; i &lt; l; j++)<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">if</span><span class="lexFinalCodeBlock"> (!<a href="varlena.c.html#L6472" title="utils/adt/varlena.c:6472">hexval</a>(s[i++], &amp;si, escontext))<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">return</span><span class="lexFinalCodeBlock"> </span><span class="Constant">false</span><span class="lexFinalCodeBlock">;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ch = (ch &lt;&lt; </span><span class="Constant">4</span><span class="lexFinalCodeBlock">) | si;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li></span><br/></li>
<li><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">if</span><span class="lexFinalCodeBlock"> (! addUnicode(ch, &amp;hi_surrogate, escontext))<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">return</span><span class="lexFinalCodeBlock"> </span><span class="Constant">false</span><span class="lexFinalCodeBlock">;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; }<br/></li>
<li></span><br/></li>
<li><span class="lexFinalCodeBlock">&nbsp; &nbsp; </span><span class="Statement">if</span><span class="lexFinalCodeBlock"> (hi_surrogate != -</span><span class="Constant">1</span><span class="lexFinalCodeBlock">)<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; {<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; ereturn(escontext, </span><span class="Constant">false</span><span class="lexFinalCodeBlock">,<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (<a href="../error/elog.c.html#L859" title="utils/error/elog.c:859">errcode</a>(ERRCODE_INVALID_TEXT_REPRESENTATION),<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <a href="../error/elog.c.html#L1072" title="utils/error/elog.c:1072">errmsg</a>(</span><span class="Constant">&quot;invalid input syntax for type </span><span class="Special">%s</span><span class="Constant">&quot;</span><span class="lexFinalCodeBlock">, </span><span class="Constant">&quot;jsonpath&quot;</span><span class="lexFinalCodeBlock">),<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <a href="../error/elog.c.html#L1205" title="utils/error/elog.c:1205">errdetail</a>(</span><span class="Constant">&quot;Unicode low surrogate must follow a high &quot;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="Constant">&quot;surrogate.&quot;</span><span class="lexFinalCodeBlock">)));<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; }<br/></li>
<li></span><br/></li>
<li><span class="lexFinalCodeBlock">&nbsp; &nbsp; </span><span class="Statement">return</span><span class="lexFinalCodeBlock"> </span><span class="Constant">true</span><span class="lexFinalCodeBlock">;<br/></li>
<li></span><span class="lexFinalCodeBlock">}<br/></li>
<li></span><br/></li>
<li><span class="Comment">/* Parse sequence of hex-encoded characters */<br/></li>
<li></span><span class="Type">static</span><span class="lexFinalCodeBlock"> </span><span class="Type"><a href="../fmgr/dfmgr.c.html#L28" title="utils/fmgr/dfmgr.c:28">bool</a><br/></li>
<li></span><span class="lexFinalCodeBlock">parseHexChar(</span><span class="Type">char</span><span class="lexFinalCodeBlock"> *s, </span><span class="Type">struct</span><span class="lexFinalCodeBlock"> Node *escontext)<br/></li>
<li></span><span class="lexFinalCodeBlock">{<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; </span><span class="Type">int</span><span class="lexFinalCodeBlock"> s2, s3, ch;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; </span><span class="Statement">if</span><span class="lexFinalCodeBlock"> (!<a href="varlena.c.html#L6472" title="utils/adt/varlena.c:6472">hexval</a>(s[</span><span class="Constant">2</span><span class="lexFinalCodeBlock">], &amp;s2, escontext))<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">return</span><span class="lexFinalCodeBlock"> </span><span class="Constant">false</span><span class="lexFinalCodeBlock">;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; </span><span class="Statement">if</span><span class="lexFinalCodeBlock"> (!<a href="varlena.c.html#L6472" title="utils/adt/varlena.c:6472">hexval</a>(s[</span><span class="Constant">3</span><span class="lexFinalCodeBlock">], &amp;s3, escontext))<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">return</span><span class="lexFinalCodeBlock"> </span><span class="Constant">false</span><span class="lexFinalCodeBlock">;<br/></li>
<li></span><br/></li>
<li><span class="lexFinalCodeBlock">&nbsp; &nbsp; ch = (s2 &lt;&lt; </span><span class="Constant">4</span><span class="lexFinalCodeBlock">) | s3;<br/></li>
<li></span><br/></li>
<li><span class="lexFinalCodeBlock">&nbsp; &nbsp; </span><span class="Statement">return</span><span class="lexFinalCodeBlock"> addUnicodeChar(ch, escontext);<br/></li>
<li></span><span class="lexFinalCodeBlock">}<br/></li>
<li></span><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * Interface <a href="../../regex/regcomp.c.html#L356" title="regex/regcomp.c:356">functions</a> to make flex use <a href="../mmgr/mcxt.c.html#L1316" title="utils/mmgr/mcxt.c:1316">palloc</a>() instead of malloc().<br/></li>
<li></span><span class="Comment"> * It'd be better to make these static, but flex insists otherwise.<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><br/></li>
<li><span class="Type">void</span><span class="lexFinalCodeBlock"> *<br/></li>
<li></span><span class="lexFinalCodeBlock">jsonpath_yyalloc(yy_size_t bytes)<br/></li>
<li></span><span class="lexFinalCodeBlock">{<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; </span><span class="Statement">return</span><span class="lexFinalCodeBlock"> <a href="../mmgr/mcxt.c.html#L1316" title="utils/mmgr/mcxt.c:1316">palloc</a>(bytes);<br/></li>
<li></span><span class="lexFinalCodeBlock">}<br/></li>
<li></span><br/></li>
<li><span class="Type">void</span><span class="lexFinalCodeBlock"> *<br/></li>
<li></span><span class="lexFinalCodeBlock">jsonpath_yyrealloc(</span><span class="Type">void</span><span class="lexFinalCodeBlock"> *ptr, yy_size_t bytes)<br/></li>
<li></span><span class="lexFinalCodeBlock">{<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; </span><span class="Statement">if</span><span class="lexFinalCodeBlock"> (ptr)<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">return</span><span class="lexFinalCodeBlock"> <a href="../mmgr/mcxt.c.html#L1540" title="utils/mmgr/mcxt.c:1540">repalloc</a>(ptr, bytes);<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; </span><span class="Statement">else<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">return</span><span class="lexFinalCodeBlock"> <a href="../mmgr/mcxt.c.html#L1316" title="utils/mmgr/mcxt.c:1316">palloc</a>(bytes);<br/></li>
<li></span><span class="lexFinalCodeBlock">}<br/></li>
<li></span><br/></li>
<li><span class="Type">void<br/></li>
<li></span><span class="lexFinalCodeBlock">jsonpath_yyfree(</span><span class="Type">void</span><span class="lexFinalCodeBlock"> *ptr)<br/></li>
<li></span><span class="lexFinalCodeBlock">{<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; </span><span class="Statement">if</span><span class="lexFinalCodeBlock"> (ptr)<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; <a href="../mmgr/mcxt.c.html#L1520" title="utils/mmgr/mcxt.c:1520">pfree</a>(ptr);<br/></li>
<li></span><span class="lexFinalCodeBlock">}<br/></li>
</ol></span></code>
 <p class="nav-bar">
  <span class="nav-link"><a href="./index.html">One Level Up</a></span>
  <span class="nav-link"><a href="../../index.html">Top Level</a></span>
 </p>

 </body>
</html>
