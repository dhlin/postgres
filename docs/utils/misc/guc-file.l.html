<!-- generated by the src2html.pl tool from code2ebook:
  https://github.com/agentzh/code2ebook
-->

<html>
 <head>
  <title>utils/misc/guc-file.l - pgsql17devel-backend</title>
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
  <style>
body {
    text-align: left;
    text-align-last: left;
}

.nav-bar {
    font-size: 120%;
    margin-top: 5px;
    margin-bottom: 5px;
}

.nav-link {
    padding-left: 5em;
    padding-right: 5em;
}

ul.toc {
    line-height: 200%;
    font-size: 150%;
}

code {
    font-family: consolas, monospace;
    line-height: 130%;
}

span.Constant {
    color: DarkGreen;
}

span.Special {
    color: #c06000;
}

span.Comment {
    color: DarkRed;
    font-style: italic;
}

span.Identifier {
    color: DarkCyan;
}

span.PreProc {
    color: DarkMagenta;
}

span.Statement, span.Type, span.Keyword, span.Repeat, span.Conditional,
    span.Operator, span.Exception
{
    color: DarkBlue;
}

span.Todo {
    color: DarkRed;
    background-color: Gold;
    font-style: italic;
}

span.Underlined {
    text-decoration: underline;
}

span.linkable {
    font-weight: bold;
}

code ol {
    counter-reset: item;
    list-style-type: none;
    margin-left: 0;
    padding-left: 0;
    list-style-position: inside;
}

code li {
    display: block;
}

code li:before {
    content: counter(item) "  ";
    counter-increment: item;
    color: #999;
    padding-right: 0.5em;
    padding-left: 0.4em;
    list-style-position: inside;
    text-align: right
}

  </style>
 </head>
 <body>
 <p class="nav-bar">
  <span class="nav-link"><a href="./index.html">One Level Up</a></span>
  <span class="nav-link"><a href="../../index.html">Top Level</a></span>
 </p>

  <h1>utils/misc/guc-file.l - pgsql17devel-backend</h1>

  <code><ol><li><span class="Special">%top{<br/></li>
<li></span><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * Scanner for the configuration file<br/></li>
<li></span><span class="Comment"> *<br/></li>
<li></span><span class="Comment"> * Copyright (c) 2000-2024, PostgreSQL Global Development Group<br/></li>
<li></span><span class="Comment"> *<br/></li>
<li></span><span class="Comment"> * src/backend/utils/misc/guc-file.l<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><br/></li>
<li><span class="PreProc">#include </span><span class="Constant">&quot;postgres.h&quot;<br/></li>
<li></span><br/></li>
<li><span class="PreProc">#include </span><span class="Constant">&lt;ctype.h&gt;<br/></li>
<li></span><span class="PreProc">#include </span><span class="Constant">&lt;unistd.h&gt;<br/></li>
<li></span><br/></li>
<li><span class="PreProc">#include </span><span class="Constant">&quot;common/file_utils.h&quot;<br/></li>
<li></span><span class="PreProc">#include </span><span class="Constant">&quot;guc_internal.h&quot;<br/></li>
<li></span><span class="PreProc">#include </span><span class="Constant">&quot;mb/pg_wchar.h&quot;<br/></li>
<li></span><span class="PreProc">#include </span><span class="Constant">&quot;miscadmin.h&quot;<br/></li>
<li></span><span class="PreProc">#include </span><span class="Constant">&quot;storage/fd.h&quot;<br/></li>
<li></span><span class="PreProc">#include </span><span class="Constant">&quot;utils/conffiles.h&quot;<br/></li>
<li></span><span class="PreProc">#include </span><span class="Constant">&quot;utils/memutils.h&quot;<br/></li>
<li></span><span class="Special">}<br/></li>
<li></span><br/></li>
<li><br/></li>
<li><span class="Special">%{<br/></li>
<li></span><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * flex emits a yy_fatal_error() function that it calls in response to<br/></li>
<li></span><span class="Comment"> * critical errors like malloc failure, file I/O errors, and detection of<br/></li>
<li></span><span class="Comment"> * <a href="../adt/pseudotypes.c.html#L373" title="utils/adt/pseudotypes.c:373">internal</a> inconsistency.&nbsp; That function prints a message and calls exit().<br/></li>
<li></span><span class="Comment"> * Mutate it to instead call our handler, which jumps out of the parser.<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><span class="PreProc">#undef fprintf<br/></li>
<li></span><span class="PreProc">#define fprintf(file, fmt, msg) GUC_flex_fatal(msg)<br/></li>
<li></span><br/></li>
<li><span class="Type">enum<br/></li>
<li></span><span class="lexInclude">{<br/></li>
<li></span><span class="lexInclude">&nbsp; &nbsp; GUC_ID = </span><span class="Constant">1</span><span class="lexInclude">,<br/></li>
<li></span><span class="lexInclude">&nbsp; &nbsp; GUC_STRING = </span><span class="Constant">2</span><span class="lexInclude">,<br/></li>
<li></span><span class="lexInclude">&nbsp; &nbsp; GUC_INTEGER = </span><span class="Constant">3</span><span class="lexInclude">,<br/></li>
<li></span><span class="lexInclude">&nbsp; &nbsp; GUC_REAL = </span><span class="Constant">4</span><span class="lexInclude">,<br/></li>
<li></span><span class="lexInclude">&nbsp; &nbsp; GUC_EQUALS = </span><span class="Constant">5</span><span class="lexInclude">,<br/></li>
<li></span><span class="lexInclude">&nbsp; &nbsp; GUC_UNQUOTED_STRING = </span><span class="Constant">6</span><span class="lexInclude">,<br/></li>
<li></span><span class="lexInclude">&nbsp; &nbsp; GUC_QUALIFIED_ID = </span><span class="Constant">7</span><span class="lexInclude">,<br/></li>
<li></span><span class="lexInclude">&nbsp; &nbsp; GUC_EOL = </span><span class="Constant">99</span><span class="lexInclude">,<br/></li>
<li></span><span class="lexInclude">&nbsp; &nbsp; GUC_ERROR = </span><span class="Constant">100<br/></li>
<li></span><span class="lexInclude">};<br/></li>
<li></span><br/></li>
<li><span class="Type">static</span><span class="lexInclude"> </span><span class="Type">unsigned</span><span class="lexInclude"> </span><span class="Type">int</span><span class="lexInclude"> ConfigFileLineno;<br/></li>
<li></span><span class="Type">static</span><span class="lexInclude"> </span><span class="Type">const</span><span class="lexInclude"> </span><span class="Type">char</span><span class="lexInclude"> *GUC_flex_fatal_errmsg;<br/></li>
<li></span><span class="Type">static</span><span class="lexInclude"> sigjmp_buf *GUC_flex_fatal_jmp;<br/></li>
<li></span><br/></li>
<li><span class="Type">static</span><span class="lexInclude"> </span><span class="Type">void</span><span class="lexInclude"> FreeConfigVariable(ConfigVariable *item);<br/></li>
<li></span><br/></li>
<li><span class="Type">static</span><span class="lexInclude"> </span><span class="Type">int</span><span class="lexInclude">&nbsp; &nbsp; GUC_flex_fatal(</span><span class="Type">const</span><span class="lexInclude"> </span><span class="Type">char</span><span class="lexInclude"> *msg);<br/></li>
<li></span><br/></li>
<li><span class="Comment">/* LCOV_EXCL_START */<br/></li>
<li></span><br/></li>
<li><span class="Special">%}<br/></li>
<li></span><br/></li>
<li><span class="PreProc">%option 8bit<br/></li>
<li></span><span class="PreProc">%option never-interactive<br/></li>
<li></span><span class="PreProc">%option nodefault<br/></li>
<li></span><span class="PreProc">%option noinput<br/></li>
<li></span><span class="PreProc">%option nounput<br/></li>
<li></span><span class="PreProc">%option noyywrap<br/></li>
<li></span><span class="PreProc">%option warn<br/></li>
<li></span><span class="PreProc">%option prefix</span><span class="Statement">=</span><span class="Constant">&quot;</span><span class="Identifier">GUC_yy</span><span class="Constant">&quot;<br/></li>
<li></span><br/></li>
<li><br/></li>
<li><span class="Special">SIGN</span><span class="lexAbbrvBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Identifier">(</span><span class="Constant">&quot;</span><span class="Identifier">-</span><span class="Constant">&quot;</span><span class="Identifier">|</span><span class="Constant">&quot;</span><span class="Identifier">+</span><span class="Constant">&quot;</span><span class="Identifier">)<br/></li>
<li></span><span class="Special"><a href="../../regex/regcomp.c.html#L331" title="regex/regcomp.c:331">DIGIT</a></span><span class="lexAbbrvBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Constant">[</span><span class="Identifier">0-9</span><span class="Constant">]<br/></li>
<li></span><span class="Special">HEXDIGIT</span><span class="lexAbbrvBlock">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Constant">[</span><span class="Identifier">0-9a-fA-F</span><span class="Constant">]<br/></li>
<li></span><br/></li>
<li><span class="Special">UNIT_LETTER</span><span class="lexAbbrvBlock">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Constant">[</span><span class="Identifier">a-zA-Z</span><span class="Constant">]<br/></li>
<li></span><br/></li>
<li><span class="Special">INTEGER</span><span class="lexAbbrvBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Identifier">{</span><span class="Special">SIGN</span><span class="Identifier">}?({</span><span class="Special"><a href="../../regex/regcomp.c.html#L331" title="regex/regcomp.c:331">DIGIT</a></span><span class="Identifier">}+|0x{</span><span class="Special">HEXDIGIT</span><span class="Identifier">}+){</span><span class="Special">UNIT_LETTER</span><span class="Identifier">}*<br/></li>
<li></span><br/></li>
<li><span class="Special">EXPONENT</span><span class="lexAbbrvBlock">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Constant">[</span><span class="Identifier">Ee</span><span class="Constant">]</span><span class="Identifier">{</span><span class="Special">SIGN</span><span class="Identifier">}?{</span><span class="Special"><a href="../../regex/regcomp.c.html#L331" title="regex/regcomp.c:331">DIGIT</a></span><span class="Identifier">}+<br/></li>
<li></span><span class="Special">REAL</span><span class="lexAbbrvBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Identifier">{</span><span class="Special">SIGN</span><span class="Identifier">}?{</span><span class="Special"><a href="../../regex/regcomp.c.html#L331" title="regex/regcomp.c:331">DIGIT</a></span><span class="Identifier">}*</span><span class="Constant">&quot;</span><span class="Identifier">.</span><span class="Constant">&quot;</span><span class="Identifier">{</span><span class="Special"><a href="../../regex/regcomp.c.html#L331" title="regex/regcomp.c:331">DIGIT</a></span><span class="Identifier">}*{</span><span class="Special">EXPONENT</span><span class="Identifier">}?<br/></li>
<li></span><br/></li>
<li><span class="Special">LETTER</span><span class="lexAbbrvBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Constant">[</span><span class="Identifier">A-Za-z_\200-\377</span><span class="Constant">]<br/></li>
<li></span><span class="Special">LETTER_OR_DIGIT</span><span class="lexAbbrvBlock"> </span><span class="Constant">[</span><span class="Identifier">A-Za-z_0-9\200-\377</span><span class="Constant">]<br/></li>
<li></span><br/></li>
<li><span class="Special">ID</span><span class="lexAbbrvBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Identifier">{</span><span class="Special">LETTER</span><span class="Identifier">}{</span><span class="Special">LETTER_OR_DIGIT</span><span class="Identifier">}*<br/></li>
<li></span><span class="Special">QUALIFIED_ID</span><span class="lexAbbrvBlock">&nbsp; &nbsp; </span><span class="Identifier">{</span><span class="Special">ID</span><span class="Identifier">}</span><span class="Constant">&quot;</span><span class="Identifier">.</span><span class="Constant">&quot;</span><span class="Identifier">{</span><span class="Special">ID</span><span class="Identifier">}<br/></li>
<li></span><br/></li>
<li><span class="Special">UNQUOTED_STRING</span><span class="lexAbbrvBlock"> </span><span class="Identifier">{</span><span class="Special">LETTER</span><span class="Identifier">}({</span><span class="Special">LETTER_OR_DIGIT</span><span class="Identifier">}|</span><span class="Constant">[</span><span class="Identifier">-.<a href="../error/elog.c.html#L89" title="utils/error/elog.c:89">_</a>:/</span><span class="Constant">]</span><span class="Identifier">)*<br/></li>
<li></span><span class="Special">STRING</span><span class="lexAbbrvBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Identifier">\'(</span><span class="Constant">[</span><span class="Identifier">^'\\\n</span><span class="Constant">]</span><span class="Identifier">|\\.|\'\')*\'<br/></li>
<li></span><br/></li>
<li><span class="Todo">%%<br/></li>
<li></span><br/></li>
<li><span class="Identifier">\n</span><span class="lexPatSep">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="lexPatCodeLine">ConfigFileLineno++; </span><span class="Statement">return</span><span class="lexPatCodeLine"> GUC_EOL;<br/></li>
<li></span><span class="Constant">[</span><span class="Identifier"> \t\r</span><span class="Constant">]</span><span class="Identifier">+</span><span class="lexPatSep">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Comment">/* eat whitespace */<br/></li>
<li></span><span class="Identifier">#.*</span><span class="lexPatSep">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Comment">/* eat comment (.* matches anything until <a href="../../regex/regc_lex.c.html#L1010" title="regex/regc_lex.c:1010">newline</a>) */<br/></li>
<li></span><br/></li>
<li><span class="Identifier">{</span><span class="Special">ID</span><span class="Identifier">}</span><span class="lexPatSep">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">return</span><span class="lexPatCodeLine"> GUC_ID;<br/></li>
<li></span><span class="Identifier">{</span><span class="Special">QUALIFIED_ID</span><span class="Identifier">}</span><span class="lexPatSep">&nbsp; &nbsp; </span><span class="Statement">return</span><span class="lexPatCodeLine"> GUC_QUALIFIED_ID;<br/></li>
<li></span><span class="Identifier">{</span><span class="Special">STRING</span><span class="Identifier">}</span><span class="lexPatSep">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">return</span><span class="lexPatCodeLine"> GUC_STRING;<br/></li>
<li></span><span class="Identifier">{</span><span class="Special">UNQUOTED_STRING</span><span class="Identifier">}</span><span class="lexPatSep"> </span><span class="Statement">return</span><span class="lexPatCodeLine"> GUC_UNQUOTED_STRING;<br/></li>
<li></span><span class="Identifier">{</span><span class="Special">INTEGER</span><span class="Identifier">}</span><span class="lexPatSep">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">return</span><span class="lexPatCodeLine"> GUC_INTEGER;<br/></li>
<li></span><span class="Identifier">{</span><span class="Special">REAL</span><span class="Identifier">}</span><span class="lexPatSep">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">return</span><span class="lexPatCodeLine"> GUC_REAL;<br/></li>
<li></span><span class="Identifier">=</span><span class="lexPatSep">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">return</span><span class="lexPatCodeLine"> GUC_EQUALS;<br/></li>
<li></span><br/></li>
<li><span class="Identifier">.</span><span class="lexPatSep">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">return</span><span class="lexPatCodeLine"> GUC_ERROR;<br/></li>
<li></span><br/></li>
<li><span class="Todo">%%<br/></li>
<li></span><br/></li>
<li><span class="Comment">/* LCOV_EXCL_STOP */<br/></li>
<li></span><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * Exported function to read and process the configuration file. The<br/></li>
<li></span><span class="Comment"> * parameter indicates in what context the file is being read --- either<br/></li>
<li></span><span class="Comment"> * postmaster startup (including standalone-backend startup) or SIGHUP.<br/></li>
<li></span><span class="Comment"> * All options mentioned in the configuration file are set to new <a href="../../bootstrap/bootstrap.c.html#L152" title="bootstrap/bootstrap.c:152">values</a>.<br/></li>
<li></span><span class="Comment"> * If a hard <a href="../../parser/check_keywords.pl.html#L17" title="parser/check_keywords.pl:17">error</a> occurs, no <a href="../../bootstrap/bootstrap.c.html#L152" title="bootstrap/bootstrap.c:152">values</a> will be changed.&nbsp; (There can also be<br/></li>
<li></span><span class="Comment"> * errors that prevent just one value from being changed.)<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><span class="Type">void<br/></li>
<li></span><span class="lexFinalCodeBlock">ProcessConfigFile(GucContext context)<br/></li>
<li></span><span class="lexFinalCodeBlock">{<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; </span><span class="Type">int</span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; elevel;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; MemoryContext config_cxt;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; MemoryContext caller_cxt;<br/></li>
<li></span><br/></li>
<li><span class="lexFinalCodeBlock">&nbsp; &nbsp; </span><span class="Comment">/*<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp;&nbsp; * Config files are processed on startup (by the postmaster only) and on<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp;&nbsp; * SIGHUP (by the postmaster and its children)<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp;&nbsp; */<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; Assert((context == PGC_POSTMASTER &amp;&amp; !<a href="../init/globals.c.html#L117" title="utils/init/globals.c:117">IsUnderPostmaster</a>) ||<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; context == PGC_SIGHUP);<br/></li>
<li></span><br/></li>
<li><span class="lexFinalCodeBlock">&nbsp; &nbsp; </span><span class="Comment">/*<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp;&nbsp; * To avoid cluttering the log, only the postmaster bleats loudly about<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp;&nbsp; * problems with the config file.<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp;&nbsp; */<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; elevel = <a href="../init/globals.c.html#L117" title="utils/init/globals.c:117">IsUnderPostmaster</a> ? DEBUG2 : LOG;<br/></li>
<li></span><br/></li>
<li><span class="lexFinalCodeBlock">&nbsp; &nbsp; </span><span class="Comment">/*<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp;&nbsp; * This function is usually called within a process-lifespan memory<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp;&nbsp; * context.&nbsp; To ensure that <a href="../adt/pseudotypes.c.html#L365" title="utils/adt/pseudotypes.c:365">any</a> memory leaked during GUC processing does<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp;&nbsp; * not accumulate across repeated SIGHUP cycles, do the work in a private<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp;&nbsp; * context that we can free at exit.<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp;&nbsp; */<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; config_cxt = AllocSetContextCreate(<a href="../mmgr/mcxt.c.html#L143" title="utils/mmgr/mcxt.c:143">CurrentMemoryContext</a>,<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="Constant">&quot;config file processing&quot;</span><span class="lexFinalCodeBlock">,<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ALLOCSET_DEFAULT_SIZES);<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; caller_cxt = MemoryContextSwitchTo(config_cxt);<br/></li>
<li></span><br/></li>
<li><span class="lexFinalCodeBlock">&nbsp; &nbsp; </span><span class="Comment">/*<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp;&nbsp; * Read and apply the config file.&nbsp; We don't need to examine the result.<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp;&nbsp; */<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; (</span><span class="Type">void</span><span class="lexFinalCodeBlock">) <a href="guc.c.html#L284" title="utils/misc/guc.c:284">ProcessConfigFileInternal</a>(context, </span><span class="Constant">true</span><span class="lexFinalCodeBlock">, elevel);<br/></li>
<li></span><br/></li>
<li><span class="lexFinalCodeBlock">&nbsp; &nbsp; </span><span class="Comment">/* Clean up */<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; MemoryContextSwitchTo(caller_cxt);<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; <a href="../mmgr/mcxt.c.html#L454" title="utils/mmgr/mcxt.c:454">MemoryContextDelete</a>(config_cxt);<br/></li>
<li></span><span class="lexFinalCodeBlock">}<br/></li>
<li></span><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * Read and <a href="../../regex/regcomp.c.html#L715" title="regex/regcomp.c:715">parse</a> a single configuration file.&nbsp; This function recurses<br/></li>
<li></span><span class="Comment"> * to handle &quot;include&quot; directives.<br/></li>
<li></span><span class="Comment"> *<br/></li>
<li></span><span class="Comment"> * If &quot;strict&quot; is true, treat failure to open the config file as an <a href="../../parser/check_keywords.pl.html#L17" title="parser/check_keywords.pl:17">error</a>,<br/></li>
<li></span><span class="Comment"> * otherwise just <a href="../../regex/regc_lex.c.html#L982" title="regex/regc_lex.c:982">skip</a> the file.<br/></li>
<li></span><span class="Comment"> *<br/></li>
<li></span><span class="Comment"> * calling_file/calling_lineno identify the source of the request.<br/></li>
<li></span><span class="Comment"> * Pass NULL/0 if not recursing from an inclusion request.<br/></li>
<li></span><span class="Comment"> *<br/></li>
<li></span><span class="Comment"> * See ParseConfigFp for further details.&nbsp; This one merely adds opening the<br/></li>
<li></span><span class="Comment"> * config file rather than working from a caller-supplied file descriptor,<br/></li>
<li></span><span class="Comment"> * and absolute-ifying the path name if necessary.<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><span class="Type"><a href="../fmgr/dfmgr.c.html#L28" title="utils/fmgr/dfmgr.c:28">bool</a><br/></li>
<li></span><span class="lexFinalCodeBlock">ParseConfigFile(</span><span class="Type">const</span><span class="lexFinalCodeBlock"> </span><span class="Type">char</span><span class="lexFinalCodeBlock"> *config_file, </span><span class="Type"><a href="../fmgr/dfmgr.c.html#L28" title="utils/fmgr/dfmgr.c:28">bool</a></span><span class="lexFinalCodeBlock"> strict,<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Type">const</span><span class="lexFinalCodeBlock"> </span><span class="Type">char</span><span class="lexFinalCodeBlock"> *calling_file, </span><span class="Type">int</span><span class="lexFinalCodeBlock"> calling_lineno,<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Type">int</span><span class="lexFinalCodeBlock"> depth, </span><span class="Type">int</span><span class="lexFinalCodeBlock"> elevel,<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ConfigVariable **head_p,<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ConfigVariable **tail_p)<br/></li>
<li></span><span class="lexFinalCodeBlock">{<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; </span><span class="Type">char</span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp;&nbsp; *abs_path;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; </span><span class="Type"><a href="../fmgr/dfmgr.c.html#L28" title="utils/fmgr/dfmgr.c:28">bool</a></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; OK = </span><span class="Constant">true</span><span class="lexFinalCodeBlock">;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; </span><span class="Type">FILE</span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp;&nbsp; *fp;<br/></li>
<li></span><br/></li>
<li><span class="lexFinalCodeBlock">&nbsp; &nbsp; </span><span class="Comment">/*<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp;&nbsp; * Reject file name that is all-blank (including empty), as that leads to<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp;&nbsp; * confusion --- we'd try to read the containing directory as a file.<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp;&nbsp; */<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; </span><span class="Statement">if</span><span class="lexFinalCodeBlock"> (strspn(config_file, </span><span class="Constant">&quot; </span><span class="Special">\t\r\n</span><span class="Constant">&quot;</span><span class="lexFinalCodeBlock">) == strlen(config_file))<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; {<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; ereport(elevel,<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (<a href="../error/elog.c.html#L859" title="utils/error/elog.c:859">errcode</a>(ERRCODE_INVALID_PARAMETER_VALUE),<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <a href="../error/elog.c.html#L1072" title="utils/error/elog.c:1072">errmsg</a>(</span><span class="Constant">&quot;empty configuration file name: </span><span class="Special">\&quot;%s\&quot;</span><span class="Constant">&quot;</span><span class="lexFinalCodeBlock">,<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; config_file)));<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; record_config_file_error(</span><span class="Constant">&quot;empty configuration file name&quot;</span><span class="lexFinalCodeBlock">,<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; calling_file, calling_lineno,<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; head_p, tail_p);<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">return</span><span class="lexFinalCodeBlock"> </span><span class="Constant">false</span><span class="lexFinalCodeBlock">;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; }<br/></li>
<li></span><br/></li>
<li><span class="lexFinalCodeBlock">&nbsp; &nbsp; </span><span class="Comment">/*<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp;&nbsp; * Reject too-deep include nesting depth.&nbsp; This is just a safety check to<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp;&nbsp; * avoid dumping core due to stack overflow if an include file loops back<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp;&nbsp; * to itself.&nbsp; The maximum nesting depth is pretty arbitrary.<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp;&nbsp; */<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; </span><span class="Statement">if</span><span class="lexFinalCodeBlock"> (depth &gt; CONF_FILE_MAX_DEPTH)<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; {<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; ereport(elevel,<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (<a href="../error/elog.c.html#L859" title="utils/error/elog.c:859">errcode</a>(ERRCODE_PROGRAM_LIMIT_EXCEEDED),<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <a href="../error/elog.c.html#L1072" title="utils/error/elog.c:1072">errmsg</a>(</span><span class="Constant">&quot;could not open configuration file </span><span class="Special">\&quot;%s\&quot;</span><span class="Constant">: maximum nesting depth exceeded&quot;</span><span class="lexFinalCodeBlock">,<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; config_file)));<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; record_config_file_error(</span><span class="Constant">&quot;nesting depth exceeded&quot;</span><span class="lexFinalCodeBlock">,<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; calling_file, calling_lineno,<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; head_p, tail_p);<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">return</span><span class="lexFinalCodeBlock"> </span><span class="Constant">false</span><span class="lexFinalCodeBlock">;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; }<br/></li>
<li></span><br/></li>
<li><span class="lexFinalCodeBlock">&nbsp; &nbsp; abs_path = <a href="conffiles.c.html#L36" title="utils/misc/conffiles.c:36">AbsoluteConfigLocation</a>(config_file, calling_file);<br/></li>
<li></span><br/></li>
<li><span class="lexFinalCodeBlock">&nbsp; &nbsp; </span><span class="Comment">/*<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp;&nbsp; * Reject direct recursion.&nbsp; Indirect recursion is also possible, but it's<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp;&nbsp; * harder to detect and so doesn't seem worth the trouble.&nbsp; (We test at<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp;&nbsp; * this step because the canonicalization done by <a href="conffiles.c.html#L36" title="utils/misc/conffiles.c:36">AbsoluteConfigLocation</a><br/></li>
<li></span><span class="Comment">&nbsp; &nbsp;&nbsp; * makes it more likely that a simple strcmp comparison will match.)<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp;&nbsp; */<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; </span><span class="Statement">if</span><span class="lexFinalCodeBlock"> (calling_file &amp;&amp; strcmp(abs_path, calling_file) == </span><span class="Constant">0</span><span class="lexFinalCodeBlock">)<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; {<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; ereport(elevel,<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (<a href="../error/elog.c.html#L859" title="utils/error/elog.c:859">errcode</a>(ERRCODE_INVALID_PARAMETER_VALUE),<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <a href="../error/elog.c.html#L1072" title="utils/error/elog.c:1072">errmsg</a>(</span><span class="Constant">&quot;configuration file recursion in </span><span class="Special">\&quot;%s\&quot;</span><span class="Constant">&quot;</span><span class="lexFinalCodeBlock">,<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; calling_file)));<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; record_config_file_error(</span><span class="Constant">&quot;configuration file recursion&quot;</span><span class="lexFinalCodeBlock">,<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; calling_file, calling_lineno,<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; head_p, tail_p);<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; <a href="../mmgr/mcxt.c.html#L1520" title="utils/mmgr/mcxt.c:1520">pfree</a>(abs_path);<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">return</span><span class="lexFinalCodeBlock"> </span><span class="Constant">false</span><span class="lexFinalCodeBlock">;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; }<br/></li>
<li></span><br/></li>
<li><span class="lexFinalCodeBlock">&nbsp; &nbsp; fp = <a href="../../storage/file/fd.c.html#L2583" title="storage/file/fd.c:2583">AllocateFile</a>(abs_path, </span><span class="Constant">&quot;r&quot;</span><span class="lexFinalCodeBlock">);<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; </span><span class="Statement">if</span><span class="lexFinalCodeBlock"> (!fp)<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; {<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">if</span><span class="lexFinalCodeBlock"> (strict)<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; {<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ereport(elevel,<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (<a href="../error/elog.c.html#L882" title="utils/error/elog.c:882">errcode_for_file_access</a>(),<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <a href="../error/elog.c.html#L1072" title="utils/error/elog.c:1072">errmsg</a>(</span><span class="Constant">&quot;could not open configuration file </span><span class="Special">\&quot;%s\&quot;</span><span class="Constant">: %m&quot;</span><span class="lexFinalCodeBlock">,<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; abs_path)));<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; record_config_file_error(psprintf(</span><span class="Constant">&quot;could not open file </span><span class="Special">\&quot;%s\&quot;</span><span class="Constant">&quot;</span><span class="lexFinalCodeBlock">,<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; abs_path),<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; calling_file, calling_lineno,<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; head_p, tail_p);<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; OK = </span><span class="Constant">false</span><span class="lexFinalCodeBlock">;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">else<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; {<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ereport(LOG,<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (<a href="../error/elog.c.html#L1072" title="utils/error/elog.c:1072">errmsg</a>(</span><span class="Constant">&quot;skipping missing configuration file </span><span class="Special">\&quot;%s\&quot;</span><span class="Constant">&quot;</span><span class="lexFinalCodeBlock">,<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; abs_path)));<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">goto</span><span class="lexFinalCodeBlock"> <a href="../../regex/regc_nfa.c.html#L2929" title="regex/regc_nfa.c:2929">cleanup</a>;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; }<br/></li>
<li></span><br/></li>
<li><span class="lexFinalCodeBlock">&nbsp; &nbsp; OK = ParseConfigFp(fp, abs_path, depth, elevel, head_p, tail_p);<br/></li>
<li></span><br/></li>
<li><span class="Statement"><a href="../../regex/regc_nfa.c.html#L2929" title="regex/regc_nfa.c:2929">cleanup</a></span><span class="cUserCont">:<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; </span><span class="Statement">if</span><span class="lexFinalCodeBlock"> (fp)<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; <a href="../../storage/file/fd.c.html#L2781" title="storage/file/fd.c:2781">FreeFile</a>(fp);<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; <a href="../mmgr/mcxt.c.html#L1520" title="utils/mmgr/mcxt.c:1520">pfree</a>(abs_path);<br/></li>
<li></span><br/></li>
<li><span class="lexFinalCodeBlock">&nbsp; &nbsp; </span><span class="Statement">return</span><span class="lexFinalCodeBlock"> OK;<br/></li>
<li></span><span class="lexFinalCodeBlock">}<br/></li>
<li></span><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * Capture an <a href="../../parser/check_keywords.pl.html#L17" title="parser/check_keywords.pl:17">error</a> message in the ConfigVariable list returned by<br/></li>
<li></span><span class="Comment"> * config file parsing.<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><span class="Type">void<br/></li>
<li></span><span class="lexFinalCodeBlock">record_config_file_error(</span><span class="Type">const</span><span class="lexFinalCodeBlock"> </span><span class="Type">char</span><span class="lexFinalCodeBlock"> *<a href="../error/elog.c.html#L1072" title="utils/error/elog.c:1072">errmsg</a>,<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="Type">const</span><span class="lexFinalCodeBlock"> </span><span class="Type">char</span><span class="lexFinalCodeBlock"> *config_file,<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="Type">int</span><span class="lexFinalCodeBlock"> lineno,<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ConfigVariable **head_p,<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ConfigVariable **tail_p)<br/></li>
<li></span><span class="lexFinalCodeBlock">{<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; ConfigVariable *item;<br/></li>
<li></span><br/></li>
<li><span class="lexFinalCodeBlock">&nbsp; &nbsp; item = <a href="../mmgr/mcxt.c.html#L1316" title="utils/mmgr/mcxt.c:1316">palloc</a>(</span><span class="Statement"><a href="../../storage/page/itemptr.c.html#L23" title="storage/page/itemptr.c:23">sizeof</a></span><span class="lexFinalCodeBlock"> *item);<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; item-&gt;name = </span><span class="Constant">NULL</span><span class="lexFinalCodeBlock">;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; item-&gt;value = </span><span class="Constant">NULL</span><span class="lexFinalCodeBlock">;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; item-&gt;<a href="../error/elog.c.html#L1072" title="utils/error/elog.c:1072">errmsg</a> = <a href="../mmgr/mcxt.c.html#L1695" title="utils/mmgr/mcxt.c:1695">pstrdup</a>(<a href="../error/elog.c.html#L1072" title="utils/error/elog.c:1072">errmsg</a>);<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; item-&gt;filename = config_file ? <a href="../mmgr/mcxt.c.html#L1695" title="utils/mmgr/mcxt.c:1695">pstrdup</a>(config_file) : </span><span class="Constant">NULL</span><span class="lexFinalCodeBlock">;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; item-&gt;sourceline = lineno;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; item-&gt;ignore = </span><span class="Constant">true</span><span class="lexFinalCodeBlock">;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; item-&gt;applied = </span><span class="Constant">false</span><span class="lexFinalCodeBlock">;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; item-&gt;<a href="../../regex/regc_lex.c.html#L200" title="regex/regc_lex.c:200">next</a> = </span><span class="Constant">NULL</span><span class="lexFinalCodeBlock">;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; </span><span class="Statement">if</span><span class="lexFinalCodeBlock"> (*head_p == </span><span class="Constant">NULL</span><span class="lexFinalCodeBlock">)<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; *head_p = item;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; </span><span class="Statement">else<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; (*tail_p)-&gt;<a href="../../regex/regc_lex.c.html#L200" title="regex/regc_lex.c:200">next</a> = item;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; *tail_p = item;<br/></li>
<li></span><span class="lexFinalCodeBlock">}<br/></li>
<li></span><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * Flex fatal errors bring us here.&nbsp; Stash the <a href="../../parser/check_keywords.pl.html#L17" title="parser/check_keywords.pl:17">error</a> message and jump back to<br/></li>
<li></span><span class="Comment"> * ParseConfigFp().&nbsp; Assume all msg arguments point to string constants; this<br/></li>
<li></span><span class="Comment"> * holds for flex 2.5.35 (earliest we support). Otherwise, we would need to<br/></li>
<li></span><span class="Comment"> * copy the message.<br/></li>
<li></span><span class="Comment"> *<br/></li>
<li></span><span class="Comment"> * We return &quot;int&quot; since this takes the place of calls to fprintf().<br/></li>
<li></span><span class="Comment">*/<br/></li>
<li></span><span class="Type">static</span><span class="lexFinalCodeBlock"> </span><span class="Type">int<br/></li>
<li></span><span class="lexFinalCodeBlock">GUC_flex_fatal(</span><span class="Type">const</span><span class="lexFinalCodeBlock"> </span><span class="Type">char</span><span class="lexFinalCodeBlock"> *msg)<br/></li>
<li></span><span class="lexFinalCodeBlock">{<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; GUC_flex_fatal_errmsg = msg;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; siglongjmp(*GUC_flex_fatal_jmp, </span><span class="Constant">1</span><span class="lexFinalCodeBlock">);<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; </span><span class="Statement">return</span><span class="lexFinalCodeBlock"> </span><span class="Constant">0</span><span class="lexFinalCodeBlock">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Comment">/* keep compiler quiet */<br/></li>
<li></span><span class="lexFinalCodeBlock">}<br/></li>
<li></span><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * Read and <a href="../../regex/regcomp.c.html#L715" title="regex/regcomp.c:715">parse</a> a single configuration file.&nbsp; This function recurses<br/></li>
<li></span><span class="Comment"> * to handle &quot;include&quot; directives.<br/></li>
<li></span><span class="Comment"> *<br/></li>
<li></span><span class="Comment"> * Input parameters:<br/></li>
<li></span><span class="Comment"> *&nbsp; &nbsp; fp: file pointer from <a href="../../storage/file/fd.c.html#L2583" title="storage/file/fd.c:2583">AllocateFile</a> for the configuration file to <a href="../../regex/regcomp.c.html#L715" title="regex/regcomp.c:715">parse</a><br/></li>
<li></span><span class="Comment"> *&nbsp; &nbsp; config_file: absolute or relative path name of the configuration file<br/></li>
<li></span><span class="Comment"> *&nbsp; &nbsp; depth: recursion depth (should be CONF_FILE_START_DEPTH in the outermost<br/></li>
<li></span><span class="Comment"> *&nbsp; &nbsp; call)<br/></li>
<li></span><span class="Comment"> *&nbsp; &nbsp; elevel: <a href="../../parser/check_keywords.pl.html#L17" title="parser/check_keywords.pl:17">error</a> logging level to use<br/></li>
<li></span><span class="Comment"> * Input/Output parameters:<br/></li>
<li></span><span class="Comment"> *&nbsp; &nbsp; head_p, tail_p: head and tail of linked list of name/value pairs<br/></li>
<li></span><span class="Comment"> *<br/></li>
<li></span><span class="Comment"> * *head_p and *tail_p must be initialized, either to NULL or valid pointers<br/></li>
<li></span><span class="Comment"> * to a ConfigVariable list, <a href="../../regex/regc_locale.c.html#L488" title="regex/regc_locale.c:488">before</a> calling the outer recursion level.&nbsp; Any<br/></li>
<li></span><span class="Comment"> * name-value pairs read from the input file(s) will be appended to the list.<br/></li>
<li></span><span class="Comment"> * Error reports will also be appended to the list, if elevel &lt; ERROR.<br/></li>
<li></span><span class="Comment"> *<br/></li>
<li></span><span class="Comment"> * Returns TRUE if successful, FALSE if an <a href="../../parser/check_keywords.pl.html#L17" title="parser/check_keywords.pl:17">error</a> occurred.&nbsp; The <a href="../../parser/check_keywords.pl.html#L17" title="parser/check_keywords.pl:17">error</a> has<br/></li>
<li></span><span class="Comment"> * already been ereport'd, it is only necessary for the caller to clean up<br/></li>
<li></span><span class="Comment"> * its own state and release the ConfigVariable list.<br/></li>
<li></span><span class="Comment"> *<br/></li>
<li></span><span class="Comment"> * Note: if elevel &gt;= ERROR then an <a href="../../parser/check_keywords.pl.html#L17" title="parser/check_keywords.pl:17">error</a> will not return control to the<br/></li>
<li></span><span class="Comment"> * caller, so there is no need to check the return value in that case.<br/></li>
<li></span><span class="Comment"> *<br/></li>
<li></span><span class="Comment"> * Note: this function is used to <a href="../../regex/regcomp.c.html#L715" title="regex/regcomp.c:715">parse</a> not only postgresql.conf, but<br/></li>
<li></span><span class="Comment"> * various other configuration files that use the same &quot;name = value&quot;<br/></li>
<li></span><span class="Comment"> * syntax.&nbsp; Hence, do not do anything here or in the subsidiary routines<br/></li>
<li></span><span class="Comment"> * ParseConfigFile/ParseConfigDirectory that assumes we are processing<br/></li>
<li></span><span class="Comment"> * GUCs specifically.<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><span class="Type"><a href="../fmgr/dfmgr.c.html#L28" title="utils/fmgr/dfmgr.c:28">bool</a><br/></li>
<li></span><span class="lexFinalCodeBlock">ParseConfigFp(</span><span class="Type">FILE</span><span class="lexFinalCodeBlock"> *fp, </span><span class="Type">const</span><span class="lexFinalCodeBlock"> </span><span class="Type">char</span><span class="lexFinalCodeBlock"> *config_file, </span><span class="Type">int</span><span class="lexFinalCodeBlock"> depth, </span><span class="Type">int</span><span class="lexFinalCodeBlock"> elevel,<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ConfigVariable **head_p, ConfigVariable **tail_p)<br/></li>
<li></span><span class="lexFinalCodeBlock">{<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; </span><span class="Type">volatile</span><span class="lexFinalCodeBlock"> </span><span class="Type"><a href="../fmgr/dfmgr.c.html#L28" title="utils/fmgr/dfmgr.c:28">bool</a></span><span class="lexFinalCodeBlock"> OK = </span><span class="Constant">true</span><span class="lexFinalCodeBlock">;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; </span><span class="Type">unsigned</span><span class="lexFinalCodeBlock"> </span><span class="Type">int</span><span class="lexFinalCodeBlock"> save_ConfigFileLineno = ConfigFileLineno;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; sigjmp_buf *save_GUC_flex_fatal_jmp = GUC_flex_fatal_jmp;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; sigjmp_buf&nbsp; &nbsp; flex_fatal_jmp;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; </span><span class="Type">volatile</span><span class="lexFinalCodeBlock"> YY_BUFFER_STATE lex_buffer = </span><span class="Constant">NULL</span><span class="lexFinalCodeBlock">;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; </span><span class="Type">int</span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; errorcount;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; </span><span class="Type">int</span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; token;<br/></li>
<li></span><br/></li>
<li><span class="lexFinalCodeBlock">&nbsp; &nbsp; </span><span class="Statement">if</span><span class="lexFinalCodeBlock"> (sigsetjmp(flex_fatal_jmp, </span><span class="Constant">1</span><span class="lexFinalCodeBlock">) == </span><span class="Constant">0</span><span class="lexFinalCodeBlock">)<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; GUC_flex_fatal_jmp = &amp;flex_fatal_jmp;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; </span><span class="Statement">else<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; {<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Comment">/*<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; * Regain control after a fatal, <a href="../adt/pseudotypes.c.html#L373" title="utils/adt/pseudotypes.c:373">internal</a> flex <a href="../../parser/check_keywords.pl.html#L17" title="parser/check_keywords.pl:17">error</a>.&nbsp; It may have<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; * corrupted parser state.&nbsp; Consequently, abandon the file, but trust<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; * that the state remains sane enough for yy_delete_buffer().<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; */<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; elog(elevel, </span><span class="Constant">&quot;</span><span class="Special">%s</span><span class="Constant"> at file </span><span class="Special">\&quot;%s\&quot;</span><span class="Constant"> line </span><span class="Special">%u</span><span class="Constant">&quot;</span><span class="lexFinalCodeBlock">,<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; GUC_flex_fatal_errmsg, config_file, ConfigFileLineno);<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; record_config_file_error(GUC_flex_fatal_errmsg,<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; config_file, ConfigFileLineno,<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; head_p, tail_p);<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; OK = </span><span class="Constant">false</span><span class="lexFinalCodeBlock">;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">goto</span><span class="lexFinalCodeBlock"> <a href="../../regex/regc_nfa.c.html#L2929" title="regex/regc_nfa.c:2929">cleanup</a>;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; }<br/></li>
<li></span><br/></li>
<li><span class="lexFinalCodeBlock">&nbsp; &nbsp; </span><span class="Comment">/*<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp;&nbsp; * Parse<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp;&nbsp; */<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; ConfigFileLineno = </span><span class="Constant">1</span><span class="lexFinalCodeBlock">;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; errorcount = </span><span class="Constant">0</span><span class="lexFinalCodeBlock">;<br/></li>
<li></span><br/></li>
<li><span class="lexFinalCodeBlock">&nbsp; &nbsp; lex_buffer = yy_create_buffer(fp, YY_BUF_SIZE);<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; yy_switch_to_buffer(lex_buffer);<br/></li>
<li></span><br/></li>
<li><span class="lexFinalCodeBlock">&nbsp; &nbsp; </span><span class="Comment">/* This loop iterates once per logical line */<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; </span><span class="Statement">while</span><span class="lexFinalCodeBlock"> ((token = yylex()))<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; {<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Type">char</span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp;&nbsp; *opt_name = </span><span class="Constant">NULL</span><span class="lexFinalCodeBlock">;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Type">char</span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp;&nbsp; *opt_value = </span><span class="Constant">NULL</span><span class="lexFinalCodeBlock">;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; ConfigVariable *item;<br/></li>
<li></span><br/></li>
<li><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">if</span><span class="lexFinalCodeBlock"> (token == GUC_EOL)&nbsp; &nbsp; </span><span class="Comment">/* empty or comment line */<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">continue</span><span class="lexFinalCodeBlock">;<br/></li>
<li></span><br/></li>
<li><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Comment">/* first token on line is option name */<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">if</span><span class="lexFinalCodeBlock"> (token != GUC_ID &amp;&amp; token != GUC_QUALIFIED_ID)<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">goto</span><span class="lexFinalCodeBlock"> parse_error;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; opt_name = <a href="../mmgr/mcxt.c.html#L1695" title="utils/mmgr/mcxt.c:1695">pstrdup</a>(yytext);<br/></li>
<li></span><br/></li>
<li><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Comment">/* <a href="../../regex/regc_lex.c.html#L200" title="regex/regc_lex.c:200">next</a> we have an optional <a href="../../nodes/equalfuncs.c.html#L223" title="nodes/equalfuncs.c:223">equal</a> sign; discard if present */<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; token = yylex();<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">if</span><span class="lexFinalCodeBlock"> (token == GUC_EQUALS)<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; token = yylex();<br/></li>
<li></span><br/></li>
<li><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Comment">/* <a href="../adt/timestamp.c.html#L1618" title="utils/adt/timestamp.c:1618">now</a> we must have the option value */<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">if</span><span class="lexFinalCodeBlock"> (token != GUC_ID &amp;&amp;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; token != GUC_STRING &amp;&amp;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; token != GUC_INTEGER &amp;&amp;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; token != GUC_REAL &amp;&amp;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; token != GUC_UNQUOTED_STRING)<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">goto</span><span class="lexFinalCodeBlock"> parse_error;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">if</span><span class="lexFinalCodeBlock"> (token == GUC_STRING)&nbsp; &nbsp; </span><span class="Comment">/* strip quotes and escapes */<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; opt_value = DeescapeQuotedString(yytext);<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">else<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; opt_value = <a href="../mmgr/mcxt.c.html#L1695" title="utils/mmgr/mcxt.c:1695">pstrdup</a>(yytext);<br/></li>
<li></span><br/></li>
<li><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Comment">/* <a href="../adt/timestamp.c.html#L1618" title="utils/adt/timestamp.c:1618">now</a> we'd like an end of line, or possibly EOF */<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; token = yylex();<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">if</span><span class="lexFinalCodeBlock"> (token != GUC_EOL)<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; {<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">if</span><span class="lexFinalCodeBlock"> (token != </span><span class="Constant">0</span><span class="lexFinalCodeBlock">)<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">goto</span><span class="lexFinalCodeBlock"> parse_error;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Comment">/* treat EOF like \n for line numbering purposes, cf bug 4752 */<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ConfigFileLineno++;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li></span><br/></li>
<li><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Comment">/* OK, process the option name and value */<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">if</span><span class="lexFinalCodeBlock"> (<a href="guc.c.html#L1302" title="utils/misc/guc.c:1302">guc_name_compare</a>(opt_name, </span><span class="Constant">&quot;include_dir&quot;</span><span class="lexFinalCodeBlock">) == </span><span class="Constant">0</span><span class="lexFinalCodeBlock">)<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; {<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Comment">/*<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; * An include_dir directive isn't a variable and should be<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; * processed immediately.<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; */<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">if</span><span class="lexFinalCodeBlock"> (!ParseConfigDirectory(opt_value,<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; config_file, ConfigFileLineno - </span><span class="Constant">1</span><span class="lexFinalCodeBlock">,<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; depth + </span><span class="Constant">1</span><span class="lexFinalCodeBlock">, elevel,<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; head_p, tail_p))<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; OK = </span><span class="Constant">false</span><span class="lexFinalCodeBlock">;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; yy_switch_to_buffer(lex_buffer);<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="../mmgr/mcxt.c.html#L1520" title="utils/mmgr/mcxt.c:1520">pfree</a>(opt_name);<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="../mmgr/mcxt.c.html#L1520" title="utils/mmgr/mcxt.c:1520">pfree</a>(opt_value);<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">else</span><span class="lexFinalCodeBlock"> </span><span class="Statement">if</span><span class="lexFinalCodeBlock"> (<a href="guc.c.html#L1302" title="utils/misc/guc.c:1302">guc_name_compare</a>(opt_name, </span><span class="Constant">&quot;include_if_exists&quot;</span><span class="lexFinalCodeBlock">) == </span><span class="Constant">0</span><span class="lexFinalCodeBlock">)<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; {<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Comment">/*<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; * An include_if_exists directive isn't a variable and should be<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; * processed immediately.<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; */<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">if</span><span class="lexFinalCodeBlock"> (!ParseConfigFile(opt_value, </span><span class="Constant">false</span><span class="lexFinalCodeBlock">,<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; config_file, ConfigFileLineno - </span><span class="Constant">1</span><span class="lexFinalCodeBlock">,<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; depth + </span><span class="Constant">1</span><span class="lexFinalCodeBlock">, elevel,<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; head_p, tail_p))<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; OK = </span><span class="Constant">false</span><span class="lexFinalCodeBlock">;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; yy_switch_to_buffer(lex_buffer);<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="../mmgr/mcxt.c.html#L1520" title="utils/mmgr/mcxt.c:1520">pfree</a>(opt_name);<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="../mmgr/mcxt.c.html#L1520" title="utils/mmgr/mcxt.c:1520">pfree</a>(opt_value);<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">else</span><span class="lexFinalCodeBlock"> </span><span class="Statement">if</span><span class="lexFinalCodeBlock"> (<a href="guc.c.html#L1302" title="utils/misc/guc.c:1302">guc_name_compare</a>(opt_name, </span><span class="Constant">&quot;include&quot;</span><span class="lexFinalCodeBlock">) == </span><span class="Constant">0</span><span class="lexFinalCodeBlock">)<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; {<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Comment">/*<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; * An include directive isn't a variable and should be processed<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; * immediately.<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; */<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">if</span><span class="lexFinalCodeBlock"> (!ParseConfigFile(opt_value, </span><span class="Constant">true</span><span class="lexFinalCodeBlock">,<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; config_file, ConfigFileLineno - </span><span class="Constant">1</span><span class="lexFinalCodeBlock">,<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; depth + </span><span class="Constant">1</span><span class="lexFinalCodeBlock">, elevel,<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; head_p, tail_p))<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; OK = </span><span class="Constant">false</span><span class="lexFinalCodeBlock">;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; yy_switch_to_buffer(lex_buffer);<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="../mmgr/mcxt.c.html#L1520" title="utils/mmgr/mcxt.c:1520">pfree</a>(opt_name);<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="../mmgr/mcxt.c.html#L1520" title="utils/mmgr/mcxt.c:1520">pfree</a>(opt_value);<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">else<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; {<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Comment">/* ordinary variable, append to list */<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; item = <a href="../mmgr/mcxt.c.html#L1316" title="utils/mmgr/mcxt.c:1316">palloc</a>(</span><span class="Statement"><a href="../../storage/page/itemptr.c.html#L23" title="storage/page/itemptr.c:23">sizeof</a></span><span class="lexFinalCodeBlock"> *item);<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; item-&gt;name = opt_name;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; item-&gt;value = opt_value;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; item-&gt;<a href="../error/elog.c.html#L1072" title="utils/error/elog.c:1072">errmsg</a> = </span><span class="Constant">NULL</span><span class="lexFinalCodeBlock">;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; item-&gt;filename = <a href="../mmgr/mcxt.c.html#L1695" title="utils/mmgr/mcxt.c:1695">pstrdup</a>(config_file);<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; item-&gt;sourceline = ConfigFileLineno - </span><span class="Constant">1</span><span class="lexFinalCodeBlock">;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; item-&gt;ignore = </span><span class="Constant">false</span><span class="lexFinalCodeBlock">;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; item-&gt;applied = </span><span class="Constant">false</span><span class="lexFinalCodeBlock">;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; item-&gt;<a href="../../regex/regc_lex.c.html#L200" title="regex/regc_lex.c:200">next</a> = </span><span class="Constant">NULL</span><span class="lexFinalCodeBlock">;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">if</span><span class="lexFinalCodeBlock"> (*head_p == </span><span class="Constant">NULL</span><span class="lexFinalCodeBlock">)<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; *head_p = item;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">else<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (*tail_p)-&gt;<a href="../../regex/regc_lex.c.html#L200" title="regex/regc_lex.c:200">next</a> = item;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; *tail_p = item;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li></span><br/></li>
<li><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Comment">/* break out of loop if read EOF, else loop for <a href="../../regex/regc_lex.c.html#L200" title="regex/regc_lex.c:200">next</a> line */<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">if</span><span class="lexFinalCodeBlock"> (token == </span><span class="Constant">0</span><span class="lexFinalCodeBlock">)<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">break</span><span class="lexFinalCodeBlock">;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">continue</span><span class="lexFinalCodeBlock">;<br/></li>
<li></span><br/></li>
<li><span class="Statement">parse_error</span><span class="cUserCont">:<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Comment">/* release storage if we allocated <a href="../adt/pseudotypes.c.html#L365" title="utils/adt/pseudotypes.c:365">any</a> on this line */<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">if</span><span class="lexFinalCodeBlock"> (opt_name)<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="../mmgr/mcxt.c.html#L1520" title="utils/mmgr/mcxt.c:1520">pfree</a>(opt_name);<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">if</span><span class="lexFinalCodeBlock"> (opt_value)<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="../mmgr/mcxt.c.html#L1520" title="utils/mmgr/mcxt.c:1520">pfree</a>(opt_value);<br/></li>
<li></span><br/></li>
<li><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Comment">/* report the <a href="../../parser/check_keywords.pl.html#L17" title="parser/check_keywords.pl:17">error</a> */<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">if</span><span class="lexFinalCodeBlock"> (token == GUC_EOL || token == </span><span class="Constant">0</span><span class="lexFinalCodeBlock">)<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; {<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ereport(elevel,<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (<a href="../error/elog.c.html#L859" title="utils/error/elog.c:859">errcode</a>(ERRCODE_SYNTAX_ERROR),<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="../error/elog.c.html#L1072" title="utils/error/elog.c:1072">errmsg</a>(</span><span class="Constant">&quot;syntax <a href="../../parser/check_keywords.pl.html#L17" title="parser/check_keywords.pl:17">error</a> in file </span><span class="Special">\&quot;%s\&quot;</span><span class="Constant"> line </span><span class="Special">%u</span><span class="Constant">, near end of line&quot;</span><span class="lexFinalCodeBlock">,<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; config_file, ConfigFileLineno - </span><span class="Constant">1</span><span class="lexFinalCodeBlock">)));<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; record_config_file_error(</span><span class="Constant">&quot;syntax <a href="../../parser/check_keywords.pl.html#L17" title="parser/check_keywords.pl:17">error</a>&quot;</span><span class="lexFinalCodeBlock">,<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; config_file, ConfigFileLineno - </span><span class="Constant">1</span><span class="lexFinalCodeBlock">,<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; head_p, tail_p);<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">else<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; {<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ereport(elevel,<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (<a href="../error/elog.c.html#L859" title="utils/error/elog.c:859">errcode</a>(ERRCODE_SYNTAX_ERROR),<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <a href="../error/elog.c.html#L1072" title="utils/error/elog.c:1072">errmsg</a>(</span><span class="Constant">&quot;syntax <a href="../../parser/check_keywords.pl.html#L17" title="parser/check_keywords.pl:17">error</a> in file </span><span class="Special">\&quot;%s\&quot;</span><span class="Constant"> line </span><span class="Special">%u</span><span class="Constant">, near token </span><span class="Special">\&quot;%s\&quot;</span><span class="Constant">&quot;</span><span class="lexFinalCodeBlock">,<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; config_file, ConfigFileLineno, yytext)));<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; record_config_file_error(</span><span class="Constant">&quot;syntax <a href="../../parser/check_keywords.pl.html#L17" title="parser/check_keywords.pl:17">error</a>&quot;</span><span class="lexFinalCodeBlock">,<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; config_file, ConfigFileLineno,<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; head_p, tail_p);<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; OK = </span><span class="Constant">false</span><span class="lexFinalCodeBlock">;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; errorcount++;<br/></li>
<li></span><br/></li>
<li><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Comment">/*<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; * To avoid producing too much noise when fed a totally bogus file,<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; * give up after 100 syntax errors per file (an arbitrary number).<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; * Also, if we're only logging the errors at DEBUG level anyway, might<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; * as well give up immediately.&nbsp; (This prevents postmaster children<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; * from bloating the logs with duplicate complaints.)<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; */<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">if</span><span class="lexFinalCodeBlock"> (errorcount &gt;= </span><span class="Constant">100</span><span class="lexFinalCodeBlock"> || elevel &lt;= DEBUG1)<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; {<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ereport(elevel,<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (<a href="../error/elog.c.html#L859" title="utils/error/elog.c:859">errcode</a>(ERRCODE_PROGRAM_LIMIT_EXCEEDED),<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <a href="../error/elog.c.html#L1072" title="utils/error/elog.c:1072">errmsg</a>(</span><span class="Constant">&quot;too many syntax errors found, abandoning file </span><span class="Special">\&quot;%s\&quot;</span><span class="Constant">&quot;</span><span class="lexFinalCodeBlock">,<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; config_file)));<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">break</span><span class="lexFinalCodeBlock">;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li></span><br/></li>
<li><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Comment">/* resync to <a href="../../regex/regc_lex.c.html#L200" title="regex/regc_lex.c:200">next</a> end-of-line or EOF */<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">while</span><span class="lexFinalCodeBlock"> (token != GUC_EOL &amp;&amp; token != </span><span class="Constant">0</span><span class="lexFinalCodeBlock">)<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; token = yylex();<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Comment">/* break out of loop on EOF */<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">if</span><span class="lexFinalCodeBlock"> (token == </span><span class="Constant">0</span><span class="lexFinalCodeBlock">)<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">break</span><span class="lexFinalCodeBlock">;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; }<br/></li>
<li></span><br/></li>
<li><span class="Statement"><a href="../../regex/regc_nfa.c.html#L2929" title="regex/regc_nfa.c:2929">cleanup</a></span><span class="cUserCont">:<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; yy_delete_buffer(lex_buffer);<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; </span><span class="Comment">/* Each recursion level must save and restore these static variables. */<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; ConfigFileLineno = save_ConfigFileLineno;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; GUC_flex_fatal_jmp = save_GUC_flex_fatal_jmp;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; </span><span class="Statement">return</span><span class="lexFinalCodeBlock"> OK;<br/></li>
<li></span><span class="lexFinalCodeBlock">}<br/></li>
<li></span><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * Read and <a href="../../regex/regcomp.c.html#L715" title="regex/regcomp.c:715">parse</a> all config files in a subdirectory in alphabetical order<br/></li>
<li></span><span class="Comment"> *<br/></li>
<li></span><span class="Comment"> * includedir is the absolute or relative path to the subdirectory to scan.<br/></li>
<li></span><span class="Comment"> *<br/></li>
<li></span><span class="Comment"> * calling_file/calling_lineno identify the source of the request.<br/></li>
<li></span><span class="Comment"> * Pass NULL/0 if not recursing from an inclusion request.<br/></li>
<li></span><span class="Comment"> *<br/></li>
<li></span><span class="Comment"> * See ParseConfigFp for further details.<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><span class="Type"><a href="../fmgr/dfmgr.c.html#L28" title="utils/fmgr/dfmgr.c:28">bool</a><br/></li>
<li></span><span class="lexFinalCodeBlock">ParseConfigDirectory(</span><span class="Type">const</span><span class="lexFinalCodeBlock"> </span><span class="Type">char</span><span class="lexFinalCodeBlock"> *includedir,<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="Type">const</span><span class="lexFinalCodeBlock"> </span><span class="Type">char</span><span class="lexFinalCodeBlock"> *calling_file, </span><span class="Type">int</span><span class="lexFinalCodeBlock"> calling_lineno,<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="Type">int</span><span class="lexFinalCodeBlock"> depth, </span><span class="Type">int</span><span class="lexFinalCodeBlock"> elevel,<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ConfigVariable **head_p,<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ConfigVariable **tail_p)<br/></li>
<li></span><span class="lexFinalCodeBlock">{<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; </span><span class="Type">char</span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp;&nbsp; *err_msg;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; </span><span class="Type">char</span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; **filenames;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; </span><span class="Type">int</span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; num_filenames;<br/></li>
<li></span><br/></li>
<li><span class="lexFinalCodeBlock">&nbsp; &nbsp; filenames = <a href="conffiles.c.html#L70" title="utils/misc/conffiles.c:70">GetConfFilesInDir</a>(includedir, calling_file, elevel,<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &amp;num_filenames, &amp;err_msg);<br/></li>
<li></span><br/></li>
<li><span class="lexFinalCodeBlock">&nbsp; &nbsp; </span><span class="Statement">if</span><span class="lexFinalCodeBlock"> (!filenames)<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; {<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; record_config_file_error(err_msg, calling_file, calling_lineno, head_p,<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; tail_p);<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">return</span><span class="lexFinalCodeBlock"> </span><span class="Constant">false</span><span class="lexFinalCodeBlock">;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; }<br/></li>
<li></span><br/></li>
<li><span class="lexFinalCodeBlock">&nbsp; &nbsp; </span><span class="Statement">for</span><span class="lexFinalCodeBlock"> (</span><span class="Type">int</span><span class="lexFinalCodeBlock"> i = </span><span class="Constant">0</span><span class="lexFinalCodeBlock">; i &lt; num_filenames; i++)<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; {<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">if</span><span class="lexFinalCodeBlock"> (!ParseConfigFile(filenames[i], </span><span class="Constant">true</span><span class="lexFinalCodeBlock">,<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; calling_file, calling_lineno,<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; depth, elevel,<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; head_p, tail_p))<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">return</span><span class="lexFinalCodeBlock"> </span><span class="Constant">false</span><span class="lexFinalCodeBlock">;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; }<br/></li>
<li></span><br/></li>
<li><span class="lexFinalCodeBlock">&nbsp; &nbsp; </span><span class="Statement">return</span><span class="lexFinalCodeBlock"> </span><span class="Constant">true</span><span class="lexFinalCodeBlock">;<br/></li>
<li></span><span class="lexFinalCodeBlock">}<br/></li>
<li></span><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * Free a list of ConfigVariables, including the names and the <a href="../../bootstrap/bootstrap.c.html#L152" title="bootstrap/bootstrap.c:152">values</a><br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><span class="Type">void<br/></li>
<li></span><span class="lexFinalCodeBlock">FreeConfigVariables(ConfigVariable *list)<br/></li>
<li></span><span class="lexFinalCodeBlock">{<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; ConfigVariable *item;<br/></li>
<li></span><br/></li>
<li><span class="lexFinalCodeBlock">&nbsp; &nbsp; item = list;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; </span><span class="Statement">while</span><span class="lexFinalCodeBlock"> (item)<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; {<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; ConfigVariable *<a href="../../regex/regc_lex.c.html#L200" title="regex/regc_lex.c:200">next</a> = item-&gt;<a href="../../regex/regc_lex.c.html#L200" title="regex/regc_lex.c:200">next</a>;<br/></li>
<li></span><br/></li>
<li><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; FreeConfigVariable(item);<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; item = <a href="../../regex/regc_lex.c.html#L200" title="regex/regc_lex.c:200">next</a>;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; }<br/></li>
<li></span><span class="lexFinalCodeBlock">}<br/></li>
<li></span><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * Free a single ConfigVariable<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><span class="Type">static</span><span class="lexFinalCodeBlock"> </span><span class="Type">void<br/></li>
<li></span><span class="lexFinalCodeBlock">FreeConfigVariable(ConfigVariable *item)<br/></li>
<li></span><span class="lexFinalCodeBlock">{<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; </span><span class="Statement">if</span><span class="lexFinalCodeBlock"> (item-&gt;name)<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; <a href="../mmgr/mcxt.c.html#L1520" title="utils/mmgr/mcxt.c:1520">pfree</a>(item-&gt;name);<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; </span><span class="Statement">if</span><span class="lexFinalCodeBlock"> (item-&gt;value)<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; <a href="../mmgr/mcxt.c.html#L1520" title="utils/mmgr/mcxt.c:1520">pfree</a>(item-&gt;value);<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; </span><span class="Statement">if</span><span class="lexFinalCodeBlock"> (item-&gt;<a href="../error/elog.c.html#L1072" title="utils/error/elog.c:1072">errmsg</a>)<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; <a href="../mmgr/mcxt.c.html#L1520" title="utils/mmgr/mcxt.c:1520">pfree</a>(item-&gt;<a href="../error/elog.c.html#L1072" title="utils/error/elog.c:1072">errmsg</a>);<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; </span><span class="Statement">if</span><span class="lexFinalCodeBlock"> (item-&gt;filename)<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; <a href="../mmgr/mcxt.c.html#L1520" title="utils/mmgr/mcxt.c:1520">pfree</a>(item-&gt;filename);<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; <a href="../mmgr/mcxt.c.html#L1520" title="utils/mmgr/mcxt.c:1520">pfree</a>(item);<br/></li>
<li></span><span class="lexFinalCodeBlock">}<br/></li>
<li></span><br/></li>
<li><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> *&nbsp; &nbsp; &nbsp; &nbsp; DeescapeQuotedString<br/></li>
<li></span><span class="Comment"> *<br/></li>
<li></span><span class="Comment"> * Strip the quotes surrounding the given string, and collapse <a href="../adt/pseudotypes.c.html#L365" title="utils/adt/pseudotypes.c:365">any</a> embedded<br/></li>
<li></span><span class="Comment"> * '' sequences and backslash escapes.<br/></li>
<li></span><span class="Comment"> *<br/></li>
<li></span><span class="Comment"> * The string returned is <a href="../mmgr/mcxt.c.html#L1316" title="utils/mmgr/mcxt.c:1316">palloc</a>'d and should eventually be <a href="../mmgr/mcxt.c.html#L1520" title="utils/mmgr/mcxt.c:1520">pfree</a>'d by the<br/></li>
<li></span><span class="Comment"> * caller.<br/></li>
<li></span><span class="Comment"> *<br/></li>
<li></span><span class="Comment"> * This is exported because it is also used by the bootstrap scanner.<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><span class="Type">char</span><span class="lexFinalCodeBlock"> *<br/></li>
<li></span><span class="lexFinalCodeBlock">DeescapeQuotedString(</span><span class="Type">const</span><span class="lexFinalCodeBlock"> </span><span class="Type">char</span><span class="lexFinalCodeBlock"> *s)<br/></li>
<li></span><span class="lexFinalCodeBlock">{<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; </span><span class="Type">char</span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp;&nbsp; *newStr;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; </span><span class="Type">int</span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; len,<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; i,<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; j;<br/></li>
<li></span><br/></li>
<li><span class="lexFinalCodeBlock">&nbsp; &nbsp; </span><span class="Comment">/* We just Assert that there are leading and trailing quotes */<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; Assert(s != </span><span class="Constant">NULL</span><span class="lexFinalCodeBlock"> &amp;&amp; s[</span><span class="Constant">0</span><span class="lexFinalCodeBlock">] == </span><span class="Special">'\''</span><span class="lexFinalCodeBlock">);<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; len = strlen(s);<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; Assert(len &gt;= </span><span class="Constant">2</span><span class="lexFinalCodeBlock">);<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; Assert(s[len - </span><span class="Constant">1</span><span class="lexFinalCodeBlock">] == </span><span class="Special">'\''</span><span class="lexFinalCodeBlock">);<br/></li>
<li></span><br/></li>
<li><span class="lexFinalCodeBlock">&nbsp; &nbsp; </span><span class="Comment">/* Skip the leading quote; we'll handle the trailing quote below */<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; s++, len--;<br/></li>
<li></span><br/></li>
<li><span class="lexFinalCodeBlock">&nbsp; &nbsp; </span><span class="Comment">/* Since len still includes trailing quote, this is enough space */<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; newStr = <a href="../mmgr/mcxt.c.html#L1316" title="utils/mmgr/mcxt.c:1316">palloc</a>(len);<br/></li>
<li></span><br/></li>
<li><span class="lexFinalCodeBlock">&nbsp; &nbsp; </span><span class="Statement">for</span><span class="lexFinalCodeBlock"> (i = </span><span class="Constant">0</span><span class="lexFinalCodeBlock">, j = </span><span class="Constant">0</span><span class="lexFinalCodeBlock">; i &lt; len; i++)<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; {<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">if</span><span class="lexFinalCodeBlock"> (s[i] == </span><span class="Special">'\\'</span><span class="lexFinalCodeBlock">)<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; {<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; i++;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">switch</span><span class="lexFinalCodeBlock"> (s[i])<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">case</span><span class="lexFinalCodeBlock"> </span><span class="Constant">'b'</span><span class="lexFinalCodeBlock">:<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; newStr[j] = </span><span class="Special">'\b'</span><span class="lexFinalCodeBlock">;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">break</span><span class="lexFinalCodeBlock">;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">case</span><span class="lexFinalCodeBlock"> </span><span class="Constant">'f'</span><span class="lexFinalCodeBlock">:<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; newStr[j] = </span><span class="Special">'\f'</span><span class="lexFinalCodeBlock">;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">break</span><span class="lexFinalCodeBlock">;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">case</span><span class="lexFinalCodeBlock"> </span><span class="Constant">'n'</span><span class="lexFinalCodeBlock">:<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; newStr[j] = </span><span class="Special">'\n'</span><span class="lexFinalCodeBlock">;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">break</span><span class="lexFinalCodeBlock">;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">case</span><span class="lexFinalCodeBlock"> </span><span class="Constant">'r'</span><span class="lexFinalCodeBlock">:<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; newStr[j] = </span><span class="Special">'\r'</span><span class="lexFinalCodeBlock">;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">break</span><span class="lexFinalCodeBlock">;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">case</span><span class="lexFinalCodeBlock"> </span><span class="Constant">'t'</span><span class="lexFinalCodeBlock">:<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; newStr[j] = </span><span class="Special">'\t'</span><span class="lexFinalCodeBlock">;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">break</span><span class="lexFinalCodeBlock">;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">case</span><span class="lexFinalCodeBlock"> </span><span class="Constant">'0'</span><span class="lexFinalCodeBlock">:<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">case</span><span class="lexFinalCodeBlock"> </span><span class="Constant">'1'</span><span class="lexFinalCodeBlock">:<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">case</span><span class="lexFinalCodeBlock"> </span><span class="Constant">'2'</span><span class="lexFinalCodeBlock">:<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">case</span><span class="lexFinalCodeBlock"> </span><span class="Constant">'3'</span><span class="lexFinalCodeBlock">:<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">case</span><span class="lexFinalCodeBlock"> </span><span class="Constant">'4'</span><span class="lexFinalCodeBlock">:<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">case</span><span class="lexFinalCodeBlock"> </span><span class="Constant">'5'</span><span class="lexFinalCodeBlock">:<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">case</span><span class="lexFinalCodeBlock"> </span><span class="Constant">'6'</span><span class="lexFinalCodeBlock">:<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">case</span><span class="lexFinalCodeBlock"> </span><span class="Constant">'7'</span><span class="lexFinalCodeBlock">:<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Type">int</span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; k;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Type">long</span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; octVal = </span><span class="Constant">0</span><span class="lexFinalCodeBlock">;<br/></li>
<li></span><br/></li>
<li><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">for</span><span class="lexFinalCodeBlock"> (k = </span><span class="Constant">0</span><span class="lexFinalCodeBlock">;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; s[i + k] &gt;= </span><span class="Constant">'0'</span><span class="lexFinalCodeBlock"> &amp;&amp; s[i + k] &lt;= </span><span class="Constant">'7'</span><span class="lexFinalCodeBlock"> &amp;&amp; k &lt; </span><span class="Constant">3</span><span class="lexFinalCodeBlock">;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; k++)<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; octVal = (octVal &lt;&lt; </span><span class="Constant">3</span><span class="lexFinalCodeBlock">) + (s[i + k] - </span><span class="Constant">'0'</span><span class="lexFinalCodeBlock">);<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; i += k - </span><span class="Constant">1</span><span class="lexFinalCodeBlock">;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; newStr[j] = ((</span><span class="Type">char</span><span class="lexFinalCodeBlock">) octVal);<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">break</span><span class="lexFinalCodeBlock">;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">default</span><span class="lexFinalCodeBlock">:<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; newStr[j] = s[i];<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">break</span><span class="lexFinalCodeBlock">;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Comment">/* switch */<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">else</span><span class="lexFinalCodeBlock"> </span><span class="Statement">if</span><span class="lexFinalCodeBlock"> (s[i] == </span><span class="Special">'\''</span><span class="lexFinalCodeBlock"> &amp;&amp; s[i + </span><span class="Constant">1</span><span class="lexFinalCodeBlock">] == </span><span class="Special">'\''</span><span class="lexFinalCodeBlock">)<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; {<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Comment">/* doubled quote becomes just one quote */<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; newStr[j] = s[++i];<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">else<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; newStr[j] = s[i];<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; &nbsp; &nbsp; j++;<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; }<br/></li>
<li></span><br/></li>
<li><span class="lexFinalCodeBlock">&nbsp; &nbsp; </span><span class="Comment">/* We copied the ending quote to newStr, so replace with \0 */<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; Assert(j &gt; </span><span class="Constant">0</span><span class="lexFinalCodeBlock"> &amp;&amp; j &lt;= len);<br/></li>
<li></span><span class="lexFinalCodeBlock">&nbsp; &nbsp; newStr[--j] = </span><span class="Special">'\0'</span><span class="lexFinalCodeBlock">;<br/></li>
<li></span><br/></li>
<li><span class="lexFinalCodeBlock">&nbsp; &nbsp; </span><span class="Statement">return</span><span class="lexFinalCodeBlock"> newStr;<br/></li>
<li></span><span class="lexFinalCodeBlock">}<br/></li>
</ol></span></code>
 <p class="nav-bar">
  <span class="nav-link"><a href="./index.html">One Level Up</a></span>
  <span class="nav-link"><a href="../../index.html">Top Level</a></span>
 </p>

 </body>
</html>
