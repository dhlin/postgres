<!-- generated by the src2html.pl tool from code2ebook:
  https://github.com/agentzh/code2ebook
-->

<html>
 <head>
  <title>snowball/libstemmer/utilities.c - pgsql17devel-backend</title>
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
  <style>
body {
    text-align: left;
    text-align-last: left;
}

.nav-bar {
    font-size: 120%;
    margin-top: 5px;
    margin-bottom: 5px;
}

.nav-link {
    padding-left: 5em;
    padding-right: 5em;
}

ul.toc {
    line-height: 200%;
    font-size: 150%;
}

code {
    font-family: consolas, monospace;
    line-height: 130%;
}

span.Constant {
    color: DarkGreen;
}

span.Special {
    color: #c06000;
}

span.Comment {
    color: DarkRed;
    font-style: italic;
}

span.Identifier {
    color: DarkCyan;
}

span.PreProc {
    color: DarkMagenta;
}

span.Statement, span.Type, span.Keyword, span.Repeat, span.Conditional,
    span.Operator, span.Exception
{
    color: DarkBlue;
}

span.Todo {
    color: DarkRed;
    background-color: Gold;
    font-style: italic;
}

span.Underlined {
    text-decoration: underline;
}

span.linkable {
    font-weight: bold;
}

code ol {
    counter-reset: item;
    list-style-type: none;
    margin-left: 0;
    padding-left: 0;
    list-style-position: inside;
}

code li {
    display: block;
}

code li:before {
    content: counter(item) "  ";
    counter-increment: item;
    color: #999;
    padding-right: 0.5em;
    padding-left: 0.4em;
    list-style-position: inside;
    text-align: right
}

  </style>
 </head>
 <body>
 <p class="nav-bar">
  <span class="nav-link"><a href="./index.html">One Level Up</a></span>
  <span class="nav-link"><a href="../../index.html">Top Level</a></span>
 </p>

  <h1>snowball/libstemmer/utilities.c - pgsql17devel-backend</h1>
 <h2>Functions defined</h2>
 <ul class="toc">
<li><a href="#L466">assign_to</a></li>
<li><a href="#L5">create_s</a></li>
<li><a href="#L215">eq_s</a></li>
<li><a href="#L220">eq_s_b</a></li>
<li><a href="#L225">eq_v</a></li>
<li><a href="#L229">eq_v_b</a></li>
<li><a href="#L233">find_among</a></li>
<li><a href="#L298">find_among_b</a></li>
<li><a href="#L93">get_b_utf8</a></li>
<li><a href="#L71">get_utf8</a></li>
<li><a href="#L167">in_grouping</a></li>
<li><a href="#L117">in_grouping_U</a></li>
<li><a href="#L179">in_grouping_b</a></li>
<li><a href="#L129">in_grouping_b_U</a></li>
<li><a href="#L355">increase_size</a></li>
<li><a href="#L435">insert_s</a></li>
<li><a href="#L444">insert_v</a></li>
<li><a href="#L478">len_utf8</a></li>
<li><a href="#L15">lose_s</a></li>
<li><a href="#L191">out_grouping</a></li>
<li><a href="#L141">out_grouping_U</a></li>
<li><a href="#L203">out_grouping_b</a></li>
<li><a href="#L153">out_grouping_b_U</a></li>
<li><a href="#L374">replace_s</a></li>
<li><a href="#L52">skip_b_utf8</a></li>
<li><a href="#L27">skip_utf8</a></li>
<li><a href="#L405">slice_check</a></li>
<li><a href="#L431">slice_del</a></li>
<li><a href="#L422">slice_from_s</a></li>
<li><a href="#L427">slice_from_v</a></li>
<li><a href="#L448">slice_to</a></li>
</ul>
 <h2>Macros defined</h2>
 <ul class="toc">
<li><a href="#L3">CREATE_SIZE</a></li>
</ul>
 <h2>Source code</h2>

  <code><ol><li><span class="PreProc">#include </span><span class="Constant">&quot;header.h&quot;<br/></li>
<li></span><br/></li>
<li><a id="L3">&#x200c;</a><span class="PreProc">#define <span class="linkable">CREATE_SIZE</span> </span><span class="Constant">1<br/></li>
<li></span><br/></li>
<li><a id="L5">&#x200c;</a><span class="Type">extern</span> symbol * <span class="linkable">create_s</span>(<span class="Type">void</span>) {<br/></li>
<li>&nbsp; &nbsp; symbol * p;<br/></li>
<li>&nbsp; &nbsp; <span class="Type">void</span> * mem = malloc(HEAD + (<a href="#L3" title="snowball/libstemmer/utilities.c:3">CREATE_SIZE</a> + <span class="Constant">1</span>) * <span class="Statement"><a href="../../storage/page/itemptr.c.html#L23" title="storage/page/itemptr.c:23">sizeof</a></span>(symbol));<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (mem == <span class="Constant">NULL</span>) <span class="Statement">return</span> <span class="Constant">NULL</span>;<br/></li>
<li>&nbsp; &nbsp; p = (symbol *) (HEAD + (<span class="Type">char</span> *) mem);<br/></li>
<li>&nbsp; &nbsp; CAPACITY(p) = <a href="#L3" title="snowball/libstemmer/utilities.c:3">CREATE_SIZE</a>;<br/></li>
<li>&nbsp; &nbsp; SET_SIZE(p, <span class="Constant">0</span>);<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> p;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><a id="L15">&#x200c;</a><span class="Type">extern</span> <span class="Type">void</span> <span class="linkable">lose_s</span>(symbol * p) {<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (p == <span class="Constant">NULL</span>) <span class="Statement">return</span>;<br/></li>
<li>&nbsp; &nbsp; free((<span class="Type">char</span> *) p - HEAD);<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment">&nbsp;&nbsp; new_p = <a href="#L27" title="snowball/libstemmer/utilities.c:27">skip_utf8</a>(p, c, l, n); skips n characters forwards from p + c.<br/></li>
<li></span><span class="Comment">&nbsp;&nbsp; new_p is the new position, or -1 on failure.<br/></li>
<li></span><br/></li>
<li><span class="Comment">&nbsp;&nbsp; -- used to implement hop and <a href="../../regex/regc_lex.c.html#L200" title="regex/regc_lex.c:200">next</a> in the utf8 case.<br/></li>
<li></span><span class="Comment">*/<br/></li>
<li></span><br/></li>
<li><a id="L27">&#x200c;</a><span class="Type">extern</span> <span class="Type">int</span> <span class="linkable">skip_utf8</span>(<span class="Type">const</span> symbol * p, <span class="Type">int</span> c, <span class="Type">int</span> limit, <span class="Type">int</span> n) {<br/></li>
<li>&nbsp; &nbsp; <span class="Type">int</span> b;<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (n &lt; <span class="Constant">0</span>) <span class="Statement">return</span> -<span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">for</span> (; n &gt; <span class="Constant">0</span>; n--) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (c &gt;= limit) <span class="Statement">return</span> -<span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; b = p[c++];<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (b &gt;= <span class="Constant">0xC0</span>) {&nbsp;&nbsp; <span class="Comment">/* 1100 0000 */<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">while</span> (c &lt; limit) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; b = p[c];<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (b &gt;= <span class="Constant">0xC0</span> || b &lt; <span class="Constant">0x80</span>) <span class="Statement">break</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Comment">/* break unless b is 10------ */<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; c++;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> c;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment">&nbsp;&nbsp; new_p = <a href="#L52" title="snowball/libstemmer/utilities.c:52">skip_b_utf8</a>(p, c, lb, n); skips n characters backwards from p + c - 1<br/></li>
<li></span><span class="Comment">&nbsp;&nbsp; new_p is the new position, or -1 on failure.<br/></li>
<li></span><br/></li>
<li><span class="Comment">&nbsp;&nbsp; -- used to implement hop and <a href="../../regex/regc_lex.c.html#L200" title="regex/regc_lex.c:200">next</a> in the utf8 case.<br/></li>
<li></span><span class="Comment">*/<br/></li>
<li></span><br/></li>
<li><a id="L52">&#x200c;</a><span class="Type">extern</span> <span class="Type">int</span> <span class="linkable">skip_b_utf8</span>(<span class="Type">const</span> symbol * p, <span class="Type">int</span> c, <span class="Type">int</span> limit, <span class="Type">int</span> n) {<br/></li>
<li>&nbsp; &nbsp; <span class="Type">int</span> b;<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (n &lt; <span class="Constant">0</span>) <span class="Statement">return</span> -<span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">for</span> (; n &gt; <span class="Constant">0</span>; n--) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (c &lt;= limit) <span class="Statement">return</span> -<span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; b = p[--c];<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (b &gt;= <span class="Constant">0x80</span>) {&nbsp;&nbsp; <span class="Comment">/* 1000 0000 */<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">while</span> (c &gt; limit) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; b = p[c];<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (b &gt;= <span class="Constant">0xC0</span>) <span class="Statement">break</span>; <span class="Comment">/* 1100 0000 */<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; c--;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> c;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><span class="Comment">/* Code for character groupings: utf8 cases */<br/></li>
<li></span><br/></li>
<li><a id="L71">&#x200c;</a><span class="Type">static</span> <span class="Type">int</span> <span class="linkable">get_utf8</span>(<span class="Type">const</span> symbol * p, <span class="Type">int</span> c, <span class="Type">int</span> l, <span class="Type">int</span> * slot) {<br/></li>
<li>&nbsp; &nbsp; <span class="Type">int</span> b0, b1, b2;<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (c &gt;= l) <span class="Statement">return</span> <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; b0 = p[c++];<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (b0 &lt; <span class="Constant">0xC0</span> || c == l) {&nbsp;&nbsp; <span class="Comment">/* 1100 0000 */<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; *slot = b0;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; b1 = p[c++] &amp; <span class="Constant">0x3F</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (b0 &lt; <span class="Constant">0xE0</span> || c == l) {&nbsp;&nbsp; <span class="Comment">/* 1110 0000 */<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; *slot = (b0 &amp; <span class="Constant">0x1F</span>) &lt;&lt; <span class="Constant">6</span> | b1;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <span class="Constant">2</span>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; b2 = p[c++] &amp; <span class="Constant">0x3F</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (b0 &lt; <span class="Constant">0xF0</span> || c == l) {&nbsp;&nbsp; <span class="Comment">/* 1111 0000 */<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; *slot = (b0 &amp; <span class="Constant">0xF</span>) &lt;&lt; <span class="Constant">12</span> | b1 &lt;&lt; <span class="Constant">6</span> | b2;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <span class="Constant">3</span>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; *slot = (b0 &amp; <span class="Constant">0x7</span>) &lt;&lt; <span class="Constant">18</span> | b1 &lt;&lt; <span class="Constant">12</span> | b2 &lt;&lt; <span class="Constant">6</span> | (p[c] &amp; <span class="Constant">0x3F</span>);<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> <span class="Constant">4</span>;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><a id="L93">&#x200c;</a><span class="Type">static</span> <span class="Type">int</span> <span class="linkable">get_b_utf8</span>(<span class="Type">const</span> symbol * p, <span class="Type">int</span> c, <span class="Type">int</span> lb, <span class="Type">int</span> * slot) {<br/></li>
<li>&nbsp; &nbsp; <span class="Type">int</span> a, b;<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (c &lt;= lb) <span class="Statement">return</span> <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; b = p[--c];<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (b &lt; <span class="Constant">0x80</span> || c == lb) {&nbsp;&nbsp; <span class="Comment">/* 1000 0000 */<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; *slot = b;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; a = b &amp; <span class="Constant">0x3F</span>;<br/></li>
<li>&nbsp; &nbsp; b = p[--c];<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (b &gt;= <span class="Constant">0xC0</span> || c == lb) {&nbsp;&nbsp; <span class="Comment">/* 1100 0000 */<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; *slot = (b &amp; <span class="Constant">0x1F</span>) &lt;&lt; <span class="Constant">6</span> | a;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <span class="Constant">2</span>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; a |= (b &amp; <span class="Constant">0x3F</span>) &lt;&lt; <span class="Constant">6</span>;<br/></li>
<li>&nbsp; &nbsp; b = p[--c];<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (b &gt;= <span class="Constant">0xE0</span> || c == lb) {&nbsp;&nbsp; <span class="Comment">/* 1110 0000 */<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; *slot = (b &amp; <span class="Constant">0xF</span>) &lt;&lt; <span class="Constant">12</span> | a;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <span class="Constant">3</span>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; *slot = (p[--c] &amp; <span class="Constant">0x7</span>) &lt;&lt; <span class="Constant">18</span> | (b &amp; <span class="Constant">0x3F</span>) &lt;&lt; <span class="Constant">12</span> | a;<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> <span class="Constant">4</span>;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><a id="L117">&#x200c;</a><span class="Type">extern</span> <span class="Type">int</span> <span class="linkable">in_grouping_U</span>(<span class="Type">struct</span> SN_env * z, <span class="Type">const</span> <span class="Type">unsigned</span> <span class="Type">char</span> * s, <span class="Type">int</span> min, <span class="Type">int</span> max, <span class="Type">int</span> <a href="../../regex/regcomp.c.html#L1584" title="regex/regcomp.c:1584">repeat</a>) {<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">do</span> {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Type">int</span> ch;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Type">int</span> w = <a href="#L71" title="snowball/libstemmer/utilities.c:71">get_utf8</a>(z-&gt;p, z-&gt;c, z-&gt;l, &amp; ch);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (!w) <span class="Statement">return</span> -<span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (ch &gt; max || (ch -= min) &lt; <span class="Constant">0</span> || (s[ch &gt;&gt; <span class="Constant">3</span>] &amp; (<span class="Constant">0X1</span> &lt;&lt; (ch &amp; <span class="Constant">0X7</span>))) == <span class="Constant">0</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> w;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; z-&gt;c += w;<br/></li>
<li>&nbsp; &nbsp; } <span class="Statement">while</span> (<a href="../../regex/regcomp.c.html#L1584" title="regex/regcomp.c:1584">repeat</a>);<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> <span class="Constant">0</span>;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><a id="L129">&#x200c;</a><span class="Type">extern</span> <span class="Type">int</span> <span class="linkable">in_grouping_b_U</span>(<span class="Type">struct</span> SN_env * z, <span class="Type">const</span> <span class="Type">unsigned</span> <span class="Type">char</span> * s, <span class="Type">int</span> min, <span class="Type">int</span> max, <span class="Type">int</span> <a href="../../regex/regcomp.c.html#L1584" title="regex/regcomp.c:1584">repeat</a>) {<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">do</span> {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Type">int</span> ch;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Type">int</span> w = <a href="#L93" title="snowball/libstemmer/utilities.c:93">get_b_utf8</a>(z-&gt;p, z-&gt;c, z-&gt;lb, &amp; ch);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (!w) <span class="Statement">return</span> -<span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (ch &gt; max || (ch -= min) &lt; <span class="Constant">0</span> || (s[ch &gt;&gt; <span class="Constant">3</span>] &amp; (<span class="Constant">0X1</span> &lt;&lt; (ch &amp; <span class="Constant">0X7</span>))) == <span class="Constant">0</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> w;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; z-&gt;c -= w;<br/></li>
<li>&nbsp; &nbsp; } <span class="Statement">while</span> (<a href="../../regex/regcomp.c.html#L1584" title="regex/regcomp.c:1584">repeat</a>);<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> <span class="Constant">0</span>;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><a id="L141">&#x200c;</a><span class="Type">extern</span> <span class="Type">int</span> <span class="linkable">out_grouping_U</span>(<span class="Type">struct</span> SN_env * z, <span class="Type">const</span> <span class="Type">unsigned</span> <span class="Type">char</span> * s, <span class="Type">int</span> min, <span class="Type">int</span> max, <span class="Type">int</span> <a href="../../regex/regcomp.c.html#L1584" title="regex/regcomp.c:1584">repeat</a>) {<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">do</span> {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Type">int</span> ch;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Type">int</span> w = <a href="#L71" title="snowball/libstemmer/utilities.c:71">get_utf8</a>(z-&gt;p, z-&gt;c, z-&gt;l, &amp; ch);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (!w) <span class="Statement">return</span> -<span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (!(ch &gt; max || (ch -= min) &lt; <span class="Constant">0</span> || (s[ch &gt;&gt; <span class="Constant">3</span>] &amp; (<span class="Constant">0X1</span> &lt;&lt; (ch &amp; <span class="Constant">0X7</span>))) == <span class="Constant">0</span>))<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> w;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; z-&gt;c += w;<br/></li>
<li>&nbsp; &nbsp; } <span class="Statement">while</span> (<a href="../../regex/regcomp.c.html#L1584" title="regex/regcomp.c:1584">repeat</a>);<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> <span class="Constant">0</span>;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><a id="L153">&#x200c;</a><span class="Type">extern</span> <span class="Type">int</span> <span class="linkable">out_grouping_b_U</span>(<span class="Type">struct</span> SN_env * z, <span class="Type">const</span> <span class="Type">unsigned</span> <span class="Type">char</span> * s, <span class="Type">int</span> min, <span class="Type">int</span> max, <span class="Type">int</span> <a href="../../regex/regcomp.c.html#L1584" title="regex/regcomp.c:1584">repeat</a>) {<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">do</span> {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Type">int</span> ch;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Type">int</span> w = <a href="#L93" title="snowball/libstemmer/utilities.c:93">get_b_utf8</a>(z-&gt;p, z-&gt;c, z-&gt;lb, &amp; ch);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (!w) <span class="Statement">return</span> -<span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (!(ch &gt; max || (ch -= min) &lt; <span class="Constant">0</span> || (s[ch &gt;&gt; <span class="Constant">3</span>] &amp; (<span class="Constant">0X1</span> &lt;&lt; (ch &amp; <span class="Constant">0X7</span>))) == <span class="Constant">0</span>))<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> w;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; z-&gt;c -= w;<br/></li>
<li>&nbsp; &nbsp; } <span class="Statement">while</span> (<a href="../../regex/regcomp.c.html#L1584" title="regex/regcomp.c:1584">repeat</a>);<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> <span class="Constant">0</span>;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><span class="Comment">/* Code for character groupings: non-utf8 cases */<br/></li>
<li></span><br/></li>
<li><a id="L167">&#x200c;</a><span class="Type">extern</span> <span class="Type">int</span> <span class="linkable">in_grouping</span>(<span class="Type">struct</span> SN_env * z, <span class="Type">const</span> <span class="Type">unsigned</span> <span class="Type">char</span> * s, <span class="Type">int</span> min, <span class="Type">int</span> max, <span class="Type">int</span> <a href="../../regex/regcomp.c.html#L1584" title="regex/regcomp.c:1584">repeat</a>) {<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">do</span> {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Type">int</span> ch;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (z-&gt;c &gt;= z-&gt;l) <span class="Statement">return</span> -<span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; ch = z-&gt;p[z-&gt;c];<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (ch &gt; max || (ch -= min) &lt; <span class="Constant">0</span> || (s[ch &gt;&gt; <span class="Constant">3</span>] &amp; (<span class="Constant">0X1</span> &lt;&lt; (ch &amp; <span class="Constant">0X7</span>))) == <span class="Constant">0</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; z-&gt;c++;<br/></li>
<li>&nbsp; &nbsp; } <span class="Statement">while</span> (<a href="../../regex/regcomp.c.html#L1584" title="regex/regcomp.c:1584">repeat</a>);<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> <span class="Constant">0</span>;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><a id="L179">&#x200c;</a><span class="Type">extern</span> <span class="Type">int</span> <span class="linkable">in_grouping_b</span>(<span class="Type">struct</span> SN_env * z, <span class="Type">const</span> <span class="Type">unsigned</span> <span class="Type">char</span> * s, <span class="Type">int</span> min, <span class="Type">int</span> max, <span class="Type">int</span> <a href="../../regex/regcomp.c.html#L1584" title="regex/regcomp.c:1584">repeat</a>) {<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">do</span> {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Type">int</span> ch;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (z-&gt;c &lt;= z-&gt;lb) <span class="Statement">return</span> -<span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; ch = z-&gt;p[z-&gt;c - <span class="Constant">1</span>];<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (ch &gt; max || (ch -= min) &lt; <span class="Constant">0</span> || (s[ch &gt;&gt; <span class="Constant">3</span>] &amp; (<span class="Constant">0X1</span> &lt;&lt; (ch &amp; <span class="Constant">0X7</span>))) == <span class="Constant">0</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; z-&gt;c--;<br/></li>
<li>&nbsp; &nbsp; } <span class="Statement">while</span> (<a href="../../regex/regcomp.c.html#L1584" title="regex/regcomp.c:1584">repeat</a>);<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> <span class="Constant">0</span>;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><a id="L191">&#x200c;</a><span class="Type">extern</span> <span class="Type">int</span> <span class="linkable">out_grouping</span>(<span class="Type">struct</span> SN_env * z, <span class="Type">const</span> <span class="Type">unsigned</span> <span class="Type">char</span> * s, <span class="Type">int</span> min, <span class="Type">int</span> max, <span class="Type">int</span> <a href="../../regex/regcomp.c.html#L1584" title="regex/regcomp.c:1584">repeat</a>) {<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">do</span> {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Type">int</span> ch;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (z-&gt;c &gt;= z-&gt;l) <span class="Statement">return</span> -<span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; ch = z-&gt;p[z-&gt;c];<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (!(ch &gt; max || (ch -= min) &lt; <span class="Constant">0</span> || (s[ch &gt;&gt; <span class="Constant">3</span>] &amp; (<span class="Constant">0X1</span> &lt;&lt; (ch &amp; <span class="Constant">0X7</span>))) == <span class="Constant">0</span>))<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; z-&gt;c++;<br/></li>
<li>&nbsp; &nbsp; } <span class="Statement">while</span> (<a href="../../regex/regcomp.c.html#L1584" title="regex/regcomp.c:1584">repeat</a>);<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> <span class="Constant">0</span>;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><a id="L203">&#x200c;</a><span class="Type">extern</span> <span class="Type">int</span> <span class="linkable">out_grouping_b</span>(<span class="Type">struct</span> SN_env * z, <span class="Type">const</span> <span class="Type">unsigned</span> <span class="Type">char</span> * s, <span class="Type">int</span> min, <span class="Type">int</span> max, <span class="Type">int</span> <a href="../../regex/regcomp.c.html#L1584" title="regex/regcomp.c:1584">repeat</a>) {<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">do</span> {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Type">int</span> ch;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (z-&gt;c &lt;= z-&gt;lb) <span class="Statement">return</span> -<span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; ch = z-&gt;p[z-&gt;c - <span class="Constant">1</span>];<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (!(ch &gt; max || (ch -= min) &lt; <span class="Constant">0</span> || (s[ch &gt;&gt; <span class="Constant">3</span>] &amp; (<span class="Constant">0X1</span> &lt;&lt; (ch &amp; <span class="Constant">0X7</span>))) == <span class="Constant">0</span>))<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; z-&gt;c--;<br/></li>
<li>&nbsp; &nbsp; } <span class="Statement">while</span> (<a href="../../regex/regcomp.c.html#L1584" title="regex/regcomp.c:1584">repeat</a>);<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> <span class="Constant">0</span>;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><a id="L215">&#x200c;</a><span class="Type">extern</span> <span class="Type">int</span> <span class="linkable">eq_s</span>(<span class="Type">struct</span> SN_env * z, <span class="Type">int</span> s_size, <span class="Type">const</span> symbol * s) {<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (z-&gt;l - z-&gt;c &lt; s_size || memcmp(z-&gt;p + z-&gt;c, s, s_size * <span class="Statement"><a href="../../storage/page/itemptr.c.html#L23" title="storage/page/itemptr.c:23">sizeof</a></span>(symbol)) != <span class="Constant">0</span>) <span class="Statement">return</span> <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; z-&gt;c += s_size; <span class="Statement">return</span> <span class="Constant">1</span>;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><a id="L220">&#x200c;</a><span class="Type">extern</span> <span class="Type">int</span> <span class="linkable">eq_s_b</span>(<span class="Type">struct</span> SN_env * z, <span class="Type">int</span> s_size, <span class="Type">const</span> symbol * s) {<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (z-&gt;c - z-&gt;lb &lt; s_size || memcmp(z-&gt;p + z-&gt;c - s_size, s, s_size * <span class="Statement"><a href="../../storage/page/itemptr.c.html#L23" title="storage/page/itemptr.c:23">sizeof</a></span>(symbol)) != <span class="Constant">0</span>) <span class="Statement">return</span> <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; z-&gt;c -= s_size; <span class="Statement">return</span> <span class="Constant">1</span>;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><a id="L225">&#x200c;</a><span class="Type">extern</span> <span class="Type">int</span> <span class="linkable">eq_v</span>(<span class="Type">struct</span> SN_env * z, <span class="Type">const</span> symbol * p) {<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> <a href="#L215" title="snowball/libstemmer/utilities.c:215">eq_s</a>(z, SIZE(p), p);<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><a id="L229">&#x200c;</a><span class="Type">extern</span> <span class="Type">int</span> <span class="linkable">eq_v_b</span>(<span class="Type">struct</span> SN_env * z, <span class="Type">const</span> symbol * p) {<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> <a href="#L220" title="snowball/libstemmer/utilities.c:220">eq_s_b</a>(z, SIZE(p), p);<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><a id="L233">&#x200c;</a><span class="Type">extern</span> <span class="Type">int</span> <span class="linkable">find_among</span>(<span class="Type">struct</span> SN_env * z, <span class="Type">const</span> <span class="Type">struct</span> among * v, <span class="Type">int</span> v_size) {<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Type">int</span> i = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Type">int</span> j = v_size;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Type">int</span> c = z-&gt;c; <span class="Type">int</span> l = z-&gt;l;<br/></li>
<li>&nbsp; &nbsp; <span class="Type">const</span> symbol * q = z-&gt;p + c;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Type">const</span> <span class="Type">struct</span> among * w;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Type">int</span> common_i = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Type">int</span> common_j = <span class="Constant">0</span>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Type">int</span> first_key_inspected = <span class="Constant">0</span>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">while</span> (<span class="Constant">1</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Type">int</span> k = i + ((j - i) &gt;&gt; <span class="Constant">1</span>);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Type">int</span> diff = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Type">int</span> common = common_i &lt; common_j ? common_i : common_j; <span class="Comment">/* smaller */<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; w = v + k;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Type">int</span> i2; <span class="Statement">for</span> (i2 = common; i2 &lt; w-&gt;s_size; i2++) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (c + common == l) { diff = -<span class="Constant">1</span>; <span class="Statement">break</span>; }<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; diff = q[common] - w-&gt;s[i2];<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (diff != <span class="Constant">0</span>) <span class="Statement">break</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; common++;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (diff &lt; <span class="Constant">0</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; j = k;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; common_j = common;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; } <span class="Statement">else</span> {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; i = k;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; common_i = common;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (j - i &lt;= <span class="Constant">1</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (i &gt; <span class="Constant">0</span>) <span class="Statement">break</span>; <span class="Comment">/* v-&gt;s has been inspected */<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (j == i) <span class="Statement">break</span>; <span class="Comment">/* only one item in v */<br/></li>
<li></span><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Comment">/* - but <a href="../../utils/adt/timestamp.c.html#L1618" title="utils/adt/timestamp.c:1618">now</a> we need to go round once more to get<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; v-&gt;s inspected. This looks messy, but is actually<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; the optimal approach.&nbsp; */<br/></li>
<li></span><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (first_key_inspected) <span class="Statement">break</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; first_key_inspected = <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">while</span> (<span class="Constant">1</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; w = v + i;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (common_i &gt;= w-&gt;s_size) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; z-&gt;c = c + w-&gt;s_size;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (w-&gt;function == <span class="Constant">0</span>) <span class="Statement">return</span> w-&gt;result;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Type">int</span> res = w-&gt;function(z);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; z-&gt;c = c + w-&gt;s_size;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (res) <span class="Statement">return</span> w-&gt;result;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; i = w-&gt;substring_i;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (i &lt; <span class="Constant">0</span>) <span class="Statement">return</span> <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><span class="Comment">/* <a href="#L298" title="snowball/libstemmer/utilities.c:298">find_among_b</a> is for backwards processing. Same comments apply */<br/></li>
<li></span><br/></li>
<li><a id="L298">&#x200c;</a><span class="Type">extern</span> <span class="Type">int</span> <span class="linkable">find_among_b</span>(<span class="Type">struct</span> SN_env * z, <span class="Type">const</span> <span class="Type">struct</span> among * v, <span class="Type">int</span> v_size) {<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Type">int</span> i = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Type">int</span> j = v_size;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Type">int</span> c = z-&gt;c; <span class="Type">int</span> lb = z-&gt;lb;<br/></li>
<li>&nbsp; &nbsp; <span class="Type">const</span> symbol * q = z-&gt;p + c - <span class="Constant">1</span>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Type">const</span> <span class="Type">struct</span> among * w;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Type">int</span> common_i = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Type">int</span> common_j = <span class="Constant">0</span>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Type">int</span> first_key_inspected = <span class="Constant">0</span>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">while</span> (<span class="Constant">1</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Type">int</span> k = i + ((j - i) &gt;&gt; <span class="Constant">1</span>);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Type">int</span> diff = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Type">int</span> common = common_i &lt; common_j ? common_i : common_j;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; w = v + k;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Type">int</span> i2; <span class="Statement">for</span> (i2 = w-&gt;s_size - <span class="Constant">1</span> - common; i2 &gt;= <span class="Constant">0</span>; i2--) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (c - common == lb) { diff = -<span class="Constant">1</span>; <span class="Statement">break</span>; }<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; diff = q[- common] - w-&gt;s[i2];<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (diff != <span class="Constant">0</span>) <span class="Statement">break</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; common++;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (diff &lt; <span class="Constant">0</span>) { j = k; common_j = common; }<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">else</span> { i = k; common_i = common; }<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (j - i &lt;= <span class="Constant">1</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (i &gt; <span class="Constant">0</span>) <span class="Statement">break</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (j == i) <span class="Statement">break</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (first_key_inspected) <span class="Statement">break</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; first_key_inspected = <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">while</span> (<span class="Constant">1</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; w = v + i;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (common_i &gt;= w-&gt;s_size) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; z-&gt;c = c - w-&gt;s_size;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (w-&gt;function == <span class="Constant">0</span>) <span class="Statement">return</span> w-&gt;result;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Type">int</span> res = w-&gt;function(z);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; z-&gt;c = c - w-&gt;s_size;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (res) <span class="Statement">return</span> w-&gt;result;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; i = w-&gt;substring_i;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (i &lt; <span class="Constant">0</span>) <span class="Statement">return</span> <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Comment">/* Increase the size of the buffer pointed to by p to at least n symbols.<br/></li>
<li></span><span class="Comment"> * If insufficient memory, returns NULL and frees the old buffer.<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li><a id="L355">&#x200c;</a></span><span class="Type">static</span> symbol * <span class="linkable">increase_size</span>(symbol * p, <span class="Type">int</span> n) {<br/></li>
<li>&nbsp; &nbsp; symbol * q;<br/></li>
<li>&nbsp; &nbsp; <span class="Type">int</span> new_size = n + <span class="Constant">20</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Type">void</span> * mem = realloc((<span class="Type">char</span> *) p - HEAD,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; HEAD + (new_size + <span class="Constant">1</span>) * <span class="Statement"><a href="../../storage/page/itemptr.c.html#L23" title="storage/page/itemptr.c:23">sizeof</a></span>(symbol));<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (mem == <span class="Constant">NULL</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <a href="#L15" title="snowball/libstemmer/utilities.c:15">lose_s</a>(p);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <span class="Constant">NULL</span>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; q = (symbol *) (HEAD + (<span class="Type">char</span> *)mem);<br/></li>
<li>&nbsp; &nbsp; CAPACITY(q) = new_size;<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> q;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><span class="Comment">/* to replace symbols between c_bra and c_ket in z-&gt;p by the<br/></li>
<li></span><span class="Comment">&nbsp;&nbsp; s_size symbols at s.<br/></li>
<li></span><span class="Comment">&nbsp;&nbsp; Returns 0 on success, -1 on error.<br/></li>
<li></span><span class="Comment">&nbsp;&nbsp; Also, frees z-&gt;p (and sets it to NULL) on error.<br/></li>
<li></span><span class="Comment">*/<br/></li>
<li><a id="L374">&#x200c;</a></span><span class="Type">extern</span> <span class="Type">int</span> <span class="linkable">replace_s</span>(<span class="Type">struct</span> SN_env * z, <span class="Type">int</span> c_bra, <span class="Type">int</span> c_ket, <span class="Type">int</span> s_size, <span class="Type">const</span> symbol * s, <span class="Type">int</span> * adjptr)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; <span class="Type">int</span> adjustment;<br/></li>
<li>&nbsp; &nbsp; <span class="Type">int</span> len;<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (z-&gt;p == <span class="Constant">NULL</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; z-&gt;p = <a href="#L5" title="snowball/libstemmer/utilities.c:5">create_s</a>();<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (z-&gt;p == <span class="Constant">NULL</span>) <span class="Statement">return</span> -<span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; adjustment = s_size - (c_ket - c_bra);<br/></li>
<li>&nbsp; &nbsp; len = SIZE(z-&gt;p);<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (adjustment != <span class="Constant">0</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (adjustment + len &gt; CAPACITY(z-&gt;p)) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; z-&gt;p = <a href="#L355" title="snowball/libstemmer/utilities.c:355">increase_size</a>(z-&gt;p, adjustment + len);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (z-&gt;p == <span class="Constant">NULL</span>) <span class="Statement">return</span> -<span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; memmove(z-&gt;p + c_ket + adjustment,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; z-&gt;p + c_ket,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (len - c_ket) * <span class="Statement"><a href="../../storage/page/itemptr.c.html#L23" title="storage/page/itemptr.c:23">sizeof</a></span>(symbol));<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; SET_SIZE(z-&gt;p, adjustment + len);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; z-&gt;l += adjustment;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (z-&gt;c &gt;= c_ket)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; z-&gt;c += adjustment;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">else</span> <span class="Statement">if</span> (z-&gt;c &gt; c_bra)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; z-&gt;c = c_bra;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (s_size) memmove(z-&gt;p + c_bra, s, s_size * <span class="Statement"><a href="../../storage/page/itemptr.c.html#L23" title="storage/page/itemptr.c:23">sizeof</a></span>(symbol));<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (adjptr != <span class="Constant">NULL</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; *adjptr = adjustment;<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> <span class="Constant">0</span>;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><a id="L405">&#x200c;</a><span class="Type">static</span> <span class="Type">int</span> <span class="linkable">slice_check</span>(<span class="Type">struct</span> SN_env * z) {<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (z-&gt;bra &lt; <span class="Constant">0</span> ||<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; z-&gt;bra &gt; z-&gt;ket ||<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; z-&gt;ket &gt; z-&gt;l ||<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; z-&gt;p == <span class="Constant">NULL</span> ||<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; z-&gt;l &gt; SIZE(z-&gt;p)) <span class="Comment">/* this line could be removed */<br/></li>
<li></span>&nbsp; &nbsp; {<br/></li>
<li><span class="PreProc">#if 0<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp; fprintf(stderr, &quot;faulty slice operation:\n&quot;);<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp; debug(z, -1, 0);<br/></li>
<li></span><span class="PreProc">#endif<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> -<span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> <span class="Constant">0</span>;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><a id="L422">&#x200c;</a><span class="Type">extern</span> <span class="Type">int</span> <span class="linkable">slice_from_s</span>(<span class="Type">struct</span> SN_env * z, <span class="Type">int</span> s_size, <span class="Type">const</span> symbol * s) {<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (<a href="#L405" title="snowball/libstemmer/utilities.c:405">slice_check</a>(z)) <span class="Statement">return</span> -<span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> <a href="#L374" title="snowball/libstemmer/utilities.c:374">replace_s</a>(z, z-&gt;bra, z-&gt;ket, s_size, s, <span class="Constant">NULL</span>);<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><a id="L427">&#x200c;</a><span class="Type">extern</span> <span class="Type">int</span> <span class="linkable">slice_from_v</span>(<span class="Type">struct</span> SN_env * z, <span class="Type">const</span> symbol * p) {<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> <a href="#L422" title="snowball/libstemmer/utilities.c:422">slice_from_s</a>(z, SIZE(p), p);<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><a id="L431">&#x200c;</a><span class="Type">extern</span> <span class="Type">int</span> <span class="linkable">slice_del</span>(<span class="Type">struct</span> SN_env * z) {<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> <a href="#L422" title="snowball/libstemmer/utilities.c:422">slice_from_s</a>(z, <span class="Constant">0</span>, <span class="Constant">0</span>);<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><a id="L435">&#x200c;</a><span class="Type">extern</span> <span class="Type">int</span> <span class="linkable">insert_s</span>(<span class="Type">struct</span> SN_env * z, <span class="Type">int</span> bra, <span class="Type">int</span> ket, <span class="Type">int</span> s_size, <span class="Type">const</span> symbol * s) {<br/></li>
<li>&nbsp; &nbsp; <span class="Type">int</span> adjustment;<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (<a href="#L374" title="snowball/libstemmer/utilities.c:374">replace_s</a>(z, bra, ket, s_size, s, &amp;adjustment))<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> -<span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (bra &lt;= z-&gt;bra) z-&gt;bra += adjustment;<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (bra &lt;= z-&gt;ket) z-&gt;ket += adjustment;<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> <span class="Constant">0</span>;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><a id="L444">&#x200c;</a><span class="Type">extern</span> <span class="Type">int</span> <span class="linkable">insert_v</span>(<span class="Type">struct</span> SN_env * z, <span class="Type">int</span> bra, <span class="Type">int</span> ket, <span class="Type">const</span> symbol * p) {<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> <a href="#L435" title="snowball/libstemmer/utilities.c:435">insert_s</a>(z, bra, ket, SIZE(p), p);<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><a id="L448">&#x200c;</a><span class="Type">extern</span> symbol * <span class="linkable">slice_to</span>(<span class="Type">struct</span> SN_env * z, symbol * p) {<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (<a href="#L405" title="snowball/libstemmer/utilities.c:405">slice_check</a>(z)) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <a href="#L15" title="snowball/libstemmer/utilities.c:15">lose_s</a>(p);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <span class="Constant">NULL</span>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Type">int</span> len = z-&gt;ket - z-&gt;bra;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (CAPACITY(p) &lt; len) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; p = <a href="#L355" title="snowball/libstemmer/utilities.c:355">increase_size</a>(p, len);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (p == <span class="Constant">NULL</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <span class="Constant">NULL</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; memmove(p, z-&gt;p + z-&gt;bra, len * <span class="Statement"><a href="../../storage/page/itemptr.c.html#L23" title="storage/page/itemptr.c:23">sizeof</a></span>(symbol));<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; SET_SIZE(p, len);<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> p;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><a id="L466">&#x200c;</a><span class="Type">extern</span> symbol * <span class="linkable">assign_to</span>(<span class="Type">struct</span> SN_env * z, symbol * p) {<br/></li>
<li>&nbsp; &nbsp; <span class="Type">int</span> len = z-&gt;l;<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (CAPACITY(p) &lt; len) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; p = <a href="#L355" title="snowball/libstemmer/utilities.c:355">increase_size</a>(p, len);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (p == <span class="Constant">NULL</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <span class="Constant">NULL</span>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; memmove(p, z-&gt;p, len * <span class="Statement"><a href="../../storage/page/itemptr.c.html#L23" title="storage/page/itemptr.c:23">sizeof</a></span>(symbol));<br/></li>
<li>&nbsp; &nbsp; SET_SIZE(p, len);<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> p;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><a id="L478">&#x200c;</a><span class="Type">extern</span> <span class="Type">int</span> <span class="linkable">len_utf8</span>(<span class="Type">const</span> symbol * p) {<br/></li>
<li>&nbsp; &nbsp; <span class="Type">int</span> size = SIZE(p);<br/></li>
<li>&nbsp; &nbsp; <span class="Type">int</span> len = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">while</span> (size--) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; symbol b = *p++;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (b &gt;= <span class="Constant">0xC0</span> || b &lt; <span class="Constant">0x80</span>) ++len;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> len;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><span class="PreProc">#if 0<br/></li>
<li></span><span class="Comment">extern void debug(struct SN_env * z, int number, int line_count) {<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; int i;<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; int limit = SIZE(z-&gt;p);<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; /*if (number &gt;= 0) printf(&quot;%3d (line %4d): '&quot;, number, line_count);*/<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; if (number &gt;= 0) printf(&quot;%3d (line %4d): [%d]'&quot;, number, line_count,limit);<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; for (i = 0; i &lt;= limit; i++) {<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp; if (z-&gt;lb == i) printf(&quot;{&quot;);<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp; if (z-&gt;bra == i) printf(&quot;[&quot;);<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp; if (z-&gt;c == i) printf(&quot;|&quot;);<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp; if (z-&gt;ket == i) printf(&quot;]&quot;);<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp; if (z-&gt;l == i) printf(&quot;}&quot;);<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp; if (i &lt; limit)<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp; {&nbsp;&nbsp; int ch = z-&gt;p[i];<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (ch == 0) ch = '#';<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; printf(&quot;%c&quot;, ch);<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; }<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; printf(&quot;'\n&quot;);<br/></li>
<li></span><span class="Comment">}<br/></li>
<li></span><span class="PreProc">#endif<br/></li>
</ol></span></code>
 <p class="nav-bar">
  <span class="nav-link"><a href="./index.html">One Level Up</a></span>
  <span class="nav-link"><a href="../../index.html">Top Level</a></span>
 </p>

 </body>
</html>
