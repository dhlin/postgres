<!-- generated by the src2html.pl tool from code2ebook:
  https://github.com/agentzh/code2ebook
-->

<html>
 <head>
  <title>catalog/system_views.sql - pgsql17devel-backend</title>
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
  <style>
body {
    text-align: left;
    text-align-last: left;
}

.nav-bar {
    font-size: 120%;
    margin-top: 5px;
    margin-bottom: 5px;
}

.nav-link {
    padding-left: 5em;
    padding-right: 5em;
}

ul.toc {
    line-height: 200%;
    font-size: 150%;
}

code {
    font-family: consolas, monospace;
    line-height: 130%;
}

span.Constant {
    color: DarkGreen;
}

span.Special {
    color: #c06000;
}

span.Comment {
    color: DarkRed;
    font-style: italic;
}

span.Identifier {
    color: DarkCyan;
}

span.PreProc {
    color: DarkMagenta;
}

span.Statement, span.Type, span.Keyword, span.Repeat, span.Conditional,
    span.Operator, span.Exception
{
    color: DarkBlue;
}

span.Todo {
    color: DarkRed;
    background-color: Gold;
    font-style: italic;
}

span.Underlined {
    text-decoration: underline;
}

span.linkable {
    font-weight: bold;
}

code ol {
    counter-reset: item;
    list-style-type: none;
    margin-left: 0;
    padding-left: 0;
    list-style-position: inside;
}

code li {
    display: block;
}

code li:before {
    content: counter(item) "  ";
    counter-increment: item;
    color: #999;
    padding-right: 0.5em;
    padding-left: 0.4em;
    list-style-position: inside;
    text-align: right
}

  </style>
 </head>
 <body>
 <p class="nav-bar">
  <span class="nav-link"><a href="./index.html">One Level Up</a></span>
  <span class="nav-link"><a href="../index.html">Top Level</a></span>
 </p>

  <h1>catalog/system_views.sql - pgsql17devel-backend</h1>

  <code><ol><li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * PostgreSQL System Views<br/></li>
<li></span><span class="Comment"> *<br/></li>
<li></span><span class="Comment"> * Copyright (c) 1996-2024, PostgreSQL Global Development Group<br/></li>
<li></span><span class="Comment"> *<br/></li>
<li></span><span class="Comment"> * src/backend/catalog/system_views.sql<br/></li>
<li></span><span class="Comment"> *<br/></li>
<li></span><span class="Comment"> * </span><span class="Todo">Note</span><span class="Comment">: this file is read in single-user -j mode, which means that the<br/></li>
<li></span><span class="Comment"> * command terminator is semicolon-newline-newline; whenever the backend<br/></li>
<li></span><span class="Comment"> * sees that, it stops and executes what it's got.&nbsp; If you write a lot of<br/></li>
<li></span><span class="Comment"> * statements without empty lines between, they'll all get quoted to you<br/></li>
<li></span><span class="Comment"> * in any error message about one of them, so don't do that.&nbsp; Also, you<br/></li>
<li></span><span class="Comment"> * cannot write a semicolon immediately followed by an empty line in a<br/></li>
<li></span><span class="Comment"> * string literal (including a function body!) or a multiline comment.<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> pg_roles <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; rolname,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; rolsuper,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; rolinherit,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; rolcreaterole,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; rolcreatedb,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; rolcanlogin,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; rolreplication,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; rolconnlimit,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">'</span><span class="Constant">********</span><span class="Special">'</span>::text <span class="Special">as</span> rolpassword,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; rolvaliduntil,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; rolbypassrls,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; setconfig <span class="Special">as</span> rolconfig,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; pg_authid.oid<br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> pg_authid <span class="Special">LEFT</span> <span class="Special">JOIN</span> pg_db_role_setting s<br/></li>
<li>&nbsp; &nbsp; <span class="Special">ON</span> (pg_authid.oid = setrole <span class="Statement">AND</span> setdatabase = <span class="Constant">0</span>);<br/></li>
<li><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> pg_shadow <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; rolname <span class="Special">AS</span> usename,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; pg_authid.oid <span class="Special">AS</span> usesysid,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; rolcreatedb <span class="Special">AS</span> usecreatedb,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; rolsuper <span class="Special">AS</span> usesuper,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; rolreplication <span class="Special">AS</span> userepl,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; rolbypassrls <span class="Special">AS</span> usebypassrls,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; rolpassword <span class="Special">AS</span> passwd,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; rolvaliduntil <span class="Special">AS</span> valuntil,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; setconfig <span class="Special">AS</span> useconfig<br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> pg_authid <span class="Special">LEFT</span> <span class="Special">JOIN</span> pg_db_role_setting s<br/></li>
<li>&nbsp; &nbsp; <span class="Special">ON</span> (pg_authid.oid = setrole <span class="Statement">AND</span> setdatabase = <span class="Constant">0</span>)<br/></li>
<li>&nbsp; &nbsp; <span class="Special">WHERE</span> rolcanlogin;<br/></li>
<li><br/></li>
<li><span class="Statement">REVOKE</span> <span class="Statement">ALL</span> <span class="Special">ON</span> pg_shadow <span class="Special">FROM</span> <span class="Special">public</span>;<br/></li>
<li><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> pg_group <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; rolname <span class="Special">AS</span> groname,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; oid <span class="Special">AS</span> grosysid,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; ARRAY(<span class="Statement">SELECT</span> member <span class="Special">FROM</span> pg_auth_members <span class="Special">WHERE</span> roleid = pg_authid.oid) <span class="Special">AS</span> grolist<br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> pg_authid<br/></li>
<li>&nbsp; &nbsp; <span class="Special">WHERE</span> <span class="Statement">NOT</span> rolcanlogin;<br/></li>
<li><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> pg_user <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; usename,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; usesysid,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; usecreatedb,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; usesuper,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; userepl,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; usebypassrls,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">'</span><span class="Constant">********</span><span class="Special">'</span>::text <span class="Special">as</span> passwd,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; valuntil,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; useconfig<br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> pg_shadow;<br/></li>
<li><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> pg_policies <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; N.nspname <span class="Special">AS</span> schemaname,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; C.relname <span class="Special">AS</span> tablename,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; pol.polname <span class="Special">AS</span> policyname,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">CASE<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> pol.polpermissive <span class="Special">THEN<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">'</span><span class="Constant">PERMISSIVE</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">ELSE<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">'</span><span class="Constant">RESTRICTIVE</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">END</span> <span class="Special">AS</span> permissive,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">CASE<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> pol.polroles = <span class="Special">'</span><span class="Constant">{0}</span><span class="Special">'</span> <span class="Special">THEN<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; string_to_array(<span class="Special">'</span><span class="Constant">public</span><span class="Special">'</span>, <span class="Special">''</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">ELSE<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ARRAY<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">SELECT</span> rolname<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">FROM</span> pg_catalog.pg_authid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHERE</span> oid = <span class="Statement">ANY</span> (pol.polroles) <span class="Special">ORDER</span> <span class="Special">BY</span> <span class="Constant">1<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; )<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">END</span> <span class="Special">AS</span> roles,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">CASE</span> pol.polcmd<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> <span class="Special">'</span><span class="Constant">r</span><span class="Special">'</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">SELECT</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> <span class="Special">'</span><span class="Constant">a</span><span class="Special">'</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">INSERT</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> <span class="Special">'</span><span class="Constant">w</span><span class="Special">'</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">UPDATE</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> <span class="Special">'</span><span class="Constant">d</span><span class="Special">'</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">DELETE</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> <span class="Special">'</span><span class="Constant">*</span><span class="Special">'</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">ALL</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">END</span> <span class="Special">AS</span> cmd,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; pg_catalog.pg_get_expr(pol.polqual, pol.polrelid) <span class="Special">AS</span> qual,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; pg_catalog.pg_get_expr(pol.polwithcheck, pol.polrelid) <span class="Special">AS</span> with_check<br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> pg_catalog.pg_policy pol<br/></li>
<li>&nbsp; &nbsp; <span class="Special">JOIN</span> pg_catalog.pg_class C <span class="Special">ON</span> (C.oid = pol.polrelid)<br/></li>
<li>&nbsp; &nbsp; <span class="Special">LEFT</span> <span class="Special">JOIN</span> pg_catalog.pg_namespace N <span class="Special">ON</span> (N.oid = C.relnamespace);<br/></li>
<li><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> pg_rules <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; N.nspname <span class="Special">AS</span> schemaname,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; C.relname <span class="Special">AS</span> tablename,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; R.rulename <span class="Special">AS</span> rulename,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; pg_get_ruledef(R.oid) <span class="Special">AS</span> definition<br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> (pg_rewrite R <span class="Special">JOIN</span> pg_class C <span class="Special">ON</span> (C.oid = R.ev_class))<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">LEFT</span> <span class="Special">JOIN</span> pg_namespace N <span class="Special">ON</span> (N.oid = C.relnamespace)<br/></li>
<li>&nbsp; &nbsp; <span class="Special">WHERE</span> R.rulename != <span class="Special">'</span><span class="Constant">_RETURN</span><span class="Special">'</span>;<br/></li>
<li><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> pg_views <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; N.nspname <span class="Special">AS</span> schemaname,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; C.relname <span class="Special">AS</span> viewname,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; pg_get_userbyid(C.relowner) <span class="Special">AS</span> viewowner,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; pg_get_viewdef(C.oid) <span class="Special">AS</span> definition<br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> pg_class C <span class="Special">LEFT</span> <span class="Special">JOIN</span> pg_namespace N <span class="Special">ON</span> (N.oid = C.relnamespace)<br/></li>
<li>&nbsp; &nbsp; <span class="Special">WHERE</span> C.relkind = <span class="Special">'</span><span class="Constant">v</span><span class="Special">'</span>;<br/></li>
<li><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> pg_tables <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; N.nspname <span class="Special">AS</span> schemaname,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; C.relname <span class="Special">AS</span> tablename,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; pg_get_userbyid(C.relowner) <span class="Special">AS</span> tableowner,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; T.spcname <span class="Special">AS</span> <span class="Special">tablespace</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; C.relhasindex <span class="Special">AS</span> hasindexes,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; C.relhasrules <span class="Special">AS</span> hasrules,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; C.relhastriggers <span class="Special">AS</span> hastriggers,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; C.relrowsecurity <span class="Special">AS</span> rowsecurity<br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> pg_class C <span class="Special">LEFT</span> <span class="Special">JOIN</span> pg_namespace N <span class="Special">ON</span> (N.oid = C.relnamespace)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">LEFT</span> <span class="Special">JOIN</span> pg_tablespace T <span class="Special">ON</span> (T.oid = C.reltablespace)<br/></li>
<li>&nbsp; &nbsp; <span class="Special">WHERE</span> C.relkind <span class="Statement">IN</span> (<span class="Special">'</span><span class="Constant">r</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">p</span><span class="Special">'</span>);<br/></li>
<li><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> pg_matviews <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; N.nspname <span class="Special">AS</span> schemaname,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; C.relname <span class="Special">AS</span> matviewname,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; pg_get_userbyid(C.relowner) <span class="Special">AS</span> matviewowner,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; T.spcname <span class="Special">AS</span> <span class="Special">tablespace</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; C.relhasindex <span class="Special">AS</span> hasindexes,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; C.relispopulated <span class="Special">AS</span> ispopulated,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; pg_get_viewdef(C.oid) <span class="Special">AS</span> definition<br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> pg_class C <span class="Special">LEFT</span> <span class="Special">JOIN</span> pg_namespace N <span class="Special">ON</span> (N.oid = C.relnamespace)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">LEFT</span> <span class="Special">JOIN</span> pg_tablespace T <span class="Special">ON</span> (T.oid = C.reltablespace)<br/></li>
<li>&nbsp; &nbsp; <span class="Special">WHERE</span> C.relkind = <span class="Special">'</span><span class="Constant">m</span><span class="Special">'</span>;<br/></li>
<li><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> pg_indexes <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; N.nspname <span class="Special">AS</span> schemaname,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; C.relname <span class="Special">AS</span> tablename,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; I.relname <span class="Special">AS</span> indexname,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; T.spcname <span class="Special">AS</span> <span class="Special">tablespace</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; pg_get_indexdef(I.oid) <span class="Special">AS</span> indexdef<br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> pg_index X <span class="Special">JOIN</span> pg_class C <span class="Special">ON</span> (C.oid = X.indrelid)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">JOIN</span> pg_class I <span class="Special">ON</span> (I.oid = X.indexrelid)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">LEFT</span> <span class="Special">JOIN</span> pg_namespace N <span class="Special">ON</span> (N.oid = C.relnamespace)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">LEFT</span> <span class="Special">JOIN</span> pg_tablespace T <span class="Special">ON</span> (T.oid = I.reltablespace)<br/></li>
<li>&nbsp; &nbsp; <span class="Special">WHERE</span> C.relkind <span class="Statement">IN</span> (<span class="Special">'</span><span class="Constant">r</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">m</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">p</span><span class="Special">'</span>) <span class="Statement">AND</span> I.relkind <span class="Statement">IN</span> (<span class="Special">'</span><span class="Constant">i</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">I</span><span class="Special">'</span>);<br/></li>
<li><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> pg_sequences <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; N.nspname <span class="Special">AS</span> schemaname,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; C.relname <span class="Special">AS</span> sequencename,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; pg_get_userbyid(C.relowner) <span class="Special">AS</span> sequenceowner,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; S.seqtypid::regtype <span class="Special">AS</span> data_type,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; S.seqstart <span class="Special">AS</span> start_value,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; S.seqmin <span class="Special">AS</span> min_value,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; S.seqmax <span class="Special">AS</span> max_value,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; S.seqincrement <span class="Special">AS</span> increment_by,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; S.seqcycle <span class="Special">AS</span> cycle,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; S.seqcache <span class="Special">AS</span> cache_size,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">CASE<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> has_sequence_privilege(C.oid, <span class="Special">'</span><span class="Constant">SELECT,USAGE</span><span class="Special">'</span>::text)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">THEN</span> pg_sequence_last_value(C.oid)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">ELSE</span> <span class="Special">NULL<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">END</span> <span class="Special">AS</span> last_value<br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> pg_sequence S <span class="Special">JOIN</span> pg_class C <span class="Special">ON</span> (C.oid = S.seqrelid)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">LEFT</span> <span class="Special">JOIN</span> pg_namespace N <span class="Special">ON</span> (N.oid = C.relnamespace)<br/></li>
<li>&nbsp; &nbsp; <span class="Special">WHERE</span> <span class="Statement">NOT</span> pg_is_other_temp_schema(N.oid)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> relkind = <span class="Special">'</span><span class="Constant">S</span><span class="Special">'</span>;<br/></li>
<li><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> pg_stats <span class="Special">WITH</span> (security_barrier) <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; nspname <span class="Special">AS</span> schemaname,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; relname <span class="Special">AS</span> tablename,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; attname <span class="Special">AS</span> attname,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; stainherit <span class="Special">AS</span> inherited,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; stanullfrac <span class="Special">AS</span> null_frac,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; stawidth <span class="Special">AS</span> avg_width,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; stadistinct <span class="Special">AS</span> n_distinct,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">CASE<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> stakind1 = <span class="Constant">1</span> <span class="Special">THEN</span> stavalues1<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> stakind2 = <span class="Constant">1</span> <span class="Special">THEN</span> stavalues2<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> stakind3 = <span class="Constant">1</span> <span class="Special">THEN</span> stavalues3<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> stakind4 = <span class="Constant">1</span> <span class="Special">THEN</span> stavalues4<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> stakind5 = <span class="Constant">1</span> <span class="Special">THEN</span> stavalues5<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">END</span> <span class="Special">AS</span> most_common_vals,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">CASE<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> stakind1 = <span class="Constant">1</span> <span class="Special">THEN</span> stanumbers1<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> stakind2 = <span class="Constant">1</span> <span class="Special">THEN</span> stanumbers2<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> stakind3 = <span class="Constant">1</span> <span class="Special">THEN</span> stanumbers3<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> stakind4 = <span class="Constant">1</span> <span class="Special">THEN</span> stanumbers4<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> stakind5 = <span class="Constant">1</span> <span class="Special">THEN</span> stanumbers5<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">END</span> <span class="Special">AS</span> most_common_freqs,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">CASE<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> stakind1 = <span class="Constant">2</span> <span class="Special">THEN</span> stavalues1<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> stakind2 = <span class="Constant">2</span> <span class="Special">THEN</span> stavalues2<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> stakind3 = <span class="Constant">2</span> <span class="Special">THEN</span> stavalues3<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> stakind4 = <span class="Constant">2</span> <span class="Special">THEN</span> stavalues4<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> stakind5 = <span class="Constant">2</span> <span class="Special">THEN</span> stavalues5<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">END</span> <span class="Special">AS</span> histogram_bounds,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">CASE<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> stakind1 = <span class="Constant">3</span> <span class="Special">THEN</span> stanumbers1[<span class="Constant">1</span>]<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> stakind2 = <span class="Constant">3</span> <span class="Special">THEN</span> stanumbers2[<span class="Constant">1</span>]<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> stakind3 = <span class="Constant">3</span> <span class="Special">THEN</span> stanumbers3[<span class="Constant">1</span>]<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> stakind4 = <span class="Constant">3</span> <span class="Special">THEN</span> stanumbers4[<span class="Constant">1</span>]<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> stakind5 = <span class="Constant">3</span> <span class="Special">THEN</span> stanumbers5[<span class="Constant">1</span>]<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">END</span> <span class="Special">AS</span> correlation,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">CASE<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> stakind1 = <span class="Constant">4</span> <span class="Special">THEN</span> stavalues1<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> stakind2 = <span class="Constant">4</span> <span class="Special">THEN</span> stavalues2<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> stakind3 = <span class="Constant">4</span> <span class="Special">THEN</span> stavalues3<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> stakind4 = <span class="Constant">4</span> <span class="Special">THEN</span> stavalues4<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> stakind5 = <span class="Constant">4</span> <span class="Special">THEN</span> stavalues5<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">END</span> <span class="Special">AS</span> most_common_elems,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">CASE<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> stakind1 = <span class="Constant">4</span> <span class="Special">THEN</span> stanumbers1<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> stakind2 = <span class="Constant">4</span> <span class="Special">THEN</span> stanumbers2<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> stakind3 = <span class="Constant">4</span> <span class="Special">THEN</span> stanumbers3<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> stakind4 = <span class="Constant">4</span> <span class="Special">THEN</span> stanumbers4<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> stakind5 = <span class="Constant">4</span> <span class="Special">THEN</span> stanumbers5<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">END</span> <span class="Special">AS</span> most_common_elem_freqs,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">CASE<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> stakind1 = <span class="Constant">5</span> <span class="Special">THEN</span> stanumbers1<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> stakind2 = <span class="Constant">5</span> <span class="Special">THEN</span> stanumbers2<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> stakind3 = <span class="Constant">5</span> <span class="Special">THEN</span> stanumbers3<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> stakind4 = <span class="Constant">5</span> <span class="Special">THEN</span> stanumbers4<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> stakind5 = <span class="Constant">5</span> <span class="Special">THEN</span> stanumbers5<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">END</span> <span class="Special">AS</span> elem_count_histogram,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">CASE<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> stakind1 = <span class="Constant">6</span> <span class="Special">THEN</span> stavalues1<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> stakind2 = <span class="Constant">6</span> <span class="Special">THEN</span> stavalues2<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> stakind3 = <span class="Constant">6</span> <span class="Special">THEN</span> stavalues3<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> stakind4 = <span class="Constant">6</span> <span class="Special">THEN</span> stavalues4<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> stakind5 = <span class="Constant">6</span> <span class="Special">THEN</span> stavalues5<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">END</span> <span class="Special">AS</span> range_length_histogram,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">CASE<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> stakind1 = <span class="Constant">6</span> <span class="Special">THEN</span> stanumbers1[<span class="Constant">1</span>]<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> stakind2 = <span class="Constant">6</span> <span class="Special">THEN</span> stanumbers2[<span class="Constant">1</span>]<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> stakind3 = <span class="Constant">6</span> <span class="Special">THEN</span> stanumbers3[<span class="Constant">1</span>]<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> stakind4 = <span class="Constant">6</span> <span class="Special">THEN</span> stanumbers4[<span class="Constant">1</span>]<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> stakind5 = <span class="Constant">6</span> <span class="Special">THEN</span> stanumbers5[<span class="Constant">1</span>]<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">END</span> <span class="Special">AS</span> range_empty_frac,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">CASE<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> stakind1 = <span class="Constant">7</span> <span class="Special">THEN</span> stavalues1<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> stakind2 = <span class="Constant">7</span> <span class="Special">THEN</span> stavalues2<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> stakind3 = <span class="Constant">7</span> <span class="Special">THEN</span> stavalues3<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> stakind4 = <span class="Constant">7</span> <span class="Special">THEN</span> stavalues4<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> stakind5 = <span class="Constant">7</span> <span class="Special">THEN</span> stavalues5<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">END</span> <span class="Special">AS</span> range_bounds_histogram<br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> pg_statistic s <span class="Special">JOIN</span> pg_class c <span class="Special">ON</span> (c.oid = s.starelid)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">JOIN</span> pg_attribute a <span class="Special">ON</span> (c.oid = attrelid <span class="Statement">AND</span> attnum = s.staattnum)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">LEFT</span> <span class="Special">JOIN</span> pg_namespace n <span class="Special">ON</span> (n.oid = c.relnamespace)<br/></li>
<li>&nbsp; &nbsp; <span class="Special">WHERE</span> <span class="Statement">NOT</span> attisdropped<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">AND</span> has_column_privilege(c.oid, a.attnum, <span class="Special">'</span><span class="Constant">select</span><span class="Special">'</span>)<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">AND</span> (c.relrowsecurity = <span class="Special">false</span> <span class="Statement">OR</span> <span class="Statement">NOT</span> row_security_active(c.oid));<br/></li>
<li><br/></li>
<li><span class="Statement">REVOKE</span> <span class="Statement">ALL</span> <span class="Special">ON</span> pg_statistic <span class="Special">FROM</span> <span class="Special">public</span>;<br/></li>
<li><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> pg_stats_ext <span class="Special">WITH</span> (security_barrier) <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT</span> cn.nspname <span class="Special">AS</span> schemaname,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; c.relname <span class="Special">AS</span> tablename,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; sn.nspname <span class="Special">AS</span> statistics_schemaname,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; s.stxname <span class="Special">AS</span> statistics_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; pg_get_userbyid(s.stxowner) <span class="Special">AS</span> statistics_owner,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ( <span class="Statement">SELECT</span> array_agg(a.attname <span class="Special">ORDER</span> <span class="Special">BY</span> a.attnum)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">FROM</span> unnest(s.stxkeys) k<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">JOIN</span> pg_attribute a<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">ON</span> (a.attrelid = s.stxrelid <span class="Statement">AND</span> a.attnum = k)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ) <span class="Special">AS</span> attnames,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; pg_get_statisticsobjdef_expressions(s.oid) <span class="Special">as</span> exprs,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; s.stxkind <span class="Special">AS</span> kinds,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; sd.stxdinherit <span class="Special">AS</span> inherited,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; sd.stxdndistinct <span class="Special">AS</span> n_distinct,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; sd.stxddependencies <span class="Special">AS</span> dependencies,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; m.most_common_vals,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; m.most_common_val_nulls,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; m.most_common_freqs,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; m.most_common_base_freqs<br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> pg_statistic_ext s <span class="Special">JOIN</span> pg_class c <span class="Special">ON</span> (c.oid = s.stxrelid)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">JOIN</span> pg_statistic_ext_data sd <span class="Special">ON</span> (s.oid = sd.stxoid)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">LEFT</span> <span class="Special">JOIN</span> pg_namespace cn <span class="Special">ON</span> (cn.oid = c.relnamespace)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">LEFT</span> <span class="Special">JOIN</span> pg_namespace sn <span class="Special">ON</span> (sn.oid = s.stxnamespace)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">LEFT</span> <span class="Special">JOIN</span> LATERAL<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ( <span class="Statement">SELECT</span> array_agg(<span class="Special">values</span>) <span class="Special">AS</span> most_common_vals,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; array_agg(nulls) <span class="Special">AS</span> most_common_val_nulls,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; array_agg(frequency) <span class="Special">AS</span> most_common_freqs,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; array_agg(base_frequency) <span class="Special">AS</span> most_common_base_freqs<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">FROM</span> pg_mcv_list_items(sd.stxdmcv)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ) m <span class="Special">ON</span> sd.stxdmcv <span class="Special">IS</span> <span class="Statement">NOT</span> <span class="Special">NULL<br/></li>
<li></span>&nbsp; &nbsp; <span class="Special">WHERE</span> <span class="Statement">NOT</span> <span class="Statement">EXISTS<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ( <span class="Statement">SELECT</span> <span class="Constant">1<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">FROM</span> unnest(stxkeys) k<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">JOIN</span> pg_attribute a<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">ON</span> (a.attrelid = s.stxrelid <span class="Statement">AND</span> a.attnum = k)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHERE</span> <span class="Statement">NOT</span> has_column_privilege(c.oid, a.attnum, <span class="Special">'</span><span class="Constant">select</span><span class="Special">'</span>) )<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">AND</span> (c.relrowsecurity = <span class="Special">false</span> <span class="Statement">OR</span> <span class="Statement">NOT</span> row_security_active(c.oid));<br/></li>
<li><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> pg_stats_ext_exprs <span class="Special">WITH</span> (security_barrier) <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT</span> cn.nspname <span class="Special">AS</span> schemaname,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; c.relname <span class="Special">AS</span> tablename,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; sn.nspname <span class="Special">AS</span> statistics_schemaname,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; s.stxname <span class="Special">AS</span> statistics_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; pg_get_userbyid(s.stxowner) <span class="Special">AS</span> statistics_owner,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; stat.expr,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; sd.stxdinherit <span class="Special">AS</span> inherited,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; (stat.a).stanullfrac <span class="Special">AS</span> null_frac,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; (stat.a).stawidth <span class="Special">AS</span> avg_width,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; (stat.a).stadistinct <span class="Special">AS</span> n_distinct,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; (<span class="Special">CASE<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">WHEN</span> (stat.a).stakind1 = <span class="Constant">1</span> <span class="Special">THEN</span> (stat.a).stavalues1<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">WHEN</span> (stat.a).stakind2 = <span class="Constant">1</span> <span class="Special">THEN</span> (stat.a).stavalues2<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">WHEN</span> (stat.a).stakind3 = <span class="Constant">1</span> <span class="Special">THEN</span> (stat.a).stavalues3<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">WHEN</span> (stat.a).stakind4 = <span class="Constant">1</span> <span class="Special">THEN</span> (stat.a).stavalues4<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">WHEN</span> (stat.a).stakind5 = <span class="Constant">1</span> <span class="Special">THEN</span> (stat.a).stavalues5<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">END</span>) <span class="Special">AS</span> most_common_vals,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; (<span class="Special">CASE<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">WHEN</span> (stat.a).stakind1 = <span class="Constant">1</span> <span class="Special">THEN</span> (stat.a).stanumbers1<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">WHEN</span> (stat.a).stakind2 = <span class="Constant">1</span> <span class="Special">THEN</span> (stat.a).stanumbers2<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">WHEN</span> (stat.a).stakind3 = <span class="Constant">1</span> <span class="Special">THEN</span> (stat.a).stanumbers3<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">WHEN</span> (stat.a).stakind4 = <span class="Constant">1</span> <span class="Special">THEN</span> (stat.a).stanumbers4<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">WHEN</span> (stat.a).stakind5 = <span class="Constant">1</span> <span class="Special">THEN</span> (stat.a).stanumbers5<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">END</span>) <span class="Special">AS</span> most_common_freqs,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; (<span class="Special">CASE<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">WHEN</span> (stat.a).stakind1 = <span class="Constant">2</span> <span class="Special">THEN</span> (stat.a).stavalues1<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">WHEN</span> (stat.a).stakind2 = <span class="Constant">2</span> <span class="Special">THEN</span> (stat.a).stavalues2<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">WHEN</span> (stat.a).stakind3 = <span class="Constant">2</span> <span class="Special">THEN</span> (stat.a).stavalues3<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">WHEN</span> (stat.a).stakind4 = <span class="Constant">2</span> <span class="Special">THEN</span> (stat.a).stavalues4<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">WHEN</span> (stat.a).stakind5 = <span class="Constant">2</span> <span class="Special">THEN</span> (stat.a).stavalues5<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">END</span>) <span class="Special">AS</span> histogram_bounds,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; (<span class="Special">CASE<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">WHEN</span> (stat.a).stakind1 = <span class="Constant">3</span> <span class="Special">THEN</span> (stat.a).stanumbers1[<span class="Constant">1</span>]<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">WHEN</span> (stat.a).stakind2 = <span class="Constant">3</span> <span class="Special">THEN</span> (stat.a).stanumbers2[<span class="Constant">1</span>]<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">WHEN</span> (stat.a).stakind3 = <span class="Constant">3</span> <span class="Special">THEN</span> (stat.a).stanumbers3[<span class="Constant">1</span>]<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">WHEN</span> (stat.a).stakind4 = <span class="Constant">3</span> <span class="Special">THEN</span> (stat.a).stanumbers4[<span class="Constant">1</span>]<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">WHEN</span> (stat.a).stakind5 = <span class="Constant">3</span> <span class="Special">THEN</span> (stat.a).stanumbers5[<span class="Constant">1</span>]<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">END</span>) correlation,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; (<span class="Special">CASE<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">WHEN</span> (stat.a).stakind1 = <span class="Constant">4</span> <span class="Special">THEN</span> (stat.a).stavalues1<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">WHEN</span> (stat.a).stakind2 = <span class="Constant">4</span> <span class="Special">THEN</span> (stat.a).stavalues2<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">WHEN</span> (stat.a).stakind3 = <span class="Constant">4</span> <span class="Special">THEN</span> (stat.a).stavalues3<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">WHEN</span> (stat.a).stakind4 = <span class="Constant">4</span> <span class="Special">THEN</span> (stat.a).stavalues4<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">WHEN</span> (stat.a).stakind5 = <span class="Constant">4</span> <span class="Special">THEN</span> (stat.a).stavalues5<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">END</span>) <span class="Special">AS</span> most_common_elems,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; (<span class="Special">CASE<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">WHEN</span> (stat.a).stakind1 = <span class="Constant">4</span> <span class="Special">THEN</span> (stat.a).stanumbers1<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">WHEN</span> (stat.a).stakind2 = <span class="Constant">4</span> <span class="Special">THEN</span> (stat.a).stanumbers2<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">WHEN</span> (stat.a).stakind3 = <span class="Constant">4</span> <span class="Special">THEN</span> (stat.a).stanumbers3<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">WHEN</span> (stat.a).stakind4 = <span class="Constant">4</span> <span class="Special">THEN</span> (stat.a).stanumbers4<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">WHEN</span> (stat.a).stakind5 = <span class="Constant">4</span> <span class="Special">THEN</span> (stat.a).stanumbers5<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">END</span>) <span class="Special">AS</span> most_common_elem_freqs,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; (<span class="Special">CASE<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">WHEN</span> (stat.a).stakind1 = <span class="Constant">5</span> <span class="Special">THEN</span> (stat.a).stanumbers1<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">WHEN</span> (stat.a).stakind2 = <span class="Constant">5</span> <span class="Special">THEN</span> (stat.a).stanumbers2<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">WHEN</span> (stat.a).stakind3 = <span class="Constant">5</span> <span class="Special">THEN</span> (stat.a).stanumbers3<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">WHEN</span> (stat.a).stakind4 = <span class="Constant">5</span> <span class="Special">THEN</span> (stat.a).stanumbers4<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">WHEN</span> (stat.a).stakind5 = <span class="Constant">5</span> <span class="Special">THEN</span> (stat.a).stanumbers5<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">END</span>) <span class="Special">AS</span> elem_count_histogram<br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> pg_statistic_ext s <span class="Special">JOIN</span> pg_class c <span class="Special">ON</span> (c.oid = s.stxrelid)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">LEFT</span> <span class="Special">JOIN</span> pg_statistic_ext_data sd <span class="Special">ON</span> (s.oid = sd.stxoid)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">LEFT</span> <span class="Special">JOIN</span> pg_namespace cn <span class="Special">ON</span> (cn.oid = c.relnamespace)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">LEFT</span> <span class="Special">JOIN</span> pg_namespace sn <span class="Special">ON</span> (sn.oid = s.stxnamespace)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">JOIN</span> LATERAL (<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">SELECT</span> unnest(pg_get_statisticsobjdef_expressions(s.oid)) <span class="Special">AS</span> expr,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; unnest(sd.stxdexpr)::pg_statistic <span class="Special">AS</span> a<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ) stat <span class="Special">ON</span> (stat.expr <span class="Special">IS</span> <span class="Statement">NOT</span> <span class="Special">NULL</span>);<br/></li>
<li><br/></li>
<li><span class="Comment">-- unprivileged users may read pg_statistic_ext but not pg_statistic_ext_data<br/></li>
<li></span><span class="Statement">REVOKE</span> <span class="Statement">ALL</span> <span class="Special">ON</span> pg_statistic_ext_data <span class="Special">FROM</span> <span class="Special">public</span>;<br/></li>
<li><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> pg_publication_tables <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; P.pubname <span class="Special">AS</span> pubname,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; N.nspname <span class="Special">AS</span> schemaname,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; C.relname <span class="Special">AS</span> tablename,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; ( <span class="Statement">SELECT</span> array_agg(a.attname <span class="Special">ORDER</span> <span class="Special">BY</span> a.attnum)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">FROM</span> pg_attribute a<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHERE</span> a.attrelid = GPT.relid <span class="Statement">AND<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; a.attnum = <span class="Statement">ANY</span>(GPT.attrs)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; ) <span class="Special">AS</span> attnames,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; pg_get_expr(GPT.qual, GPT.relid) <span class="Special">AS</span> rowfilter<br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> pg_publication P,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; LATERAL pg_get_publication_tables(P.pubname) GPT,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; pg_class C <span class="Special">JOIN</span> pg_namespace N <span class="Special">ON</span> (N.oid = C.relnamespace)<br/></li>
<li>&nbsp; &nbsp; <span class="Special">WHERE</span> C.oid = GPT.relid;<br/></li>
<li><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> pg_locks <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT</span> * <span class="Special">FROM</span> pg_lock_status() <span class="Special">AS</span> L;<br/></li>
<li><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> pg_cursors <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT</span> * <span class="Special">FROM</span> pg_cursor() <span class="Special">AS</span> C;<br/></li>
<li><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> pg_available_extensions <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT</span> E.name, E.default_version, X.extversion <span class="Special">AS</span> installed_version,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; E.<span class="Statement">comment<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Special">FROM</span> pg_available_extensions() <span class="Special">AS</span> E<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">LEFT</span> <span class="Special">JOIN</span> pg_extension <span class="Special">AS</span> X <span class="Special">ON</span> E.name = X.extname;<br/></li>
<li><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> pg_available_extension_versions <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT</span> E.name, E.version, (X.extname <span class="Special">IS</span> <span class="Statement">NOT</span> <span class="Special">NULL</span>) <span class="Special">AS</span> installed,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; E.superuser, E.trusted, E.relocatable,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; E.schema, E.requires, E.<span class="Statement">comment<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Special">FROM</span> pg_available_extension_versions() <span class="Special">AS</span> E<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">LEFT</span> <span class="Special">JOIN</span> pg_extension <span class="Special">AS</span> X<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">ON</span> E.name = X.extname <span class="Statement">AND</span> E.version = X.extversion;<br/></li>
<li><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> pg_prepared_xacts <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT</span> P.transaction, P.gid, P.prepared,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; U.rolname <span class="Special">AS</span> owner, D.datname <span class="Special">AS</span> database<br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> pg_prepared_xact() <span class="Special">AS</span> P<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">LEFT</span> <span class="Special">JOIN</span> pg_authid U <span class="Special">ON</span> P.ownerid = U.oid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">LEFT</span> <span class="Special">JOIN</span> pg_database D <span class="Special">ON</span> P.dbid = D.oid;<br/></li>
<li><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> pg_prepared_statements <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT</span> * <span class="Special">FROM</span> pg_prepared_statement() <span class="Special">AS</span> P;<br/></li>
<li><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> pg_seclabels <span class="Special">AS<br/></li>
<li></span><span class="Statement">SELECT<br/></li>
<li></span>&nbsp; &nbsp; l.objoid, l.classoid, l.objsubid,<br/></li>
<li>&nbsp; &nbsp; <span class="Special">CASE</span> <span class="Special">WHEN</span> rel.relkind <span class="Statement">IN</span> (<span class="Special">'</span><span class="Constant">r</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">p</span><span class="Special">'</span>) <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">table</span><span class="Special">'</span>::text<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">WHEN</span> rel.relkind = <span class="Special">'</span><span class="Constant">v</span><span class="Special">'</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">view</span><span class="Special">'</span>::text<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">WHEN</span> rel.relkind = <span class="Special">'</span><span class="Constant">m</span><span class="Special">'</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">materialized view</span><span class="Special">'</span>::text<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">WHEN</span> rel.relkind = <span class="Special">'</span><span class="Constant">S</span><span class="Special">'</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">sequence</span><span class="Special">'</span>::text<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">WHEN</span> rel.relkind = <span class="Special">'</span><span class="Constant">f</span><span class="Special">'</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">foreign table</span><span class="Special">'</span>::text <span class="Special">END</span> <span class="Special">AS</span> objtype,<br/></li>
<li>&nbsp; &nbsp; rel.relnamespace <span class="Special">AS</span> objnamespace,<br/></li>
<li>&nbsp; &nbsp; <span class="Special">CASE</span> <span class="Special">WHEN</span> pg_table_is_visible(rel.oid)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">THEN</span> quote_ident(rel.relname)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">ELSE</span> quote_ident(nsp.nspname) || <span class="Special">'</span><span class="Constant">.</span><span class="Special">'</span> || quote_ident(rel.relname)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">END</span> <span class="Special">AS</span> objname,<br/></li>
<li>&nbsp; &nbsp; l.provider, l.label<br/></li>
<li><span class="Special">FROM<br/></li>
<li></span>&nbsp; &nbsp; pg_seclabel l<br/></li>
<li>&nbsp; &nbsp; <span class="Special">JOIN</span> pg_class rel <span class="Special">ON</span> l.classoid = rel.tableoid <span class="Statement">AND</span> l.objoid = rel.oid<br/></li>
<li>&nbsp; &nbsp; <span class="Special">JOIN</span> pg_namespace nsp <span class="Special">ON</span> rel.relnamespace = nsp.oid<br/></li>
<li><span class="Special">WHERE<br/></li>
<li></span>&nbsp; &nbsp; l.objsubid = <span class="Constant">0<br/></li>
<li></span><span class="Statement">UNION</span> <span class="Statement">ALL<br/></li>
<li></span><span class="Statement">SELECT<br/></li>
<li></span>&nbsp; &nbsp; l.objoid, l.classoid, l.objsubid,<br/></li>
<li>&nbsp; &nbsp; <span class="Special">'</span><span class="Constant">column</span><span class="Special">'</span>::text <span class="Special">AS</span> objtype,<br/></li>
<li>&nbsp; &nbsp; rel.relnamespace <span class="Special">AS</span> objnamespace,<br/></li>
<li>&nbsp; &nbsp; <span class="Special">CASE</span> <span class="Special">WHEN</span> pg_table_is_visible(rel.oid)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">THEN</span> quote_ident(rel.relname)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">ELSE</span> quote_ident(nsp.nspname) || <span class="Special">'</span><span class="Constant">.</span><span class="Special">'</span> || quote_ident(rel.relname)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">END</span> || <span class="Special">'</span><span class="Constant">.</span><span class="Special">'</span> || att.attname <span class="Special">AS</span> objname,<br/></li>
<li>&nbsp; &nbsp; l.provider, l.label<br/></li>
<li><span class="Special">FROM<br/></li>
<li></span>&nbsp; &nbsp; pg_seclabel l<br/></li>
<li>&nbsp; &nbsp; <span class="Special">JOIN</span> pg_class rel <span class="Special">ON</span> l.classoid = rel.tableoid <span class="Statement">AND</span> l.objoid = rel.oid<br/></li>
<li>&nbsp; &nbsp; <span class="Special">JOIN</span> pg_attribute att<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">ON</span> rel.oid = att.attrelid <span class="Statement">AND</span> l.objsubid = att.attnum<br/></li>
<li>&nbsp; &nbsp; <span class="Special">JOIN</span> pg_namespace nsp <span class="Special">ON</span> rel.relnamespace = nsp.oid<br/></li>
<li><span class="Special">WHERE<br/></li>
<li></span>&nbsp; &nbsp; l.objsubid != <span class="Constant">0<br/></li>
<li></span><span class="Statement">UNION</span> <span class="Statement">ALL<br/></li>
<li></span><span class="Statement">SELECT<br/></li>
<li></span>&nbsp; &nbsp; l.objoid, l.classoid, l.objsubid,<br/></li>
<li>&nbsp; &nbsp; <span class="Special">CASE</span> pro.prokind<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> <span class="Special">'</span><span class="Constant">a</span><span class="Special">'</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">aggregate</span><span class="Special">'</span>::text<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> <span class="Special">'</span><span class="Constant">f</span><span class="Special">'</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">function</span><span class="Special">'</span>::text<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> <span class="Special">'</span><span class="Constant">p</span><span class="Special">'</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">procedure</span><span class="Special">'</span>::text<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> <span class="Special">'</span><span class="Constant">w</span><span class="Special">'</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">window</span><span class="Special">'</span>::text <span class="Special">END</span> <span class="Special">AS</span> objtype,<br/></li>
<li>&nbsp; &nbsp; pro.pronamespace <span class="Special">AS</span> objnamespace,<br/></li>
<li>&nbsp; &nbsp; <span class="Special">CASE</span> <span class="Special">WHEN</span> pg_function_is_visible(pro.oid)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">THEN</span> quote_ident(pro.proname)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">ELSE</span> quote_ident(nsp.nspname) || <span class="Special">'</span><span class="Constant">.</span><span class="Special">'</span> || quote_ident(pro.proname)<br/></li>
<li>&nbsp; &nbsp; <span class="Special">END</span> || <span class="Special">'</span><span class="Constant">(</span><span class="Special">'</span> || pg_catalog.pg_get_function_arguments(pro.oid) || <span class="Special">'</span><span class="Constant">)</span><span class="Special">'</span> <span class="Special">AS</span> objname,<br/></li>
<li>&nbsp; &nbsp; l.provider, l.label<br/></li>
<li><span class="Special">FROM<br/></li>
<li></span>&nbsp; &nbsp; pg_seclabel l<br/></li>
<li>&nbsp; &nbsp; <span class="Special">JOIN</span> pg_proc pro <span class="Special">ON</span> l.classoid = pro.tableoid <span class="Statement">AND</span> l.objoid = pro.oid<br/></li>
<li>&nbsp; &nbsp; <span class="Special">JOIN</span> pg_namespace nsp <span class="Special">ON</span> pro.pronamespace = nsp.oid<br/></li>
<li><span class="Special">WHERE<br/></li>
<li></span>&nbsp; &nbsp; l.objsubid = <span class="Constant">0<br/></li>
<li></span><span class="Statement">UNION</span> <span class="Statement">ALL<br/></li>
<li></span><span class="Statement">SELECT<br/></li>
<li></span>&nbsp; &nbsp; l.objoid, l.classoid, l.objsubid,<br/></li>
<li>&nbsp; &nbsp; <span class="Special">CASE</span> <span class="Special">WHEN</span> typ.typtype = <span class="Special">'</span><span class="Constant">d</span><span class="Special">'</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">domain</span><span class="Special">'</span>::text<br/></li>
<li>&nbsp; &nbsp; <span class="Special">ELSE</span> <span class="Special">'</span><span class="Constant">type</span><span class="Special">'</span>::text <span class="Special">END</span> <span class="Special">AS</span> objtype,<br/></li>
<li>&nbsp; &nbsp; typ.typnamespace <span class="Special">AS</span> objnamespace,<br/></li>
<li>&nbsp; &nbsp; <span class="Special">CASE</span> <span class="Special">WHEN</span> pg_type_is_visible(typ.oid)<br/></li>
<li>&nbsp; &nbsp; <span class="Special">THEN</span> quote_ident(typ.typname)<br/></li>
<li>&nbsp; &nbsp; <span class="Special">ELSE</span> quote_ident(nsp.nspname) || <span class="Special">'</span><span class="Constant">.</span><span class="Special">'</span> || quote_ident(typ.typname)<br/></li>
<li>&nbsp; &nbsp; <span class="Special">END</span> <span class="Special">AS</span> objname,<br/></li>
<li>&nbsp; &nbsp; l.provider, l.label<br/></li>
<li><span class="Special">FROM<br/></li>
<li></span>&nbsp; &nbsp; pg_seclabel l<br/></li>
<li>&nbsp; &nbsp; <span class="Special">JOIN</span> pg_type typ <span class="Special">ON</span> l.classoid = typ.tableoid <span class="Statement">AND</span> l.objoid = typ.oid<br/></li>
<li>&nbsp; &nbsp; <span class="Special">JOIN</span> pg_namespace nsp <span class="Special">ON</span> typ.typnamespace = nsp.oid<br/></li>
<li><span class="Special">WHERE<br/></li>
<li></span>&nbsp; &nbsp; l.objsubid = <span class="Constant">0<br/></li>
<li></span><span class="Statement">UNION</span> <span class="Statement">ALL<br/></li>
<li></span><span class="Statement">SELECT<br/></li>
<li></span>&nbsp; &nbsp; l.objoid, l.classoid, l.objsubid,<br/></li>
<li>&nbsp; &nbsp; <span class="Special">'</span><span class="Constant">large object</span><span class="Special">'</span>::text <span class="Special">AS</span> objtype,<br/></li>
<li>&nbsp; &nbsp; <span class="Special">NULL</span>::oid <span class="Special">AS</span> objnamespace,<br/></li>
<li>&nbsp; &nbsp; l.objoid::text <span class="Special">AS</span> objname,<br/></li>
<li>&nbsp; &nbsp; l.provider, l.label<br/></li>
<li><span class="Special">FROM<br/></li>
<li></span>&nbsp; &nbsp; pg_seclabel l<br/></li>
<li>&nbsp; &nbsp; <span class="Special">JOIN</span> pg_largeobject_metadata lom <span class="Special">ON</span> l.objoid = lom.oid<br/></li>
<li><span class="Special">WHERE<br/></li>
<li></span>&nbsp; &nbsp; l.classoid = <span class="Special">'</span><span class="Constant">pg_catalog.pg_largeobject</span><span class="Special">'</span>::regclass <span class="Statement">AND</span> l.objsubid = <span class="Constant">0<br/></li>
<li></span><span class="Statement">UNION</span> <span class="Statement">ALL<br/></li>
<li></span><span class="Statement">SELECT<br/></li>
<li></span>&nbsp; &nbsp; l.objoid, l.classoid, l.objsubid,<br/></li>
<li>&nbsp; &nbsp; <span class="Special">'</span><span class="Constant">language</span><span class="Special">'</span>::text <span class="Special">AS</span> objtype,<br/></li>
<li>&nbsp; &nbsp; <span class="Special">NULL</span>::oid <span class="Special">AS</span> objnamespace,<br/></li>
<li>&nbsp; &nbsp; quote_ident(lan.lanname) <span class="Special">AS</span> objname,<br/></li>
<li>&nbsp; &nbsp; l.provider, l.label<br/></li>
<li><span class="Special">FROM<br/></li>
<li></span>&nbsp; &nbsp; pg_seclabel l<br/></li>
<li>&nbsp; &nbsp; <span class="Special">JOIN</span> pg_language lan <span class="Special">ON</span> l.classoid = lan.tableoid <span class="Statement">AND</span> l.objoid = lan.oid<br/></li>
<li><span class="Special">WHERE<br/></li>
<li></span>&nbsp; &nbsp; l.objsubid = <span class="Constant">0<br/></li>
<li></span><span class="Statement">UNION</span> <span class="Statement">ALL<br/></li>
<li></span><span class="Statement">SELECT<br/></li>
<li></span>&nbsp; &nbsp; l.objoid, l.classoid, l.objsubid,<br/></li>
<li>&nbsp; &nbsp; <span class="Special">'</span><span class="Constant">schema</span><span class="Special">'</span>::text <span class="Special">AS</span> objtype,<br/></li>
<li>&nbsp; &nbsp; nsp.oid <span class="Special">AS</span> objnamespace,<br/></li>
<li>&nbsp; &nbsp; quote_ident(nsp.nspname) <span class="Special">AS</span> objname,<br/></li>
<li>&nbsp; &nbsp; l.provider, l.label<br/></li>
<li><span class="Special">FROM<br/></li>
<li></span>&nbsp; &nbsp; pg_seclabel l<br/></li>
<li>&nbsp; &nbsp; <span class="Special">JOIN</span> pg_namespace nsp <span class="Special">ON</span> l.classoid = nsp.tableoid <span class="Statement">AND</span> l.objoid = nsp.oid<br/></li>
<li><span class="Special">WHERE<br/></li>
<li></span>&nbsp; &nbsp; l.objsubid = <span class="Constant">0<br/></li>
<li></span><span class="Statement">UNION</span> <span class="Statement">ALL<br/></li>
<li></span><span class="Statement">SELECT<br/></li>
<li></span>&nbsp; &nbsp; l.objoid, l.classoid, l.objsubid,<br/></li>
<li>&nbsp; &nbsp; <span class="Special">'</span><span class="Constant">event trigger</span><span class="Special">'</span>::text <span class="Special">AS</span> objtype,<br/></li>
<li>&nbsp; &nbsp; <span class="Special">NULL</span>::oid <span class="Special">AS</span> objnamespace,<br/></li>
<li>&nbsp; &nbsp; quote_ident(evt.evtname) <span class="Special">AS</span> objname,<br/></li>
<li>&nbsp; &nbsp; l.provider, l.label<br/></li>
<li><span class="Special">FROM<br/></li>
<li></span>&nbsp; &nbsp; pg_seclabel l<br/></li>
<li>&nbsp; &nbsp; <span class="Special">JOIN</span> pg_event_trigger evt <span class="Special">ON</span> l.classoid = evt.tableoid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> l.objoid = evt.oid<br/></li>
<li><span class="Special">WHERE<br/></li>
<li></span>&nbsp; &nbsp; l.objsubid = <span class="Constant">0<br/></li>
<li></span><span class="Statement">UNION</span> <span class="Statement">ALL<br/></li>
<li></span><span class="Statement">SELECT<br/></li>
<li></span>&nbsp; &nbsp; l.objoid, l.classoid, l.objsubid,<br/></li>
<li>&nbsp; &nbsp; <span class="Special">'</span><span class="Constant">publication</span><span class="Special">'</span>::text <span class="Special">AS</span> objtype,<br/></li>
<li>&nbsp; &nbsp; <span class="Special">NULL</span>::oid <span class="Special">AS</span> objnamespace,<br/></li>
<li>&nbsp; &nbsp; quote_ident(p.pubname) <span class="Special">AS</span> objname,<br/></li>
<li>&nbsp; &nbsp; l.provider, l.label<br/></li>
<li><span class="Special">FROM<br/></li>
<li></span>&nbsp; &nbsp; pg_seclabel l<br/></li>
<li>&nbsp; &nbsp; <span class="Special">JOIN</span> pg_publication p <span class="Special">ON</span> l.classoid = p.tableoid <span class="Statement">AND</span> l.objoid = p.oid<br/></li>
<li><span class="Special">WHERE<br/></li>
<li></span>&nbsp; &nbsp; l.objsubid = <span class="Constant">0<br/></li>
<li></span><span class="Statement">UNION</span> <span class="Statement">ALL<br/></li>
<li></span><span class="Statement">SELECT<br/></li>
<li></span>&nbsp; &nbsp; l.objoid, l.classoid, <span class="Constant">0</span>::int4 <span class="Special">AS</span> objsubid,<br/></li>
<li>&nbsp; &nbsp; <span class="Special">'</span><span class="Constant">subscription</span><span class="Special">'</span>::text <span class="Special">AS</span> objtype,<br/></li>
<li>&nbsp; &nbsp; <span class="Special">NULL</span>::oid <span class="Special">AS</span> objnamespace,<br/></li>
<li>&nbsp; &nbsp; quote_ident(s.subname) <span class="Special">AS</span> objname,<br/></li>
<li>&nbsp; &nbsp; l.provider, l.label<br/></li>
<li><span class="Special">FROM<br/></li>
<li></span>&nbsp; &nbsp; pg_shseclabel l<br/></li>
<li>&nbsp; &nbsp; <span class="Special">JOIN</span> pg_subscription s <span class="Special">ON</span> l.classoid = s.tableoid <span class="Statement">AND</span> l.objoid = s.oid<br/></li>
<li><span class="Statement">UNION</span> <span class="Statement">ALL<br/></li>
<li></span><span class="Statement">SELECT<br/></li>
<li></span>&nbsp; &nbsp; l.objoid, l.classoid, <span class="Constant">0</span>::int4 <span class="Special">AS</span> objsubid,<br/></li>
<li>&nbsp; &nbsp; <span class="Special">'</span><span class="Constant">database</span><span class="Special">'</span>::text <span class="Special">AS</span> objtype,<br/></li>
<li>&nbsp; &nbsp; <span class="Special">NULL</span>::oid <span class="Special">AS</span> objnamespace,<br/></li>
<li>&nbsp; &nbsp; quote_ident(dat.datname) <span class="Special">AS</span> objname,<br/></li>
<li>&nbsp; &nbsp; l.provider, l.label<br/></li>
<li><span class="Special">FROM<br/></li>
<li></span>&nbsp; &nbsp; pg_shseclabel l<br/></li>
<li>&nbsp; &nbsp; <span class="Special">JOIN</span> pg_database dat <span class="Special">ON</span> l.classoid = dat.tableoid <span class="Statement">AND</span> l.objoid = dat.oid<br/></li>
<li><span class="Statement">UNION</span> <span class="Statement">ALL<br/></li>
<li></span><span class="Statement">SELECT<br/></li>
<li></span>&nbsp; &nbsp; l.objoid, l.classoid, <span class="Constant">0</span>::int4 <span class="Special">AS</span> objsubid,<br/></li>
<li>&nbsp; &nbsp; <span class="Special">'</span><span class="Constant">tablespace</span><span class="Special">'</span>::text <span class="Special">AS</span> objtype,<br/></li>
<li>&nbsp; &nbsp; <span class="Special">NULL</span>::oid <span class="Special">AS</span> objnamespace,<br/></li>
<li>&nbsp; &nbsp; quote_ident(spc.spcname) <span class="Special">AS</span> objname,<br/></li>
<li>&nbsp; &nbsp; l.provider, l.label<br/></li>
<li><span class="Special">FROM<br/></li>
<li></span>&nbsp; &nbsp; pg_shseclabel l<br/></li>
<li>&nbsp; &nbsp; <span class="Special">JOIN</span> pg_tablespace spc <span class="Special">ON</span> l.classoid = spc.tableoid <span class="Statement">AND</span> l.objoid = spc.oid<br/></li>
<li><span class="Statement">UNION</span> <span class="Statement">ALL<br/></li>
<li></span><span class="Statement">SELECT<br/></li>
<li></span>&nbsp; &nbsp; l.objoid, l.classoid, <span class="Constant">0</span>::int4 <span class="Special">AS</span> objsubid,<br/></li>
<li>&nbsp; &nbsp; <span class="Special">'</span><span class="Constant">role</span><span class="Special">'</span>::text <span class="Special">AS</span> objtype,<br/></li>
<li>&nbsp; &nbsp; <span class="Special">NULL</span>::oid <span class="Special">AS</span> objnamespace,<br/></li>
<li>&nbsp; &nbsp; quote_ident(rol.rolname) <span class="Special">AS</span> objname,<br/></li>
<li>&nbsp; &nbsp; l.provider, l.label<br/></li>
<li><span class="Special">FROM<br/></li>
<li></span>&nbsp; &nbsp; pg_shseclabel l<br/></li>
<li>&nbsp; &nbsp; <span class="Special">JOIN</span> pg_authid rol <span class="Special">ON</span> l.classoid = rol.tableoid <span class="Statement">AND</span> l.objoid = rol.oid;<br/></li>
<li><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> pg_settings <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT</span> * <span class="Special">FROM</span> pg_show_all_settings() <span class="Special">AS</span> A;<br/></li>
<li><br/></li>
<li><span class="Statement">CREATE</span> RULE pg_settings_u <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Special">ON</span> <span class="Statement">UPDATE</span> <span class="Special">TO</span> pg_settings<br/></li>
<li>&nbsp; &nbsp; <span class="Special">WHERE</span> new.name = old.name DO<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">SELECT</span> set_config(old.name, new.setting, <span class="Special">'</span><span class="Constant">f</span><span class="Special">'</span>);<br/></li>
<li><br/></li>
<li><span class="Statement">CREATE</span> RULE pg_settings_n <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Special">ON</span> <span class="Statement">UPDATE</span> <span class="Special">TO</span> pg_settings<br/></li>
<li>&nbsp; &nbsp; DO INSTEAD NOTHING;<br/></li>
<li><br/></li>
<li><span class="Statement">GRANT</span> SELECT, UPDATE <span class="Special">ON</span> pg_settings <span class="Special">TO</span> <span class="Special">PUBLIC</span>;<br/></li>
<li><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> pg_file_settings <span class="Special">AS<br/></li>
<li></span>&nbsp;&nbsp; <span class="Statement">SELECT</span> * <span class="Special">FROM</span> pg_show_all_file_settings() <span class="Special">AS</span> A;<br/></li>
<li><br/></li>
<li><span class="Statement">REVOKE</span> <span class="Statement">ALL</span> <span class="Special">ON</span> pg_file_settings <span class="Special">FROM</span> <span class="Special">PUBLIC</span>;<br/></li>
<li><span class="Statement">REVOKE</span> <span class="Statement">EXECUTE</span> <span class="Special">ON</span> <span class="Special">FUNCTION</span> pg_show_all_file_settings() <span class="Special">FROM</span> <span class="Special">PUBLIC</span>;<br/></li>
<li><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> pg_hba_file_rules <span class="Special">AS<br/></li>
<li></span>&nbsp;&nbsp; <span class="Statement">SELECT</span> * <span class="Special">FROM</span> pg_hba_file_rules() <span class="Special">AS</span> A;<br/></li>
<li><br/></li>
<li><span class="Statement">REVOKE</span> <span class="Statement">ALL</span> <span class="Special">ON</span> pg_hba_file_rules <span class="Special">FROM</span> <span class="Special">PUBLIC</span>;<br/></li>
<li><span class="Statement">REVOKE</span> <span class="Statement">EXECUTE</span> <span class="Special">ON</span> <span class="Special">FUNCTION</span> pg_hba_file_rules() <span class="Special">FROM</span> <span class="Special">PUBLIC</span>;<br/></li>
<li><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> pg_ident_file_mappings <span class="Special">AS<br/></li>
<li></span>&nbsp;&nbsp; <span class="Statement">SELECT</span> * <span class="Special">FROM</span> pg_ident_file_mappings() <span class="Special">AS</span> A;<br/></li>
<li><br/></li>
<li><span class="Statement">REVOKE</span> <span class="Statement">ALL</span> <span class="Special">ON</span> pg_ident_file_mappings <span class="Special">FROM</span> <span class="Special">PUBLIC</span>;<br/></li>
<li><span class="Statement">REVOKE</span> <span class="Statement">EXECUTE</span> <span class="Special">ON</span> <span class="Special">FUNCTION</span> pg_ident_file_mappings() <span class="Special">FROM</span> <span class="Special">PUBLIC</span>;<br/></li>
<li><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> pg_timezone_abbrevs <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT</span> * <span class="Special">FROM</span> pg_timezone_abbrevs();<br/></li>
<li><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> pg_timezone_names <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT</span> * <span class="Special">FROM</span> pg_timezone_names();<br/></li>
<li><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> pg_config <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT</span> * <span class="Special">FROM</span> pg_config();<br/></li>
<li><br/></li>
<li><span class="Statement">REVOKE</span> <span class="Statement">ALL</span> <span class="Special">ON</span> pg_config <span class="Special">FROM</span> <span class="Special">PUBLIC</span>;<br/></li>
<li><span class="Statement">REVOKE</span> <span class="Statement">EXECUTE</span> <span class="Special">ON</span> <span class="Special">FUNCTION</span> pg_config() <span class="Special">FROM</span> <span class="Special">PUBLIC</span>;<br/></li>
<li><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> pg_shmem_allocations <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT</span> * <span class="Special">FROM</span> pg_get_shmem_allocations();<br/></li>
<li><br/></li>
<li><span class="Statement">REVOKE</span> <span class="Statement">ALL</span> <span class="Special">ON</span> pg_shmem_allocations <span class="Special">FROM</span> <span class="Special">PUBLIC</span>;<br/></li>
<li><span class="Statement">GRANT</span> SELECT <span class="Special">ON</span> pg_shmem_allocations <span class="Special">TO</span> pg_read_all_stats;<br/></li>
<li><span class="Statement">REVOKE</span> <span class="Statement">EXECUTE</span> <span class="Special">ON</span> <span class="Special">FUNCTION</span> pg_get_shmem_allocations() <span class="Special">FROM</span> <span class="Special">PUBLIC</span>;<br/></li>
<li><span class="Statement">GRANT</span> <span class="Statement">EXECUTE</span> <span class="Special">ON</span> <span class="Special">FUNCTION</span> pg_get_shmem_allocations() <span class="Special">TO</span> pg_read_all_stats;<br/></li>
<li><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> pg_backend_memory_contexts <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT</span> * <span class="Special">FROM</span> pg_get_backend_memory_contexts();<br/></li>
<li><br/></li>
<li><span class="Statement">REVOKE</span> <span class="Statement">ALL</span> <span class="Special">ON</span> pg_backend_memory_contexts <span class="Special">FROM</span> <span class="Special">PUBLIC</span>;<br/></li>
<li><span class="Statement">GRANT</span> SELECT <span class="Special">ON</span> pg_backend_memory_contexts <span class="Special">TO</span> pg_read_all_stats;<br/></li>
<li><span class="Statement">REVOKE</span> <span class="Statement">EXECUTE</span> <span class="Special">ON</span> <span class="Special">FUNCTION</span> pg_get_backend_memory_contexts() <span class="Special">FROM</span> <span class="Special">PUBLIC</span>;<br/></li>
<li><span class="Statement">GRANT</span> <span class="Statement">EXECUTE</span> <span class="Special">ON</span> <span class="Special">FUNCTION</span> pg_get_backend_memory_contexts() <span class="Special">TO</span> pg_read_all_stats;<br/></li>
<li><br/></li>
<li><span class="Comment">-- Statistics views<br/></li>
<li></span><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> pg_stat_all_tables <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; C.oid <span class="Special">AS</span> relid,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; N.nspname <span class="Special">AS</span> schemaname,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; C.relname <span class="Special">AS</span> relname,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pg_stat_get_numscans(C.oid) <span class="Special">AS</span> seq_scan,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pg_stat_get_lastscan(C.oid) <span class="Special">AS</span> last_seq_scan,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pg_stat_get_tuples_returned(C.oid) <span class="Special">AS</span> seq_tup_read,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Identifier">sum</span>(pg_stat_get_numscans(I.indexrelid))::bigint <span class="Special">AS</span> idx_scan,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Identifier">max</span>(pg_stat_get_lastscan(I.indexrelid)) <span class="Special">AS</span> last_idx_scan,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Identifier">sum</span>(pg_stat_get_tuples_fetched(I.indexrelid))::bigint +<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pg_stat_get_tuples_fetched(C.oid) <span class="Special">AS</span> idx_tup_fetch,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pg_stat_get_tuples_inserted(C.oid) <span class="Special">AS</span> n_tup_ins,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pg_stat_get_tuples_updated(C.oid) <span class="Special">AS</span> n_tup_upd,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pg_stat_get_tuples_deleted(C.oid) <span class="Special">AS</span> n_tup_del,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pg_stat_get_tuples_hot_updated(C.oid) <span class="Special">AS</span> n_tup_hot_upd,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pg_stat_get_tuples_newpage_updated(C.oid) <span class="Special">AS</span> n_tup_newpage_upd,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pg_stat_get_live_tuples(C.oid) <span class="Special">AS</span> n_live_tup,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pg_stat_get_dead_tuples(C.oid) <span class="Special">AS</span> n_dead_tup,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pg_stat_get_mod_since_analyze(C.oid) <span class="Special">AS</span> n_mod_since_analyze,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pg_stat_get_ins_since_vacuum(C.oid) <span class="Special">AS</span> n_ins_since_vacuum,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pg_stat_get_last_vacuum_time(C.oid) <span class="Special">as</span> last_vacuum,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pg_stat_get_last_autovacuum_time(C.oid) <span class="Special">as</span> last_autovacuum,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pg_stat_get_last_analyze_time(C.oid) <span class="Special">as</span> last_analyze,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pg_stat_get_last_autoanalyze_time(C.oid) <span class="Special">as</span> last_autoanalyze,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pg_stat_get_vacuum_count(C.oid) <span class="Special">AS</span> vacuum_count,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pg_stat_get_autovacuum_count(C.oid) <span class="Special">AS</span> autovacuum_count,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pg_stat_get_analyze_count(C.oid) <span class="Special">AS</span> analyze_count,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pg_stat_get_autoanalyze_count(C.oid) <span class="Special">AS</span> autoanalyze_count<br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> pg_class C <span class="Special">LEFT</span> <span class="Special">JOIN<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; pg_index I <span class="Special">ON</span> C.oid = I.indrelid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">LEFT</span> <span class="Special">JOIN</span> pg_namespace N <span class="Special">ON</span> (N.oid = C.relnamespace)<br/></li>
<li>&nbsp; &nbsp; <span class="Special">WHERE</span> C.relkind <span class="Statement">IN</span> (<span class="Special">'</span><span class="Constant">r</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">t</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">m</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">p</span><span class="Special">'</span>)<br/></li>
<li>&nbsp; &nbsp; <span class="Special">GROUP</span> <span class="Special">BY</span> C.oid, N.nspname, C.relname;<br/></li>
<li><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> pg_stat_xact_all_tables <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; C.oid <span class="Special">AS</span> relid,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; N.nspname <span class="Special">AS</span> schemaname,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; C.relname <span class="Special">AS</span> relname,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pg_stat_get_xact_numscans(C.oid) <span class="Special">AS</span> seq_scan,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pg_stat_get_xact_tuples_returned(C.oid) <span class="Special">AS</span> seq_tup_read,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Identifier">sum</span>(pg_stat_get_xact_numscans(I.indexrelid))::bigint <span class="Special">AS</span> idx_scan,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Identifier">sum</span>(pg_stat_get_xact_tuples_fetched(I.indexrelid))::bigint +<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pg_stat_get_xact_tuples_fetched(C.oid) <span class="Special">AS</span> idx_tup_fetch,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pg_stat_get_xact_tuples_inserted(C.oid) <span class="Special">AS</span> n_tup_ins,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pg_stat_get_xact_tuples_updated(C.oid) <span class="Special">AS</span> n_tup_upd,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pg_stat_get_xact_tuples_deleted(C.oid) <span class="Special">AS</span> n_tup_del,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pg_stat_get_xact_tuples_hot_updated(C.oid) <span class="Special">AS</span> n_tup_hot_upd,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pg_stat_get_xact_tuples_newpage_updated(C.oid) <span class="Special">AS</span> n_tup_newpage_upd<br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> pg_class C <span class="Special">LEFT</span> <span class="Special">JOIN<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; pg_index I <span class="Special">ON</span> C.oid = I.indrelid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">LEFT</span> <span class="Special">JOIN</span> pg_namespace N <span class="Special">ON</span> (N.oid = C.relnamespace)<br/></li>
<li>&nbsp; &nbsp; <span class="Special">WHERE</span> C.relkind <span class="Statement">IN</span> (<span class="Special">'</span><span class="Constant">r</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">t</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">m</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">p</span><span class="Special">'</span>)<br/></li>
<li>&nbsp; &nbsp; <span class="Special">GROUP</span> <span class="Special">BY</span> C.oid, N.nspname, C.relname;<br/></li>
<li><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> pg_stat_sys_tables <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT</span> * <span class="Special">FROM</span> pg_stat_all_tables<br/></li>
<li>&nbsp; &nbsp; <span class="Special">WHERE</span> schemaname <span class="Statement">IN</span> (<span class="Special">'</span><span class="Constant">pg_catalog</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">information_schema</span><span class="Special">'</span>) <span class="Statement">OR<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; schemaname ~ <span class="Special">'</span><span class="Constant">^pg_toast</span><span class="Special">'</span>;<br/></li>
<li><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> pg_stat_xact_sys_tables <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT</span> * <span class="Special">FROM</span> pg_stat_xact_all_tables<br/></li>
<li>&nbsp; &nbsp; <span class="Special">WHERE</span> schemaname <span class="Statement">IN</span> (<span class="Special">'</span><span class="Constant">pg_catalog</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">information_schema</span><span class="Special">'</span>) <span class="Statement">OR<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; schemaname ~ <span class="Special">'</span><span class="Constant">^pg_toast</span><span class="Special">'</span>;<br/></li>
<li><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> pg_stat_user_tables <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT</span> * <span class="Special">FROM</span> pg_stat_all_tables<br/></li>
<li>&nbsp; &nbsp; <span class="Special">WHERE</span> schemaname <span class="Statement">NOT</span> <span class="Statement">IN</span> (<span class="Special">'</span><span class="Constant">pg_catalog</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">information_schema</span><span class="Special">'</span>) <span class="Statement">AND<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; schemaname !~ <span class="Special">'</span><span class="Constant">^pg_toast</span><span class="Special">'</span>;<br/></li>
<li><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> pg_stat_xact_user_tables <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT</span> * <span class="Special">FROM</span> pg_stat_xact_all_tables<br/></li>
<li>&nbsp; &nbsp; <span class="Special">WHERE</span> schemaname <span class="Statement">NOT</span> <span class="Statement">IN</span> (<span class="Special">'</span><span class="Constant">pg_catalog</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">information_schema</span><span class="Special">'</span>) <span class="Statement">AND<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; schemaname !~ <span class="Special">'</span><span class="Constant">^pg_toast</span><span class="Special">'</span>;<br/></li>
<li><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> pg_statio_all_tables <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; C.oid <span class="Special">AS</span> relid,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; N.nspname <span class="Special">AS</span> schemaname,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; C.relname <span class="Special">AS</span> relname,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pg_stat_get_blocks_fetched(C.oid) -<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pg_stat_get_blocks_hit(C.oid) <span class="Special">AS</span> heap_blks_read,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pg_stat_get_blocks_hit(C.oid) <span class="Special">AS</span> heap_blks_hit,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; I.idx_blks_read <span class="Special">AS</span> idx_blks_read,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; I.idx_blks_hit <span class="Special">AS</span> idx_blks_hit,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pg_stat_get_blocks_fetched(T.oid) -<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pg_stat_get_blocks_hit(T.oid) <span class="Special">AS</span> toast_blks_read,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pg_stat_get_blocks_hit(T.oid) <span class="Special">AS</span> toast_blks_hit,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; X.idx_blks_read <span class="Special">AS</span> tidx_blks_read,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; X.idx_blks_hit <span class="Special">AS</span> tidx_blks_hit<br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> pg_class C <span class="Special">LEFT</span> <span class="Special">JOIN<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pg_class T <span class="Special">ON</span> C.reltoastrelid = T.oid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">LEFT</span> <span class="Special">JOIN</span> pg_namespace N <span class="Special">ON</span> (N.oid = C.relnamespace)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">LEFT</span> <span class="Special">JOIN</span> LATERAL (<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">SELECT</span> <span class="Identifier">sum</span>(pg_stat_get_blocks_fetched(indexrelid) -<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; pg_stat_get_blocks_hit(indexrelid))::bigint<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">AS</span> idx_blks_read,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">sum</span>(pg_stat_get_blocks_hit(indexrelid))::bigint<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">AS</span> idx_blks_hit<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">FROM</span> pg_index <span class="Special">WHERE</span> indrelid = C.oid ) I <span class="Special">ON</span> <span class="Special">true<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">LEFT</span> <span class="Special">JOIN</span> LATERAL (<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">SELECT</span> <span class="Identifier">sum</span>(pg_stat_get_blocks_fetched(indexrelid) -<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; pg_stat_get_blocks_hit(indexrelid))::bigint<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">AS</span> idx_blks_read,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">sum</span>(pg_stat_get_blocks_hit(indexrelid))::bigint<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">AS</span> idx_blks_hit<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">FROM</span> pg_index <span class="Special">WHERE</span> indrelid = T.oid ) X <span class="Special">ON</span> <span class="Special">true<br/></li>
<li></span>&nbsp; &nbsp; <span class="Special">WHERE</span> C.relkind <span class="Statement">IN</span> (<span class="Special">'</span><span class="Constant">r</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">t</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">m</span><span class="Special">'</span>);<br/></li>
<li><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> pg_statio_sys_tables <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT</span> * <span class="Special">FROM</span> pg_statio_all_tables<br/></li>
<li>&nbsp; &nbsp; <span class="Special">WHERE</span> schemaname <span class="Statement">IN</span> (<span class="Special">'</span><span class="Constant">pg_catalog</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">information_schema</span><span class="Special">'</span>) <span class="Statement">OR<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; schemaname ~ <span class="Special">'</span><span class="Constant">^pg_toast</span><span class="Special">'</span>;<br/></li>
<li><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> pg_statio_user_tables <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT</span> * <span class="Special">FROM</span> pg_statio_all_tables<br/></li>
<li>&nbsp; &nbsp; <span class="Special">WHERE</span> schemaname <span class="Statement">NOT</span> <span class="Statement">IN</span> (<span class="Special">'</span><span class="Constant">pg_catalog</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">information_schema</span><span class="Special">'</span>) <span class="Statement">AND<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; schemaname !~ <span class="Special">'</span><span class="Constant">^pg_toast</span><span class="Special">'</span>;<br/></li>
<li><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> pg_stat_all_indexes <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; C.oid <span class="Special">AS</span> relid,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; I.oid <span class="Special">AS</span> indexrelid,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; N.nspname <span class="Special">AS</span> schemaname,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; C.relname <span class="Special">AS</span> relname,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; I.relname <span class="Special">AS</span> indexrelname,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pg_stat_get_numscans(I.oid) <span class="Special">AS</span> idx_scan,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pg_stat_get_lastscan(I.oid) <span class="Special">AS</span> last_idx_scan,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pg_stat_get_tuples_returned(I.oid) <span class="Special">AS</span> idx_tup_read,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pg_stat_get_tuples_fetched(I.oid) <span class="Special">AS</span> idx_tup_fetch<br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> pg_class C <span class="Special">JOIN<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pg_index X <span class="Special">ON</span> C.oid = X.indrelid <span class="Special">JOIN<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pg_class I <span class="Special">ON</span> I.oid = X.indexrelid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">LEFT</span> <span class="Special">JOIN</span> pg_namespace N <span class="Special">ON</span> (N.oid = C.relnamespace)<br/></li>
<li>&nbsp; &nbsp; <span class="Special">WHERE</span> C.relkind <span class="Statement">IN</span> (<span class="Special">'</span><span class="Constant">r</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">t</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">m</span><span class="Special">'</span>);<br/></li>
<li><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> pg_stat_sys_indexes <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT</span> * <span class="Special">FROM</span> pg_stat_all_indexes<br/></li>
<li>&nbsp; &nbsp; <span class="Special">WHERE</span> schemaname <span class="Statement">IN</span> (<span class="Special">'</span><span class="Constant">pg_catalog</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">information_schema</span><span class="Special">'</span>) <span class="Statement">OR<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; schemaname ~ <span class="Special">'</span><span class="Constant">^pg_toast</span><span class="Special">'</span>;<br/></li>
<li><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> pg_stat_user_indexes <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT</span> * <span class="Special">FROM</span> pg_stat_all_indexes<br/></li>
<li>&nbsp; &nbsp; <span class="Special">WHERE</span> schemaname <span class="Statement">NOT</span> <span class="Statement">IN</span> (<span class="Special">'</span><span class="Constant">pg_catalog</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">information_schema</span><span class="Special">'</span>) <span class="Statement">AND<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; schemaname !~ <span class="Special">'</span><span class="Constant">^pg_toast</span><span class="Special">'</span>;<br/></li>
<li><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> pg_statio_all_indexes <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; C.oid <span class="Special">AS</span> relid,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; I.oid <span class="Special">AS</span> indexrelid,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; N.nspname <span class="Special">AS</span> schemaname,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; C.relname <span class="Special">AS</span> relname,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; I.relname <span class="Special">AS</span> indexrelname,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pg_stat_get_blocks_fetched(I.oid) -<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pg_stat_get_blocks_hit(I.oid) <span class="Special">AS</span> idx_blks_read,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pg_stat_get_blocks_hit(I.oid) <span class="Special">AS</span> idx_blks_hit<br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> pg_class C <span class="Special">JOIN<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pg_index X <span class="Special">ON</span> C.oid = X.indrelid <span class="Special">JOIN<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pg_class I <span class="Special">ON</span> I.oid = X.indexrelid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">LEFT</span> <span class="Special">JOIN</span> pg_namespace N <span class="Special">ON</span> (N.oid = C.relnamespace)<br/></li>
<li>&nbsp; &nbsp; <span class="Special">WHERE</span> C.relkind <span class="Statement">IN</span> (<span class="Special">'</span><span class="Constant">r</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">t</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">m</span><span class="Special">'</span>);<br/></li>
<li><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> pg_statio_sys_indexes <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT</span> * <span class="Special">FROM</span> pg_statio_all_indexes<br/></li>
<li>&nbsp; &nbsp; <span class="Special">WHERE</span> schemaname <span class="Statement">IN</span> (<span class="Special">'</span><span class="Constant">pg_catalog</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">information_schema</span><span class="Special">'</span>) <span class="Statement">OR<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; schemaname ~ <span class="Special">'</span><span class="Constant">^pg_toast</span><span class="Special">'</span>;<br/></li>
<li><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> pg_statio_user_indexes <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT</span> * <span class="Special">FROM</span> pg_statio_all_indexes<br/></li>
<li>&nbsp; &nbsp; <span class="Special">WHERE</span> schemaname <span class="Statement">NOT</span> <span class="Statement">IN</span> (<span class="Special">'</span><span class="Constant">pg_catalog</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">information_schema</span><span class="Special">'</span>) <span class="Statement">AND<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; schemaname !~ <span class="Special">'</span><span class="Constant">^pg_toast</span><span class="Special">'</span>;<br/></li>
<li><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> pg_statio_all_sequences <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; C.oid <span class="Special">AS</span> relid,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; N.nspname <span class="Special">AS</span> schemaname,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; C.relname <span class="Special">AS</span> relname,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pg_stat_get_blocks_fetched(C.oid) -<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pg_stat_get_blocks_hit(C.oid) <span class="Special">AS</span> blks_read,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pg_stat_get_blocks_hit(C.oid) <span class="Special">AS</span> blks_hit<br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> pg_class C<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">LEFT</span> <span class="Special">JOIN</span> pg_namespace N <span class="Special">ON</span> (N.oid = C.relnamespace)<br/></li>
<li>&nbsp; &nbsp; <span class="Special">WHERE</span> C.relkind = <span class="Special">'</span><span class="Constant">S</span><span class="Special">'</span>;<br/></li>
<li><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> pg_statio_sys_sequences <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT</span> * <span class="Special">FROM</span> pg_statio_all_sequences<br/></li>
<li>&nbsp; &nbsp; <span class="Special">WHERE</span> schemaname <span class="Statement">IN</span> (<span class="Special">'</span><span class="Constant">pg_catalog</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">information_schema</span><span class="Special">'</span>) <span class="Statement">OR<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; schemaname ~ <span class="Special">'</span><span class="Constant">^pg_toast</span><span class="Special">'</span>;<br/></li>
<li><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> pg_statio_user_sequences <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT</span> * <span class="Special">FROM</span> pg_statio_all_sequences<br/></li>
<li>&nbsp; &nbsp; <span class="Special">WHERE</span> schemaname <span class="Statement">NOT</span> <span class="Statement">IN</span> (<span class="Special">'</span><span class="Constant">pg_catalog</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">information_schema</span><span class="Special">'</span>) <span class="Statement">AND<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; schemaname !~ <span class="Special">'</span><span class="Constant">^pg_toast</span><span class="Special">'</span>;<br/></li>
<li><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> pg_stat_activity <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; S.datid <span class="Special">AS</span> datid,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; D.datname <span class="Special">AS</span> datname,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; S.pid,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; S.leader_pid,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; S.usesysid,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; U.rolname <span class="Special">AS</span> usename,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; S.application_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; S.client_addr,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; S.client_hostname,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; S.client_port,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; S.backend_start,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; S.xact_start,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; S.query_start,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; S.state_change,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; S.wait_event_type,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; S.wait_event,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; S.state,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; S.backend_xid,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; s.backend_xmin,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; S.query_id,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; S.query,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; S.backend_type<br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> pg_stat_get_activity(<span class="Special">NULL</span>) <span class="Special">AS</span> S<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">LEFT</span> <span class="Special">JOIN</span> pg_database <span class="Special">AS</span> D <span class="Special">ON</span> (S.datid = D.oid)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">LEFT</span> <span class="Special">JOIN</span> pg_authid <span class="Special">AS</span> U <span class="Special">ON</span> (S.usesysid = U.oid);<br/></li>
<li><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> pg_stat_replication <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; S.pid,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; S.usesysid,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; U.rolname <span class="Special">AS</span> usename,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; S.application_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; S.client_addr,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; S.client_hostname,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; S.client_port,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; S.backend_start,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; S.backend_xmin,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; W.state,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; W.sent_lsn,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; W.write_lsn,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; W.flush_lsn,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; W.replay_lsn,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; W.write_lag,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; W.flush_lag,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; W.replay_lag,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; W.sync_priority,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; W.sync_state,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; W.reply_time<br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> pg_stat_get_activity(<span class="Special">NULL</span>) <span class="Special">AS</span> S<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">JOIN</span> pg_stat_get_wal_senders() <span class="Special">AS</span> W <span class="Special">ON</span> (S.pid = W.pid)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">LEFT</span> <span class="Special">JOIN</span> pg_authid <span class="Special">AS</span> U <span class="Special">ON</span> (S.usesysid = U.oid);<br/></li>
<li><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> pg_stat_slru <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; s.name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; s.blks_zeroed,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; s.blks_hit,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; s.blks_read,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; s.blks_written,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; s.blks_exists,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; s.flushes,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; s.truncates,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; s.stats_reset<br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> pg_stat_get_slru() s;<br/></li>
<li><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> pg_stat_wal_receiver <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; s.pid,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; s.status,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; s.receive_start_lsn,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; s.receive_start_tli,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; s.written_lsn,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; s.flushed_lsn,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; s.received_tli,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; s.last_msg_send_time,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; s.last_msg_receipt_time,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; s.latest_end_lsn,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; s.latest_end_time,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; s.slot_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; s.sender_host,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; s.sender_port,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; s.conninfo<br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> pg_stat_get_wal_receiver() s<br/></li>
<li>&nbsp; &nbsp; <span class="Special">WHERE</span> s.pid <span class="Special">IS</span> <span class="Statement">NOT</span> <span class="Special">NULL</span>;<br/></li>
<li><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> pg_stat_recovery_prefetch <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; s.stats_reset,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; s.prefetch,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; s.hit,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; s.skip_init,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; s.skip_new,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; s.skip_fpw,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; s.skip_rep,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; s.wal_distance,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; s.block_distance,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; s.io_depth<br/></li>
<li>&nbsp; &nbsp;&nbsp; <span class="Special">FROM</span> pg_stat_get_recovery_prefetch() s;<br/></li>
<li><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> pg_stat_subscription <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; su.oid <span class="Special">AS</span> subid,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; su.subname,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; st.worker_type,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; st.pid,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; st.leader_pid,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; st.relid,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; st.received_lsn,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; st.last_msg_send_time,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; st.last_msg_receipt_time,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; st.latest_end_lsn,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; st.latest_end_time<br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> pg_subscription su<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">LEFT</span> <span class="Special">JOIN</span> pg_stat_get_subscription(<span class="Special">NULL</span>) st<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">ON</span> (st.subid = su.oid);<br/></li>
<li><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> pg_stat_ssl <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; S.pid,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; S.ssl,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; S.sslversion <span class="Special">AS</span> version,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; S.sslcipher <span class="Special">AS</span> cipher,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; S.sslbits <span class="Special">AS</span> bits,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; S.ssl_client_dn <span class="Special">AS</span> client_dn,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; S.ssl_client_serial <span class="Special">AS</span> client_serial,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; S.ssl_issuer_dn <span class="Special">AS</span> issuer_dn<br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> pg_stat_get_activity(<span class="Special">NULL</span>) <span class="Special">AS</span> S<br/></li>
<li>&nbsp; &nbsp; <span class="Special">WHERE</span> S.client_port <span class="Special">IS</span> <span class="Statement">NOT</span> <span class="Special">NULL</span>;<br/></li>
<li><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> pg_stat_gssapi <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; S.pid,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; S.gss_auth <span class="Special">AS</span> gss_authenticated,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; S.gss_princ <span class="Special">AS</span> principal,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; S.gss_enc <span class="Special">AS</span> encrypted,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; S.gss_delegation <span class="Special">AS</span> credentials_delegated<br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> pg_stat_get_activity(<span class="Special">NULL</span>) <span class="Special">AS</span> S<br/></li>
<li>&nbsp; &nbsp; <span class="Special">WHERE</span> S.client_port <span class="Special">IS</span> <span class="Statement">NOT</span> <span class="Special">NULL</span>;<br/></li>
<li><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> pg_replication_slots <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; L.slot_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; L.plugin,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; L.slot_type,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; L.datoid,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; D.datname <span class="Special">AS</span> database,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; L.temporary,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; L.active,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; L.active_pid,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; L.xmin,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; L.catalog_xmin,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; L.restart_lsn,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; L.confirmed_flush_lsn,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; L.wal_status,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; L.safe_wal_size,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; L.two_phase,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; L.inactive_since,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; L.conflicting,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; L.invalidation_reason,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; L.failover,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; L.synced<br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> pg_get_replication_slots() <span class="Special">AS</span> L<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">LEFT</span> <span class="Special">JOIN</span> pg_database D <span class="Special">ON</span> (L.datoid = D.oid);<br/></li>
<li><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> pg_stat_replication_slots <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; s.slot_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; s.spill_txns,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; s.spill_count,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; s.spill_bytes,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; s.stream_txns,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; s.stream_count,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; s.stream_bytes,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; s.total_txns,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; s.total_bytes,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; s.stats_reset<br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> pg_replication_slots <span class="Special">as</span> r,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; LATERAL pg_stat_get_replication_slot(slot_name) <span class="Special">as</span> s<br/></li>
<li>&nbsp; &nbsp; <span class="Special">WHERE</span> r.datoid <span class="Special">IS</span> <span class="Statement">NOT</span> <span class="Special">NULL</span>; <span class="Comment">-- excluding physical slots<br/></li>
<li></span><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> pg_stat_database <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; D.oid <span class="Special">AS</span> datid,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; D.datname <span class="Special">AS</span> datname,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">CASE<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> (D.oid = (<span class="Constant">0</span>)::oid) <span class="Special">THEN</span> <span class="Constant">0<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">ELSE</span> pg_stat_get_db_numbackends(D.oid)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">END</span> <span class="Special">AS</span> numbackends,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pg_stat_get_db_xact_commit(D.oid) <span class="Special">AS</span> xact_commit,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pg_stat_get_db_xact_rollback(D.oid) <span class="Special">AS</span> xact_rollback,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pg_stat_get_db_blocks_fetched(D.oid) -<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pg_stat_get_db_blocks_hit(D.oid) <span class="Special">AS</span> blks_read,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pg_stat_get_db_blocks_hit(D.oid) <span class="Special">AS</span> blks_hit,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pg_stat_get_db_tuples_returned(D.oid) <span class="Special">AS</span> tup_returned,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pg_stat_get_db_tuples_fetched(D.oid) <span class="Special">AS</span> tup_fetched,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pg_stat_get_db_tuples_inserted(D.oid) <span class="Special">AS</span> tup_inserted,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pg_stat_get_db_tuples_updated(D.oid) <span class="Special">AS</span> tup_updated,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pg_stat_get_db_tuples_deleted(D.oid) <span class="Special">AS</span> tup_deleted,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pg_stat_get_db_conflict_all(D.oid) <span class="Special">AS</span> conflicts,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pg_stat_get_db_temp_files(D.oid) <span class="Special">AS</span> temp_files,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pg_stat_get_db_temp_bytes(D.oid) <span class="Special">AS</span> temp_bytes,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pg_stat_get_db_deadlocks(D.oid) <span class="Special">AS</span> deadlocks,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pg_stat_get_db_checksum_failures(D.oid) <span class="Special">AS</span> checksum_failures,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pg_stat_get_db_checksum_last_failure(D.oid) <span class="Special">AS</span> checksum_last_failure,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pg_stat_get_db_blk_read_time(D.oid) <span class="Special">AS</span> blk_read_time,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pg_stat_get_db_blk_write_time(D.oid) <span class="Special">AS</span> blk_write_time,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pg_stat_get_db_session_time(D.oid) <span class="Special">AS</span> session_time,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pg_stat_get_db_active_time(D.oid) <span class="Special">AS</span> active_time,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pg_stat_get_db_idle_in_transaction_time(D.oid) <span class="Special">AS</span> idle_in_transaction_time,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pg_stat_get_db_sessions(D.oid) <span class="Special">AS</span> sessions,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pg_stat_get_db_sessions_abandoned(D.oid) <span class="Special">AS</span> sessions_abandoned,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pg_stat_get_db_sessions_fatal(D.oid) <span class="Special">AS</span> sessions_fatal,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pg_stat_get_db_sessions_killed(D.oid) <span class="Special">AS</span> sessions_killed,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pg_stat_get_db_stat_reset_time(D.oid) <span class="Special">AS</span> stats_reset<br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> (<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">SELECT</span> <span class="Constant">0</span> <span class="Special">AS</span> oid, <span class="Special">NULL</span>::name <span class="Special">AS</span> datname<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">UNION</span> <span class="Statement">ALL<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">SELECT</span> oid, datname <span class="Special">FROM</span> pg_database<br/></li>
<li>&nbsp; &nbsp; ) D;<br/></li>
<li><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> pg_stat_database_conflicts <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; D.oid <span class="Special">AS</span> datid,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; D.datname <span class="Special">AS</span> datname,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pg_stat_get_db_conflict_tablespace(D.oid) <span class="Special">AS</span> confl_tablespace,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pg_stat_get_db_conflict_lock(D.oid) <span class="Special">AS</span> confl_lock,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pg_stat_get_db_conflict_snapshot(D.oid) <span class="Special">AS</span> confl_snapshot,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pg_stat_get_db_conflict_bufferpin(D.oid) <span class="Special">AS</span> confl_bufferpin,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pg_stat_get_db_conflict_startup_deadlock(D.oid) <span class="Special">AS</span> confl_deadlock,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pg_stat_get_db_conflict_logicalslot(D.oid) <span class="Special">AS</span> confl_active_logicalslot<br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> pg_database D;<br/></li>
<li><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> pg_stat_user_functions <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; P.oid <span class="Special">AS</span> funcid,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; N.nspname <span class="Special">AS</span> schemaname,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; P.proname <span class="Special">AS</span> funcname,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pg_stat_get_function_calls(P.oid) <span class="Special">AS</span> calls,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pg_stat_get_function_total_time(P.oid) <span class="Special">AS</span> total_time,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pg_stat_get_function_self_time(P.oid) <span class="Special">AS</span> self_time<br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> pg_proc P <span class="Special">LEFT</span> <span class="Special">JOIN</span> pg_namespace N <span class="Special">ON</span> (N.oid = P.pronamespace)<br/></li>
<li>&nbsp; &nbsp; <span class="Special">WHERE</span> P.prolang != <span class="Constant">12</span>&nbsp; <span class="Comment">-- fast check to eliminate built-in functions<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> pg_stat_get_function_calls(P.oid) <span class="Special">IS</span> <span class="Statement">NOT</span> <span class="Special">NULL</span>;<br/></li>
<li><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> pg_stat_xact_user_functions <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; P.oid <span class="Special">AS</span> funcid,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; N.nspname <span class="Special">AS</span> schemaname,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; P.proname <span class="Special">AS</span> funcname,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pg_stat_get_xact_function_calls(P.oid) <span class="Special">AS</span> calls,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pg_stat_get_xact_function_total_time(P.oid) <span class="Special">AS</span> total_time,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pg_stat_get_xact_function_self_time(P.oid) <span class="Special">AS</span> self_time<br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> pg_proc P <span class="Special">LEFT</span> <span class="Special">JOIN</span> pg_namespace N <span class="Special">ON</span> (N.oid = P.pronamespace)<br/></li>
<li>&nbsp; &nbsp; <span class="Special">WHERE</span> P.prolang != <span class="Constant">12</span>&nbsp; <span class="Comment">-- fast check to eliminate built-in functions<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> pg_stat_get_xact_function_calls(P.oid) <span class="Special">IS</span> <span class="Statement">NOT</span> <span class="Special">NULL</span>;<br/></li>
<li><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> pg_stat_archiver <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; s.archived_count,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; s.last_archived_wal,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; s.last_archived_time,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; s.failed_count,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; s.last_failed_wal,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; s.last_failed_time,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; s.stats_reset<br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> pg_stat_get_archiver() s;<br/></li>
<li><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> pg_stat_bgwriter <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; pg_stat_get_bgwriter_buf_written_clean() <span class="Special">AS</span> buffers_clean,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; pg_stat_get_bgwriter_maxwritten_clean() <span class="Special">AS</span> maxwritten_clean,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; pg_stat_get_buf_alloc() <span class="Special">AS</span> buffers_alloc,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; pg_stat_get_bgwriter_stat_reset_time() <span class="Special">AS</span> stats_reset;<br/></li>
<li><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> pg_stat_checkpointer <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; pg_stat_get_checkpointer_num_timed() <span class="Special">AS</span> num_timed,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; pg_stat_get_checkpointer_num_requested() <span class="Special">AS</span> num_requested,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; pg_stat_get_checkpointer_restartpoints_timed() <span class="Special">AS</span> restartpoints_timed,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; pg_stat_get_checkpointer_restartpoints_requested() <span class="Special">AS</span> restartpoints_req,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; pg_stat_get_checkpointer_restartpoints_performed() <span class="Special">AS</span> restartpoints_done,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; pg_stat_get_checkpointer_write_time() <span class="Special">AS</span> write_time,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; pg_stat_get_checkpointer_sync_time() <span class="Special">AS</span> sync_time,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; pg_stat_get_checkpointer_buffers_written() <span class="Special">AS</span> buffers_written,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; pg_stat_get_checkpointer_stat_reset_time() <span class="Special">AS</span> stats_reset;<br/></li>
<li><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> pg_stat_io <span class="Special">AS<br/></li>
<li></span><span class="Statement">SELECT<br/></li>
<li></span>&nbsp; &nbsp; &nbsp;&nbsp; b.backend_type,<br/></li>
<li>&nbsp; &nbsp; &nbsp;&nbsp; b.object,<br/></li>
<li>&nbsp; &nbsp; &nbsp;&nbsp; b.context,<br/></li>
<li>&nbsp; &nbsp; &nbsp;&nbsp; b.reads,<br/></li>
<li>&nbsp; &nbsp; &nbsp;&nbsp; b.read_time,<br/></li>
<li>&nbsp; &nbsp; &nbsp;&nbsp; b.writes,<br/></li>
<li>&nbsp; &nbsp; &nbsp;&nbsp; b.write_time,<br/></li>
<li>&nbsp; &nbsp; &nbsp;&nbsp; b.writebacks,<br/></li>
<li>&nbsp; &nbsp; &nbsp;&nbsp; b.writeback_time,<br/></li>
<li>&nbsp; &nbsp; &nbsp;&nbsp; b.extends,<br/></li>
<li>&nbsp; &nbsp; &nbsp;&nbsp; b.extend_time,<br/></li>
<li>&nbsp; &nbsp; &nbsp;&nbsp; b.op_bytes,<br/></li>
<li>&nbsp; &nbsp; &nbsp;&nbsp; b.hits,<br/></li>
<li>&nbsp; &nbsp; &nbsp;&nbsp; b.evictions,<br/></li>
<li>&nbsp; &nbsp; &nbsp;&nbsp; b.reuses,<br/></li>
<li>&nbsp; &nbsp; &nbsp;&nbsp; b.fsyncs,<br/></li>
<li>&nbsp; &nbsp; &nbsp;&nbsp; b.fsync_time,<br/></li>
<li>&nbsp; &nbsp; &nbsp;&nbsp; b.stats_reset<br/></li>
<li><span class="Special">FROM</span> pg_stat_get_io() b;<br/></li>
<li><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> pg_stat_wal <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; w.wal_records,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; w.wal_fpi,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; w.wal_bytes,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; w.wal_buffers_full,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; w.wal_write,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; w.wal_sync,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; w.wal_write_time,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; w.wal_sync_time,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; w.stats_reset<br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> pg_stat_get_wal() w;<br/></li>
<li><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> pg_stat_progress_analyze <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; S.pid <span class="Special">AS</span> pid, S.datid <span class="Special">AS</span> datid, D.datname <span class="Special">AS</span> datname,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Identifier">CAST</span>(S.relid <span class="Special">AS</span> oid) <span class="Special">AS</span> relid,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">CASE</span> S.param1 <span class="Special">WHEN</span> <span class="Constant">0</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">initializing</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> <span class="Constant">1</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">acquiring sample rows</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> <span class="Constant">2</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">acquiring inherited sample rows</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> <span class="Constant">3</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">computing statistics</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> <span class="Constant">4</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">computing extended statistics</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> <span class="Constant">5</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">finalizing analyze</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">END</span> <span class="Special">AS</span> phase,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; S.param2 <span class="Special">AS</span> sample_blks_total,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; S.param3 <span class="Special">AS</span> sample_blks_scanned,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; S.param4 <span class="Special">AS</span> ext_stats_total,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; S.param5 <span class="Special">AS</span> ext_stats_computed,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; S.param6 <span class="Special">AS</span> child_tables_total,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; S.param7 <span class="Special">AS</span> child_tables_done,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Identifier">CAST</span>(S.param8 <span class="Special">AS</span> oid) <span class="Special">AS</span> current_child_table_relid<br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> pg_stat_get_progress_info(<span class="Special">'</span><span class="Constant">ANALYZE</span><span class="Special">'</span>) <span class="Special">AS</span> S<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">LEFT</span> <span class="Special">JOIN</span> pg_database D <span class="Special">ON</span> S.datid = D.oid;<br/></li>
<li><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> pg_stat_progress_vacuum <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; S.pid <span class="Special">AS</span> pid, S.datid <span class="Special">AS</span> datid, D.datname <span class="Special">AS</span> datname,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; S.relid <span class="Special">AS</span> relid,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">CASE</span> S.param1 <span class="Special">WHEN</span> <span class="Constant">0</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">initializing</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> <span class="Constant">1</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">scanning heap</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> <span class="Constant">2</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">vacuuming indexes</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> <span class="Constant">3</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">vacuuming heap</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> <span class="Constant">4</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">cleaning up indexes</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> <span class="Constant">5</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">truncating heap</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> <span class="Constant">6</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">performing final cleanup</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">END</span> <span class="Special">AS</span> phase,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; S.param2 <span class="Special">AS</span> heap_blks_total, S.param3 <span class="Special">AS</span> heap_blks_scanned,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; S.param4 <span class="Special">AS</span> heap_blks_vacuumed, S.param5 <span class="Special">AS</span> index_vacuum_count,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; S.param6 <span class="Special">AS</span> max_dead_tuple_bytes, S.param7 <span class="Special">AS</span> dead_tuple_bytes,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; S.param8 <span class="Special">AS</span> indexes_total, S.param9 <span class="Special">AS</span> indexes_processed<br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> pg_stat_get_progress_info(<span class="Special">'</span><span class="Constant">VACUUM</span><span class="Special">'</span>) <span class="Special">AS</span> S<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">LEFT</span> <span class="Special">JOIN</span> pg_database D <span class="Special">ON</span> S.datid = D.oid;<br/></li>
<li><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> pg_stat_progress_cluster <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; S.pid <span class="Special">AS</span> pid,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; S.datid <span class="Special">AS</span> datid,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; D.datname <span class="Special">AS</span> datname,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; S.relid <span class="Special">AS</span> relid,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">CASE</span> S.param1 <span class="Special">WHEN</span> <span class="Constant">1</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">CLUSTER</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> <span class="Constant">2</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">VACUUM FULL</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">END</span> <span class="Special">AS</span> command,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">CASE</span> S.param2 <span class="Special">WHEN</span> <span class="Constant">0</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">initializing</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> <span class="Constant">1</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">seq scanning heap</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> <span class="Constant">2</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">index scanning heap</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> <span class="Constant">3</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">sorting tuples</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> <span class="Constant">4</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">writing new heap</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> <span class="Constant">5</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">swapping relation files</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> <span class="Constant">6</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">rebuilding index</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> <span class="Constant">7</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">performing final cleanup</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">END</span> <span class="Special">AS</span> phase,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Identifier">CAST</span>(S.param3 <span class="Special">AS</span> oid) <span class="Special">AS</span> cluster_index_relid,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; S.param4 <span class="Special">AS</span> heap_tuples_scanned,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; S.param5 <span class="Special">AS</span> heap_tuples_written,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; S.param6 <span class="Special">AS</span> heap_blks_total,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; S.param7 <span class="Special">AS</span> heap_blks_scanned,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; S.param8 <span class="Special">AS</span> index_rebuild_count<br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> pg_stat_get_progress_info(<span class="Special">'</span><span class="Constant">CLUSTER</span><span class="Special">'</span>) <span class="Special">AS</span> S<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">LEFT</span> <span class="Special">JOIN</span> pg_database D <span class="Special">ON</span> S.datid = D.oid;<br/></li>
<li><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> pg_stat_progress_create_index <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; S.pid <span class="Special">AS</span> pid, S.datid <span class="Special">AS</span> datid, D.datname <span class="Special">AS</span> datname,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; S.relid <span class="Special">AS</span> relid,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Identifier">CAST</span>(S.param7 <span class="Special">AS</span> oid) <span class="Special">AS</span> index_relid,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">CASE</span> S.param1 <span class="Special">WHEN</span> <span class="Constant">1</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">CREATE INDEX</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> <span class="Constant">2</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">CREATE INDEX CONCURRENTLY</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> <span class="Constant">3</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">REINDEX</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> <span class="Constant">4</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">REINDEX CONCURRENTLY</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">END</span> <span class="Special">AS</span> command,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">CASE</span> S.param10 <span class="Special">WHEN</span> <span class="Constant">0</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">initializing</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">WHEN</span> <span class="Constant">1</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">waiting for writers before build</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">WHEN</span> <span class="Constant">2</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">building index</span><span class="Special">'</span> ||<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">COALESCE</span>((<span class="Special">'</span><span class="Constant">: </span><span class="Special">'</span> || pg_indexam_progress_phasename(S.param9::oid, S.param11)),<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">''</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">WHEN</span> <span class="Constant">3</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">waiting for writers before validation</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">WHEN</span> <span class="Constant">4</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">index validation: scanning index</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">WHEN</span> <span class="Constant">5</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">index validation: sorting tuples</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">WHEN</span> <span class="Constant">6</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">index validation: scanning table</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">WHEN</span> <span class="Constant">7</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">waiting for old snapshots</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">WHEN</span> <span class="Constant">8</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">waiting for readers before marking dead</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">WHEN</span> <span class="Constant">9</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">waiting for readers before dropping</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">END</span> <span class="Special">as</span> phase,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; S.param4 <span class="Special">AS</span> lockers_total,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; S.param5 <span class="Special">AS</span> lockers_done,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; S.param6 <span class="Special">AS</span> current_locker_pid,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; S.param16 <span class="Special">AS</span> blocks_total,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; S.param17 <span class="Special">AS</span> blocks_done,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; S.param12 <span class="Special">AS</span> tuples_total,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; S.param13 <span class="Special">AS</span> tuples_done,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; S.param14 <span class="Special">AS</span> partitions_total,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; S.param15 <span class="Special">AS</span> partitions_done<br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> pg_stat_get_progress_info(<span class="Special">'</span><span class="Constant">CREATE INDEX</span><span class="Special">'</span>) <span class="Special">AS</span> S<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">LEFT</span> <span class="Special">JOIN</span> pg_database D <span class="Special">ON</span> S.datid = D.oid;<br/></li>
<li><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> pg_stat_progress_basebackup <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; S.pid <span class="Special">AS</span> pid,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">CASE</span> S.param1 <span class="Special">WHEN</span> <span class="Constant">0</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">initializing</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> <span class="Constant">1</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">waiting for checkpoint to finish</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> <span class="Constant">2</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">estimating backup size</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> <span class="Constant">3</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">streaming database files</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> <span class="Constant">4</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">waiting for wal archiving to finish</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> <span class="Constant">5</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">transferring wal files</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">END</span> <span class="Special">AS</span> phase,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">CASE</span> S.param2 <span class="Special">WHEN</span> <span class="Constant">-1</span> <span class="Special">THEN</span> <span class="Special">NULL</span> <span class="Special">ELSE</span> S.param2 <span class="Special">END</span> <span class="Special">AS</span> backup_total,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; S.param3 <span class="Special">AS</span> backup_streamed,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; S.param4 <span class="Special">AS</span> tablespaces_total,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; S.param5 <span class="Special">AS</span> tablespaces_streamed<br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> pg_stat_get_progress_info(<span class="Special">'</span><span class="Constant">BASEBACKUP</span><span class="Special">'</span>) <span class="Special">AS</span> S;<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> pg_stat_progress_copy <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; S.pid <span class="Special">AS</span> pid, S.datid <span class="Special">AS</span> datid, D.datname <span class="Special">AS</span> datname,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; S.relid <span class="Special">AS</span> relid,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">CASE</span> S.param5 <span class="Special">WHEN</span> <span class="Constant">1</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">COPY FROM</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> <span class="Constant">2</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">COPY TO</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">END</span> <span class="Special">AS</span> command,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">CASE</span> S.param6 <span class="Special">WHEN</span> <span class="Constant">1</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">FILE</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> <span class="Constant">2</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">PROGRAM</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> <span class="Constant">3</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">PIPE</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> <span class="Constant">4</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">CALLBACK</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">END</span> <span class="Special">AS</span> <span class="Special">&quot;</span><span class="Constant">type</span><span class="Special">&quot;</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; S.param1 <span class="Special">AS</span> bytes_processed,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; S.param2 <span class="Special">AS</span> bytes_total,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; S.param3 <span class="Special">AS</span> tuples_processed,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; S.param4 <span class="Special">AS</span> tuples_excluded,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; S.param7 <span class="Special">AS</span> tuples_skipped<br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> pg_stat_get_progress_info(<span class="Special">'</span><span class="Constant">COPY</span><span class="Special">'</span>) <span class="Special">AS</span> S<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">LEFT</span> <span class="Special">JOIN</span> pg_database D <span class="Special">ON</span> S.datid = D.oid;<br/></li>
<li><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> pg_user_mappings <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; U.oid&nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">AS</span> umid,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; S.oid&nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">AS</span> srvid,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; S.srvname&nbsp;&nbsp; <span class="Special">AS</span> srvname,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; U.umuser&nbsp; &nbsp; <span class="Special">AS</span> umuser,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">CASE</span> <span class="Special">WHEN</span> U.umuser = <span class="Constant">0</span> <span class="Special">THEN<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">'</span><span class="Constant">public</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">ELSE<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; A.rolname<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">END</span> <span class="Special">AS</span> usename,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">CASE</span> <span class="Special">WHEN</span> (U.umuser &lt;&gt; <span class="Constant">0</span> <span class="Statement">AND</span> A.rolname = current_user<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">AND</span> (pg_has_role(S.srvowner, <span class="Special">'</span><span class="Constant">USAGE</span><span class="Special">'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">OR</span> has_server_privilege(S.oid, <span class="Special">'</span><span class="Constant">USAGE</span><span class="Special">'</span>)))<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">OR</span> (U.umuser = <span class="Constant">0</span> <span class="Statement">AND</span> pg_has_role(S.srvowner, <span class="Special">'</span><span class="Constant">USAGE</span><span class="Special">'</span>))<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">OR</span> (<span class="Statement">SELECT</span> rolsuper <span class="Special">FROM</span> pg_authid <span class="Special">WHERE</span> rolname = current_user)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">THEN</span> U.umoptions<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">ELSE</span> <span class="Special">NULL</span> <span class="Special">END</span> <span class="Special">AS</span> umoptions<br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> pg_user_mapping U<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">JOIN</span> pg_foreign_server S <span class="Special">ON</span> (U.umserver = S.oid)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">LEFT</span> <span class="Special">JOIN</span> pg_authid A <span class="Special">ON</span> (A.oid = U.umuser);<br/></li>
<li><br/></li>
<li><span class="Statement">REVOKE</span> <span class="Statement">ALL</span> <span class="Special">ON</span> pg_user_mapping <span class="Special">FROM</span> <span class="Special">public</span>;<br/></li>
<li><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> pg_replication_origin_status <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT</span> *<br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> pg_show_replication_origin_status();<br/></li>
<li><br/></li>
<li><span class="Statement">REVOKE</span> <span class="Statement">ALL</span> <span class="Special">ON</span> pg_replication_origin_status <span class="Special">FROM</span> <span class="Special">public</span>;<br/></li>
<li><br/></li>
<li><span class="Comment">-- All columns of pg_subscription except subconninfo are publicly readable.<br/></li>
<li></span><span class="Statement">REVOKE</span> <span class="Statement">ALL</span> <span class="Special">ON</span> pg_subscription <span class="Special">FROM</span> <span class="Special">public</span>;<br/></li>
<li><span class="Statement">GRANT</span> SELECT (oid, subdbid, subskiplsn, subname, subowner, subenabled,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; subbinary, substream, subtwophasestate, subdisableonerr,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; subpasswordrequired, subrunasowner, subfailover,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; subslotname, subsynccommit, subpublications, suborigin)<br/></li>
<li>&nbsp; &nbsp; <span class="Special">ON</span> pg_subscription <span class="Special">TO</span> <span class="Special">public</span>;<br/></li>
<li><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> pg_stat_subscription_stats <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; ss.subid,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; s.subname,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; ss.apply_error_count,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; ss.sync_error_count,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; ss.stats_reset<br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> pg_subscription <span class="Special">as</span> s,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; pg_stat_get_subscription_stats(s.oid) <span class="Special">as</span> ss;<br/></li>
<li><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> pg_wait_events <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT</span> * <span class="Special">FROM</span> pg_get_wait_events();<br/></li>
</ol></code>
 <p class="nav-bar">
  <span class="nav-link"><a href="./index.html">One Level Up</a></span>
  <span class="nav-link"><a href="../index.html">Top Level</a></span>
 </p>

 </body>
</html>
