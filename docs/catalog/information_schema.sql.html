<!-- generated by the src2html.pl tool from code2ebook:
  https://github.com/agentzh/code2ebook
-->

<html>
 <head>
  <title>catalog/information_schema.sql - pgsql17devel-backend</title>
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
  <style>
body {
    text-align: left;
    text-align-last: left;
}

.nav-bar {
    font-size: 120%;
    margin-top: 5px;
    margin-bottom: 5px;
}

.nav-link {
    padding-left: 5em;
    padding-right: 5em;
}

ul.toc {
    line-height: 200%;
    font-size: 150%;
}

code {
    font-family: consolas, monospace;
    line-height: 130%;
}

span.Constant {
    color: DarkGreen;
}

span.Special {
    color: #c06000;
}

span.Comment {
    color: DarkRed;
    font-style: italic;
}

span.Identifier {
    color: DarkCyan;
}

span.PreProc {
    color: DarkMagenta;
}

span.Statement, span.Type, span.Keyword, span.Repeat, span.Conditional,
    span.Operator, span.Exception
{
    color: DarkBlue;
}

span.Todo {
    color: DarkRed;
    background-color: Gold;
    font-style: italic;
}

span.Underlined {
    text-decoration: underline;
}

span.linkable {
    font-weight: bold;
}

code ol {
    counter-reset: item;
    list-style-type: none;
    margin-left: 0;
    padding-left: 0;
    list-style-position: inside;
}

code li {
    display: block;
}

code li:before {
    content: counter(item) "  ";
    counter-increment: item;
    color: #999;
    padding-right: 0.5em;
    padding-left: 0.4em;
    list-style-position: inside;
    text-align: right
}

  </style>
 </head>
 <body>
 <p class="nav-bar">
  <span class="nav-link"><a href="./index.html">One Level Up</a></span>
  <span class="nav-link"><a href="../index.html">Top Level</a></span>
 </p>

  <h1>catalog/information_schema.sql - pgsql17devel-backend</h1>
 <h2>Data types defined</h2>
 <ul class="toc">
<li><a href="#L1710">sql_features</a></li>
<li><a href="#L1730">sql_implementation_info</a></li>
<li><a href="#L1759">sql_parts</a></li>
<li><a href="#L1785">sql_sizing</a></li>
</ul>
 <h2>Functions defined</h2>
 <ul class="toc">
<li><a href="#L43">_pg_expandarray</a></li>
</ul>
 <h2>Source code</h2>

  <code><ol><li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * SQL Information Schema<br/></li>
<li></span><span class="Comment"> * as defined in ISO/IEC 9075-11:2023<br/></li>
<li></span><span class="Comment"> *<br/></li>
<li></span><span class="Comment"> * Copyright (c) 2003-2024, PostgreSQL Global Development Group<br/></li>
<li></span><span class="Comment"> *<br/></li>
<li></span><span class="Comment"> * src/backend/catalog/information_schema.sql<br/></li>
<li></span><span class="Comment"> *<br/></li>
<li></span><span class="Comment"> * </span><span class="Todo">Note</span><span class="Comment">: this file is read in single-user -j mode, which means that the<br/></li>
<li></span><span class="Comment"> * command terminator is semicolon-newline-newline; whenever the backend<br/></li>
<li></span><span class="Comment"> * sees that, it stops and executes what it's got.&nbsp; If you write a lot of<br/></li>
<li></span><span class="Comment"> * statements without empty lines between, they'll all get quoted to you<br/></li>
<li></span><span class="Comment"> * in any error message about one of them, so don't do that.&nbsp; Also, you<br/></li>
<li></span><span class="Comment"> * cannot write a semicolon immediately followed by an empty line in a<br/></li>
<li></span><span class="Comment"> * string literal (including a function body!) or a multiline comment.<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * </span><span class="Todo">Note</span><span class="Comment">: Generally, the definitions in this file should be ordered<br/></li>
<li></span><span class="Comment"> * according to the clause numbers in the SQL standard, which is also the<br/></li>
<li></span><span class="Comment"> * alphabetical order.&nbsp; In some cases it is convenient or necessary to<br/></li>
<li></span><span class="Comment"> * define one information schema view by using another one; in that case,<br/></li>
<li></span><span class="Comment"> * put the referencing view at the very end and leave a </span><span class="Todo">note</span><span class="Comment"> where it<br/></li>
<li></span><span class="Comment"> * should have been put.<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><br/></li>
<li><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * 6.2<br/></li>
<li></span><span class="Comment"> * INFORMATION_SCHEMA schema<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><br/></li>
<li><span class="Statement">CREATE</span> SCHEMA information_schema;<br/></li>
<li><span class="Statement">GRANT</span> USAGE <span class="Special">ON</span> SCHEMA information_schema <span class="Special">TO</span> <span class="Special">PUBLIC</span>;<br/></li>
<li><span class="Statement">SET</span> search_path <span class="Special">TO</span> information_schema;<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * A few supporting functions first ...<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><br/></li>
<li><span class="Comment">/* Expand any 1-D array into a set with integers 1..N */<br/></li>
<li><a id="L43">&#x200c;</a></span><span class="Statement">CREATE</span> <span class="Special">FUNCTION</span> <span class="linkable">_pg_expandarray</span>(<span class="Statement">IN</span> anyarray, <span class="Statement">OUT</span> x anyelement, <span class="Statement">OUT</span> n <span class="Type">int</span>)<br/></li>
<li>&nbsp; &nbsp; RETURNS SETOF RECORD<br/></li>
<li>&nbsp; &nbsp; LANGUAGE sql STRICT IMMUTABLE <span class="Special">PARALLEL</span> SAFE<br/></li>
<li>&nbsp; &nbsp; <span class="Special">ROWS</span> <span class="Constant">100</span> SUPPORT pg_catalog.array_unnest_support<br/></li>
<li>&nbsp; &nbsp; <span class="Special">AS</span> <span class="Special">'</span><span class="Constant">SELECT * FROM pg_catalog.unnest($1) WITH ORDINALITY</span><span class="Special">'</span>;<br/></li>
<li><br/></li>
<li><span class="Comment">/* Given an index's OID and an underlying-table column number, return the<br/></li>
<li></span><span class="Comment"> * column's position in the index (NULL if not there) */<br/></li>
<li></span><span class="Statement">CREATE</span> <span class="Special">FUNCTION</span> _pg_index_position(oid, <span class="Type">smallint</span>) RETURNS <span class="Type">int<br/></li>
<li></span>&nbsp; &nbsp; LANGUAGE sql STRICT STABLE<br/></li>
<li><span class="Special">BEGIN</span> ATOMIC<br/></li>
<li><span class="Statement">SELECT</span> (ss.a).n <span class="Special">FROM<br/></li>
<li></span>&nbsp; (<span class="Statement">SELECT</span> information_schema.<a href="#L43" title="catalog/information_schema.sql:43">_pg_expandarray</a>(indkey) <span class="Special">AS</span> a<br/></li>
<li>&nbsp;&nbsp; <span class="Special">FROM</span> pg_catalog.pg_index <span class="Special">WHERE</span> indexrelid = $<span class="Constant">1</span>) ss<br/></li>
<li>&nbsp; <span class="Special">WHERE</span> (ss.a).x = $<span class="Constant">2</span>;<br/></li>
<li><span class="Special">END</span>;<br/></li>
<li><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">FUNCTION</span> _pg_truetypid(pg_attribute, pg_type) RETURNS oid<br/></li>
<li>&nbsp; &nbsp; LANGUAGE sql<br/></li>
<li>&nbsp; &nbsp; IMMUTABLE<br/></li>
<li>&nbsp; &nbsp; <span class="Special">PARALLEL</span> SAFE<br/></li>
<li>&nbsp; &nbsp; RETURNS <span class="Special">NULL</span> <span class="Special">ON</span> <span class="Special">NULL</span> INPUT<br/></li>
<li><span class="Special">RETURN</span> <span class="Special">CASE</span> <span class="Special">WHEN</span> $<span class="Constant">2</span>.typtype = <span class="Special">'</span><span class="Constant">d</span><span class="Special">'</span> <span class="Special">THEN</span> $<span class="Constant">2</span>.typbasetype <span class="Special">ELSE</span> $<span class="Constant">1</span>.atttypid <span class="Special">END</span>;<br/></li>
<li><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">FUNCTION</span> _pg_truetypmod(pg_attribute, pg_type) RETURNS int4<br/></li>
<li>&nbsp; &nbsp; LANGUAGE sql<br/></li>
<li>&nbsp; &nbsp; IMMUTABLE<br/></li>
<li>&nbsp; &nbsp; <span class="Special">PARALLEL</span> SAFE<br/></li>
<li>&nbsp; &nbsp; RETURNS <span class="Special">NULL</span> <span class="Special">ON</span> <span class="Special">NULL</span> INPUT<br/></li>
<li><span class="Special">RETURN</span> <span class="Special">CASE</span> <span class="Special">WHEN</span> $<span class="Constant">2</span>.typtype = <span class="Special">'</span><span class="Constant">d</span><span class="Special">'</span> <span class="Special">THEN</span> $<span class="Constant">2</span>.typtypmod <span class="Special">ELSE</span> $<span class="Constant">1</span>.atttypmod <span class="Special">END</span>;<br/></li>
<li><br/></li>
<li><span class="Comment">-- these functions encapsulate knowledge about the encoding of typmod:<br/></li>
<li></span><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">FUNCTION</span> _pg_char_max_length(typid oid, typmod int4) RETURNS <span class="Type">integer<br/></li>
<li></span>&nbsp; &nbsp; LANGUAGE sql<br/></li>
<li>&nbsp; &nbsp; IMMUTABLE<br/></li>
<li>&nbsp; &nbsp; <span class="Special">PARALLEL</span> SAFE<br/></li>
<li>&nbsp; &nbsp; RETURNS <span class="Special">NULL</span> <span class="Special">ON</span> <span class="Special">NULL</span> INPUT<br/></li>
<li><span class="Special">RETURN<br/></li>
<li></span>&nbsp; <span class="Special">CASE</span> <span class="Special">WHEN</span> $<span class="Constant">2</span> = <span class="Constant">-1</span> <span class="Comment">/* default typmod */<br/></li>
<li></span>&nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">THEN</span> <span class="Special">null<br/></li>
<li></span>&nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">WHEN</span> $<span class="Constant">1</span> <span class="Statement">IN</span> (<span class="Constant">1042</span>, <span class="Constant">1043</span>) <span class="Comment">/* char, varchar */<br/></li>
<li></span>&nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">THEN</span> $<span class="Constant">2</span> - <span class="Constant">4<br/></li>
<li></span>&nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">WHEN</span> $<span class="Constant">1</span> <span class="Statement">IN</span> (<span class="Constant">1560</span>, <span class="Constant">1562</span>) <span class="Comment">/* bit, varbit */<br/></li>
<li></span>&nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">THEN</span> $<span class="Constant">2<br/></li>
<li></span>&nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">ELSE</span> <span class="Special">null<br/></li>
<li></span>&nbsp; <span class="Special">END</span>;<br/></li>
<li><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">FUNCTION</span> _pg_char_octet_length(typid oid, typmod int4) RETURNS <span class="Type">integer<br/></li>
<li></span>&nbsp; &nbsp; LANGUAGE sql<br/></li>
<li>&nbsp; &nbsp; IMMUTABLE<br/></li>
<li>&nbsp; &nbsp; <span class="Special">PARALLEL</span> SAFE<br/></li>
<li>&nbsp; &nbsp; RETURNS <span class="Special">NULL</span> <span class="Special">ON</span> <span class="Special">NULL</span> INPUT<br/></li>
<li><span class="Special">RETURN<br/></li>
<li></span>&nbsp; <span class="Special">CASE</span> <span class="Special">WHEN</span> $<span class="Constant">1</span> <span class="Statement">IN</span> (<span class="Constant">25</span>, <span class="Constant">1042</span>, <span class="Constant">1043</span>) <span class="Comment">/* text, char, varchar */<br/></li>
<li></span>&nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">THEN</span> <span class="Special">CASE</span> <span class="Special">WHEN</span> $<span class="Constant">2</span> = <span class="Constant">-1</span> <span class="Comment">/* default typmod */<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">THEN</span> <span class="Identifier">CAST</span>(<span class="Constant">2</span>^<span class="Constant">30</span> <span class="Special">AS</span> <span class="Type">integer</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">ELSE</span> information_schema._pg_char_max_length($<span class="Constant">1</span>, $<span class="Constant">2</span>) *<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pg_catalog.pg_encoding_max_length((<span class="Statement">SELECT</span> encoding <span class="Special">FROM</span> pg_catalog.pg_database <span class="Special">WHERE</span> datname = pg_catalog.current_database()))<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">END<br/></li>
<li></span>&nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">ELSE</span> <span class="Special">null<br/></li>
<li></span>&nbsp; <span class="Special">END</span>;<br/></li>
<li><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">FUNCTION</span> _pg_numeric_precision(typid oid, typmod int4) RETURNS <span class="Type">integer<br/></li>
<li></span>&nbsp; &nbsp; LANGUAGE sql<br/></li>
<li>&nbsp; &nbsp; IMMUTABLE<br/></li>
<li>&nbsp; &nbsp; <span class="Special">PARALLEL</span> SAFE<br/></li>
<li>&nbsp; &nbsp; RETURNS <span class="Special">NULL</span> <span class="Special">ON</span> <span class="Special">NULL</span> INPUT<br/></li>
<li><span class="Special">RETURN<br/></li>
<li></span>&nbsp; <span class="Special">CASE</span> $<span class="Constant">1<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">WHEN</span> <span class="Constant">21</span> <span class="Comment">/*int2*/</span> <span class="Special">THEN</span> <span class="Constant">16<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">WHEN</span> <span class="Constant">23</span> <span class="Comment">/*int4*/</span> <span class="Special">THEN</span> <span class="Constant">32<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">WHEN</span> <span class="Constant">20</span> <span class="Comment">/*int8*/</span> <span class="Special">THEN</span> <span class="Constant">64<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">WHEN</span> <span class="Constant">1700</span> <span class="Comment">/*numeric*/</span> <span class="Special">THEN<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">CASE</span> <span class="Special">WHEN</span> $<span class="Constant">2</span> = <span class="Constant">-1<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">THEN</span> <span class="Special">null<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">ELSE</span> (($<span class="Constant">2</span> - <span class="Constant">4</span>) &gt;&gt; <span class="Constant">16</span>) &amp; 0xFFFF<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">END<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">WHEN</span> <span class="Constant">700</span> <span class="Comment">/*float4*/</span> <span class="Special">THEN</span> <span class="Constant">24</span> <span class="Comment">/*FLT_MANT_DIG*/<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">WHEN</span> <span class="Constant">701</span> <span class="Comment">/*float8*/</span> <span class="Special">THEN</span> <span class="Constant">53</span> <span class="Comment">/*DBL_MANT_DIG*/<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">ELSE</span> <span class="Special">null<br/></li>
<li></span>&nbsp; <span class="Special">END</span>;<br/></li>
<li><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">FUNCTION</span> _pg_numeric_precision_radix(typid oid, typmod int4) RETURNS <span class="Type">integer<br/></li>
<li></span>&nbsp; &nbsp; LANGUAGE sql<br/></li>
<li>&nbsp; &nbsp; IMMUTABLE<br/></li>
<li>&nbsp; &nbsp; <span class="Special">PARALLEL</span> SAFE<br/></li>
<li>&nbsp; &nbsp; RETURNS <span class="Special">NULL</span> <span class="Special">ON</span> <span class="Special">NULL</span> INPUT<br/></li>
<li><span class="Special">RETURN<br/></li>
<li></span>&nbsp; <span class="Special">CASE</span> <span class="Special">WHEN</span> $<span class="Constant">1</span> <span class="Statement">IN</span> (<span class="Constant">21</span>, <span class="Constant">23</span>, <span class="Constant">20</span>, <span class="Constant">700</span>, <span class="Constant">701</span>) <span class="Special">THEN</span> <span class="Constant">2<br/></li>
<li></span>&nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">WHEN</span> $<span class="Constant">1</span> <span class="Statement">IN</span> (<span class="Constant">1700</span>) <span class="Special">THEN</span> <span class="Constant">10<br/></li>
<li></span>&nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">ELSE</span> <span class="Special">null<br/></li>
<li></span>&nbsp; <span class="Special">END</span>;<br/></li>
<li><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">FUNCTION</span> _pg_numeric_scale(typid oid, typmod int4) RETURNS <span class="Type">integer<br/></li>
<li></span>&nbsp; &nbsp; LANGUAGE sql<br/></li>
<li>&nbsp; &nbsp; IMMUTABLE<br/></li>
<li>&nbsp; &nbsp; <span class="Special">PARALLEL</span> SAFE<br/></li>
<li>&nbsp; &nbsp; RETURNS <span class="Special">NULL</span> <span class="Special">ON</span> <span class="Special">NULL</span> INPUT<br/></li>
<li><span class="Special">RETURN<br/></li>
<li></span>&nbsp; <span class="Special">CASE</span> <span class="Special">WHEN</span> $<span class="Constant">1</span> <span class="Statement">IN</span> (<span class="Constant">21</span>, <span class="Constant">23</span>, <span class="Constant">20</span>) <span class="Special">THEN</span> <span class="Constant">0<br/></li>
<li></span>&nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">WHEN</span> $<span class="Constant">1</span> <span class="Statement">IN</span> (<span class="Constant">1700</span>) <span class="Special">THEN<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">CASE</span> <span class="Special">WHEN</span> $<span class="Constant">2</span> = <span class="Constant">-1<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">THEN</span> <span class="Special">null<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">ELSE</span> ($<span class="Constant">2</span> - <span class="Constant">4</span>) &amp; 0xFFFF<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">END<br/></li>
<li></span>&nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">ELSE</span> <span class="Special">null<br/></li>
<li></span>&nbsp; <span class="Special">END</span>;<br/></li>
<li><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">FUNCTION</span> _pg_datetime_precision(typid oid, typmod int4) RETURNS <span class="Type">integer<br/></li>
<li></span>&nbsp; &nbsp; LANGUAGE sql<br/></li>
<li>&nbsp; &nbsp; IMMUTABLE<br/></li>
<li>&nbsp; &nbsp; <span class="Special">PARALLEL</span> SAFE<br/></li>
<li>&nbsp; &nbsp; RETURNS <span class="Special">NULL</span> <span class="Special">ON</span> <span class="Special">NULL</span> INPUT<br/></li>
<li><span class="Special">RETURN<br/></li>
<li></span>&nbsp; <span class="Special">CASE</span> <span class="Special">WHEN</span> $<span class="Constant">1</span> <span class="Statement">IN</span> (<span class="Constant">1082</span>) <span class="Comment">/* date */<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">THEN</span> <span class="Constant">0<br/></li>
<li></span>&nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">WHEN</span> $<span class="Constant">1</span> <span class="Statement">IN</span> (<span class="Constant">1083</span>, <span class="Constant">1114</span>, <span class="Constant">1184</span>, <span class="Constant">1266</span>) <span class="Comment">/* time, timestamp, same + tz */<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">THEN</span> <span class="Special">CASE</span> <span class="Special">WHEN</span> $<span class="Constant">2</span> &lt; <span class="Constant">0</span> <span class="Special">THEN</span> <span class="Constant">6</span> <span class="Special">ELSE</span> $<span class="Constant">2</span> <span class="Special">END<br/></li>
<li></span>&nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">WHEN</span> $<span class="Constant">1</span> <span class="Statement">IN</span> (<span class="Constant">1186</span>) <span class="Comment">/* interval */<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">THEN</span> <span class="Special">CASE</span> <span class="Special">WHEN</span> $<span class="Constant">2</span> &lt; <span class="Constant">0</span> <span class="Statement">OR</span> $<span class="Constant">2</span> &amp; 0xFFFF = 0xFFFF <span class="Special">THEN</span> <span class="Constant">6</span> <span class="Special">ELSE</span> $<span class="Constant">2</span> &amp; 0xFFFF <span class="Special">END<br/></li>
<li></span>&nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">ELSE</span> <span class="Special">null<br/></li>
<li></span>&nbsp; <span class="Special">END</span>;<br/></li>
<li><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">FUNCTION</span> _pg_interval_type(typid oid, <span class="Identifier">mod</span> int4) RETURNS text<br/></li>
<li>&nbsp; &nbsp; LANGUAGE sql<br/></li>
<li>&nbsp; &nbsp; IMMUTABLE<br/></li>
<li>&nbsp; &nbsp; <span class="Special">PARALLEL</span> SAFE<br/></li>
<li>&nbsp; &nbsp; RETURNS <span class="Special">NULL</span> <span class="Special">ON</span> <span class="Special">NULL</span> INPUT<br/></li>
<li><span class="Special">RETURN<br/></li>
<li></span>&nbsp; <span class="Special">CASE</span> <span class="Special">WHEN</span> $<span class="Constant">1</span> <span class="Statement">IN</span> (<span class="Constant">1186</span>) <span class="Comment">/* interval */<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">THEN</span> pg_catalog.<span class="Identifier">upper</span>(substring(pg_catalog.format_type($<span class="Constant">1</span>, $<span class="Constant">2</span>) similar <span class="Special">'</span><span class="Constant">interval[()0-9]* #&quot;%#&quot;</span><span class="Special">'</span> <span class="Statement">escape</span> <span class="Special">'</span><span class="Constant">#</span><span class="Special">'</span>))<br/></li>
<li>&nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">ELSE</span> <span class="Special">null<br/></li>
<li></span>&nbsp; <span class="Special">END</span>;<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Comment">-- 6.3 INFORMATION_SCHEMA_CATALOG_NAME view appears later.<br/></li>
<li></span><br/></li>
<li><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * 6.4<br/></li>
<li></span><span class="Comment"> * CARDINAL_NUMBER domain<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><br/></li>
<li><span class="Statement">CREATE</span> DOMAIN cardinal_number <span class="Special">AS</span> <span class="Type">integer<br/></li>
<li></span>&nbsp; &nbsp; CONSTRAINT cardinal_number_domain_check <span class="Special">CHECK</span> (value &gt;= <span class="Constant">0</span>);<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * 6.5<br/></li>
<li></span><span class="Comment"> * CHARACTER_DATA domain<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><br/></li>
<li><span class="Statement">CREATE</span> DOMAIN character_data <span class="Special">AS</span> <span class="Type">character</span> varying COLLATE <span class="Special">&quot;</span><span class="Constant">C</span><span class="Special">&quot;</span>;<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * 6.6<br/></li>
<li></span><span class="Comment"> * SQL_IDENTIFIER domain<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><br/></li>
<li><span class="Statement">CREATE</span> DOMAIN sql_identifier <span class="Special">AS</span> name;<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * 6.3<br/></li>
<li></span><span class="Comment"> * INFORMATION_SCHEMA_CATALOG_NAME view<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> information_schema_catalog_name <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT</span> <span class="Identifier">CAST</span>(current_database() <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> catalog_name;<br/></li>
<li><br/></li>
<li><span class="Statement">GRANT</span> SELECT <span class="Special">ON</span> information_schema_catalog_name <span class="Special">TO</span> <span class="Special">PUBLIC</span>;<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * 6.7<br/></li>
<li></span><span class="Comment"> * TIME_STAMP domain<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><br/></li>
<li><span class="Statement">CREATE</span> DOMAIN time_stamp <span class="Special">AS</span> <span class="Type">timestamp</span>(<span class="Constant">2</span>) <span class="Special">with</span> time zone<br/></li>
<li>&nbsp; &nbsp; <span class="Special">DEFAULT</span> <span class="Identifier">current_timestamp</span>(<span class="Constant">2</span>);<br/></li>
<li><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * 6.8<br/></li>
<li></span><span class="Comment"> * YES_OR_NO domain<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><br/></li>
<li><span class="Statement">CREATE</span> DOMAIN yes_or_no <span class="Special">AS</span> <span class="Type">character</span> varying(<span class="Constant">3</span>) COLLATE <span class="Special">&quot;</span><span class="Constant">C</span><span class="Special">&quot;<br/></li>
<li></span>&nbsp; &nbsp; CONSTRAINT yes_or_no_check <span class="Special">CHECK</span> (value <span class="Statement">IN</span> (<span class="Special">'</span><span class="Constant">YES</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">NO</span><span class="Special">'</span>));<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Comment">-- 6.9 ADMINISTRABLE_ROLE_AUTHORIZATIONS view appears later.<br/></li>
<li></span><br/></li>
<li><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * 6.10<br/></li>
<li></span><span class="Comment"> * APPLICABLE_ROLES view<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> applicable_roles <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT</span> <span class="Identifier">CAST</span>(a.rolname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> grantee,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(b.rolname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> role_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">CASE</span> <span class="Special">WHEN</span> m.admin_option <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">YES</span><span class="Special">'</span> <span class="Special">ELSE</span> <span class="Special">'</span><span class="Constant">NO</span><span class="Special">'</span> <span class="Special">END</span> <span class="Special">AS</span> yes_or_no) <span class="Special">AS</span> is_grantable<br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> (<span class="Statement">SELECT</span> member, roleid, admin_option <span class="Special">FROM</span> pg_auth_members<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Comment">-- This UNION could be UNION ALL, but UNION works even if we start<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Comment">-- to allow explicit pg_database_owner membership.<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">UNION<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">SELECT</span> datdba, pg_authid.oid, <span class="Special">false<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">FROM</span> pg_database, pg_authid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHERE</span> datname = current_database() <span class="Statement">AND</span> rolname = <span class="Special">'</span><span class="Constant">pg_database_owner</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; )&nbsp; m<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">JOIN</span> pg_authid a <span class="Special">ON</span> (m.member = a.oid)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">JOIN</span> pg_authid b <span class="Special">ON</span> (m.roleid = b.oid)<br/></li>
<li>&nbsp; &nbsp; <span class="Special">WHERE</span> pg_has_role(a.oid, <span class="Special">'</span><span class="Constant">USAGE</span><span class="Special">'</span>);<br/></li>
<li><br/></li>
<li><span class="Statement">GRANT</span> SELECT <span class="Special">ON</span> applicable_roles <span class="Special">TO</span> <span class="Special">PUBLIC</span>;<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * 6.9<br/></li>
<li></span><span class="Comment"> * ADMINISTRABLE_ROLE_AUTHORIZATIONS view<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> administrable_role_authorizations <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT</span> *<br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> applicable_roles<br/></li>
<li>&nbsp; &nbsp; <span class="Special">WHERE</span> is_grantable = <span class="Special">'</span><span class="Constant">YES</span><span class="Special">'</span>;<br/></li>
<li><br/></li>
<li><span class="Statement">GRANT</span> SELECT <span class="Special">ON</span> administrable_role_authorizations <span class="Special">TO</span> <span class="Special">PUBLIC</span>;<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * 6.11<br/></li>
<li></span><span class="Comment"> * ASSERTIONS view<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><br/></li>
<li><span class="Comment">-- feature not supported<br/></li>
<li></span><br/></li>
<li><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * 6.12<br/></li>
<li></span><span class="Comment"> * ATTRIBUTES view<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> attributes <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT</span> <span class="Identifier">CAST</span>(current_database() <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> udt_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(nc.nspname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> udt_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(c.relname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> udt_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(a.attname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> attribute_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(a.attnum <span class="Special">AS</span> cardinal_number) <span class="Special">AS</span> ordinal_position,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(pg_get_expr(ad.adbin, ad.adrelid) <span class="Special">AS</span> character_data) <span class="Special">AS</span> attribute_default,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">CASE</span> <span class="Special">WHEN</span> a.attnotnull <span class="Statement">OR</span> (t.typtype = <span class="Special">'</span><span class="Constant">d</span><span class="Special">'</span> <span class="Statement">AND</span> t.typnotnull) <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">NO</span><span class="Special">'</span> <span class="Special">ELSE</span> <span class="Special">'</span><span class="Constant">YES</span><span class="Special">'</span> <span class="Special">END<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">AS</span> yes_or_no)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">AS</span> is_nullable, <span class="Comment">-- This column was apparently removed between SQL:2003 and SQL:2008.<br/></li>
<li></span><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">CASE</span> <span class="Special">WHEN</span> t.typelem &lt;&gt; <span class="Constant">0</span> <span class="Statement">AND</span> t.typlen = <span class="Constant">-1</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">ARRAY</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> nt.nspname = <span class="Special">'</span><span class="Constant">pg_catalog</span><span class="Special">'</span> <span class="Special">THEN</span> format_type(a.atttypid, <span class="Special">null</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">ELSE</span> <span class="Special">'</span><span class="Constant">USER-DEFINED</span><span class="Special">'</span> <span class="Special">END<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">AS</span> character_data)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">AS</span> data_type,<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; _pg_char_max_length(_pg_truetypid(a, t), _pg_truetypmod(a, t))<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">AS</span> cardinal_number)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">AS</span> character_maximum_length,<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; _pg_char_octet_length(_pg_truetypid(a, t), _pg_truetypmod(a, t))<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">AS</span> cardinal_number)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">AS</span> character_octet_length,<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> character_set_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> character_set_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> character_set_name,<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">CASE</span> <span class="Special">WHEN</span> nco.nspname <span class="Special">IS</span> <span class="Statement">NOT</span> <span class="Special">NULL</span> <span class="Special">THEN</span> current_database() <span class="Special">END</span> <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> collation_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(nco.nspname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> collation_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(co.collname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> collation_name,<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; _pg_numeric_precision(_pg_truetypid(a, t), _pg_truetypmod(a, t))<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">AS</span> cardinal_number)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">AS</span> numeric_precision,<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; _pg_numeric_precision_radix(_pg_truetypid(a, t), _pg_truetypmod(a, t))<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">AS</span> cardinal_number)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">AS</span> numeric_precision_radix,<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; _pg_numeric_scale(_pg_truetypid(a, t), _pg_truetypmod(a, t))<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">AS</span> cardinal_number)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">AS</span> numeric_scale,<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; _pg_datetime_precision(_pg_truetypid(a, t), _pg_truetypmod(a, t))<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">AS</span> cardinal_number)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">AS</span> datetime_precision,<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; _pg_interval_type(_pg_truetypid(a, t), _pg_truetypmod(a, t))<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">AS</span> character_data)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">AS</span> interval_type,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> cardinal_number) <span class="Special">AS</span> interval_precision,<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(current_database() <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> attribute_udt_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(nt.nspname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> attribute_udt_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(t.typname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> attribute_udt_name,<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> scope_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> scope_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> scope_name,<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> cardinal_number) <span class="Special">AS</span> maximum_cardinality,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(a.attnum <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> dtd_identifier,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">'</span><span class="Constant">NO</span><span class="Special">'</span> <span class="Special">AS</span> yes_or_no) <span class="Special">AS</span> is_derived_reference_attribute<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> (pg_attribute a <span class="Special">LEFT</span> <span class="Special">JOIN</span> pg_attrdef ad <span class="Special">ON</span> attrelid = adrelid <span class="Statement">AND</span> attnum = adnum)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">JOIN</span> (pg_class c <span class="Special">JOIN</span> pg_namespace nc <span class="Special">ON</span> (c.relnamespace = nc.oid)) <span class="Special">ON</span> a.attrelid = c.oid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">JOIN</span> (pg_type t <span class="Special">JOIN</span> pg_namespace nt <span class="Special">ON</span> (t.typnamespace = nt.oid)) <span class="Special">ON</span> a.atttypid = t.oid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">LEFT</span> <span class="Special">JOIN</span> (pg_collation co <span class="Special">JOIN</span> pg_namespace nco <span class="Special">ON</span> (co.collnamespace = nco.oid))<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">ON</span> a.attcollation = co.oid <span class="Statement">AND</span> (nco.nspname, co.collname) &lt;&gt; (<span class="Special">'</span><span class="Constant">pg_catalog</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">default</span><span class="Special">'</span>)<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Special">WHERE</span> a.attnum &gt; <span class="Constant">0</span> <span class="Statement">AND</span> <span class="Statement">NOT</span> a.attisdropped<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> c.relkind <span class="Statement">IN</span> (<span class="Special">'</span><span class="Constant">c</span><span class="Special">'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> (pg_has_role(c.relowner, <span class="Special">'</span><span class="Constant">USAGE</span><span class="Special">'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">OR</span> has_type_privilege(c.reltype, <span class="Special">'</span><span class="Constant">USAGE</span><span class="Special">'</span>));<br/></li>
<li><br/></li>
<li><span class="Statement">GRANT</span> SELECT <span class="Special">ON</span> attributes <span class="Special">TO</span> <span class="Special">PUBLIC</span>;<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * 6.13<br/></li>
<li></span><span class="Comment"> * CHARACTER_SETS view<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> character_sets <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT</span> <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> character_set_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> character_set_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(getdatabaseencoding() <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> character_set_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">CASE</span> <span class="Special">WHEN</span> getdatabaseencoding() = <span class="Special">'</span><span class="Constant">UTF8</span><span class="Special">'</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">UCS</span><span class="Special">'</span> <span class="Special">ELSE</span> getdatabaseencoding() <span class="Special">END</span> <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> character_repertoire,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(getdatabaseencoding() <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> form_of_use,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(current_database() <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> default_collate_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(nc.nspname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> default_collate_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(c.collname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> default_collate_name<br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> pg_database d<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">LEFT</span> <span class="Special">JOIN</span> (pg_collation c <span class="Special">JOIN</span> pg_namespace nc <span class="Special">ON</span> (c.collnamespace = nc.oid))<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">ON</span> (datcollate = collcollate <span class="Statement">AND</span> datctype = collctype)<br/></li>
<li>&nbsp; &nbsp; <span class="Special">WHERE</span> d.datname = current_database()<br/></li>
<li>&nbsp; &nbsp; <span class="Special">ORDER</span> <span class="Special">BY</span> char_length(c.collname) <span class="Special">DESC</span>, c.collname <span class="Special">ASC</span> <span class="Comment">-- prefer full/canonical name<br/></li>
<li></span>&nbsp; &nbsp; LIMIT <span class="Constant">1</span>;<br/></li>
<li><br/></li>
<li><span class="Statement">GRANT</span> SELECT <span class="Special">ON</span> character_sets <span class="Special">TO</span> <span class="Special">PUBLIC</span>;<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * 6.14<br/></li>
<li></span><span class="Comment"> * CHECK_CONSTRAINT_ROUTINE_USAGE view<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> check_constraint_routine_usage <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT</span> <span class="Statement">DISTINCT<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(current_database() <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> constraint_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(nc.nspname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> constraint_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(c.conname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> constraint_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(current_database() <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> specific_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(np.nspname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> specific_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(nameconcatoid(p.proname, p.oid) <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> specific_name<br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> pg_namespace nc, pg_constraint c, pg_depend d, pg_proc p, pg_namespace np<br/></li>
<li>&nbsp; &nbsp; <span class="Special">WHERE</span> nc.oid = c.connamespace<br/></li>
<li>&nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> c.contype = <span class="Special">'</span><span class="Constant">c</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> c.oid = d.objid<br/></li>
<li>&nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> d.classid = <span class="Special">'</span><span class="Constant">pg_catalog.pg_constraint</span><span class="Special">'</span>::regclass<br/></li>
<li>&nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> d.refobjid = p.oid<br/></li>
<li>&nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> d.refclassid = <span class="Special">'</span><span class="Constant">pg_catalog.pg_proc</span><span class="Special">'</span>::regclass<br/></li>
<li>&nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> p.pronamespace = np.oid<br/></li>
<li>&nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> pg_has_role(p.proowner, <span class="Special">'</span><span class="Constant">USAGE</span><span class="Special">'</span>);<br/></li>
<li><br/></li>
<li><span class="Statement">GRANT</span> SELECT <span class="Special">ON</span> check_constraint_routine_usage <span class="Special">TO</span> <span class="Special">PUBLIC</span>;<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * 6.15<br/></li>
<li></span><span class="Comment"> * CHECK_CONSTRAINTS view<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> check_constraints <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT</span> <span class="Identifier">CAST</span>(current_database() <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> constraint_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(rs.nspname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> constraint_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(con.conname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> constraint_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(pg_get_expr(con.conbin, <span class="Identifier">coalesce</span>(c.oid, <span class="Constant">0</span>)) <span class="Special">AS</span> character_data) <span class="Special">AS</span> check_clause<br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> pg_constraint con<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">LEFT</span> <span class="Special">OUTER</span> <span class="Special">JOIN</span> pg_namespace rs <span class="Special">ON</span> (rs.oid = con.connamespace)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">LEFT</span> <span class="Special">OUTER</span> <span class="Special">JOIN</span> pg_class c <span class="Special">ON</span> (c.oid = con.conrelid)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">LEFT</span> <span class="Special">OUTER</span> <span class="Special">JOIN</span> pg_type t <span class="Special">ON</span> (t.oid = con.contypid)<br/></li>
<li>&nbsp; &nbsp; <span class="Special">WHERE</span> pg_has_role(<span class="Identifier">coalesce</span>(c.relowner, t.typowner), <span class="Special">'</span><span class="Constant">USAGE</span><span class="Special">'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> con.contype = <span class="Special">'</span><span class="Constant">c</span><span class="Special">'<br/></li>
<li></span><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">UNION</span> <span class="Statement">ALL<br/></li>
<li></span>&nbsp; &nbsp; <span class="Comment">-- not-null constraints<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT</span> current_database()::information_schema.sql_identifier <span class="Special">AS</span> constraint_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; rs.nspname::information_schema.sql_identifier <span class="Special">AS</span> constraint_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; con.conname::information_schema.sql_identifier <span class="Special">AS</span> constraint_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; pg_catalog.format(<span class="Special">'</span><span class="Constant">%s IS NOT NULL</span><span class="Special">'</span>, <span class="Identifier">coalesce</span>(at.attname, <span class="Special">'</span><span class="Constant">VALUE</span><span class="Special">'</span>))::information_schema.character_data <span class="Special">AS</span> check_clause<br/></li>
<li>&nbsp; &nbsp;&nbsp; <span class="Special">FROM</span> pg_constraint con<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">LEFT</span> <span class="Special">JOIN</span> pg_namespace rs <span class="Special">ON</span> rs.oid = con.connamespace<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">LEFT</span> <span class="Special">JOIN</span> pg_class c <span class="Special">ON</span> c.oid = con.conrelid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">LEFT</span> <span class="Special">JOIN</span> pg_type t <span class="Special">ON</span> t.oid = con.contypid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">LEFT</span> <span class="Special">JOIN</span> pg_attribute at <span class="Special">ON</span> (con.conrelid = at.attrelid <span class="Statement">AND</span> con.conkey[<span class="Constant">1</span>] = at.attnum)<br/></li>
<li>&nbsp; &nbsp;&nbsp; <span class="Special">WHERE</span> pg_has_role(<span class="Identifier">coalesce</span>(c.relowner, t.typowner), <span class="Special">'</span><span class="Constant">USAGE</span><span class="Special">'</span>::text)<br/></li>
<li>&nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">AND</span> con.contype = <span class="Special">'</span><span class="Constant">n</span><span class="Special">'</span>;<br/></li>
<li><br/></li>
<li><span class="Statement">GRANT</span> SELECT <span class="Special">ON</span> check_constraints <span class="Special">TO</span> <span class="Special">PUBLIC</span>;<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * 6.16<br/></li>
<li></span><span class="Comment"> * COLLATIONS view<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> collations <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT</span> <span class="Identifier">CAST</span>(current_database() <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> collation_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(nc.nspname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> collation_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(c.collname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> collation_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">'</span><span class="Constant">NO PAD</span><span class="Special">'</span> <span class="Special">AS</span> character_data) <span class="Special">AS</span> pad_attribute<br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> pg_collation c, pg_namespace nc<br/></li>
<li>&nbsp; &nbsp; <span class="Special">WHERE</span> c.collnamespace = nc.oid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> collencoding <span class="Statement">IN</span> (<span class="Constant">-1</span>, (<span class="Statement">SELECT</span> encoding <span class="Special">FROM</span> pg_database <span class="Special">WHERE</span> datname = current_database()));<br/></li>
<li><br/></li>
<li><span class="Statement">GRANT</span> SELECT <span class="Special">ON</span> collations <span class="Special">TO</span> <span class="Special">PUBLIC</span>;<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * 6.17<br/></li>
<li></span><span class="Comment"> * COLLATION_CHARACTER_SET_APPLICABILITY view<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> collation_character_set_applicability <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT</span> <span class="Identifier">CAST</span>(current_database() <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> collation_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(nc.nspname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> collation_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(c.collname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> collation_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> character_set_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> character_set_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(getdatabaseencoding() <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> character_set_name<br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> pg_collation c, pg_namespace nc<br/></li>
<li>&nbsp; &nbsp; <span class="Special">WHERE</span> c.collnamespace = nc.oid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> collencoding <span class="Statement">IN</span> (<span class="Constant">-1</span>, (<span class="Statement">SELECT</span> encoding <span class="Special">FROM</span> pg_database <span class="Special">WHERE</span> datname = current_database()));<br/></li>
<li><br/></li>
<li><span class="Statement">GRANT</span> SELECT <span class="Special">ON</span> collation_character_set_applicability <span class="Special">TO</span> <span class="Special">PUBLIC</span>;<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * 6.18<br/></li>
<li></span><span class="Comment"> * COLUMN_COLUMN_USAGE view<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> column_column_usage <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT</span> <span class="Statement">DISTINCT<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(current_database() <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> table_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(n.nspname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> table_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(c.relname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> table_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(ac.attname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> column_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(ad.attname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> dependent_column<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> pg_namespace n, pg_class c, pg_depend d,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; pg_attribute ac, pg_attribute ad, pg_attrdef atd<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Special">WHERE</span> n.oid = c.relnamespace<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> c.oid = ac.attrelid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> c.oid = ad.attrelid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> ac.attnum &lt;&gt; ad.attnum<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> ad.attrelid = atd.adrelid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> ad.attnum = atd.adnum<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> d.classid = <span class="Special">'</span><span class="Constant">pg_catalog.pg_attrdef</span><span class="Special">'</span>::regclass<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> d.refclassid = <span class="Special">'</span><span class="Constant">pg_catalog.pg_class</span><span class="Special">'</span>::regclass<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> d.objid = atd.oid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> d.refobjid = ac.attrelid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> d.refobjsubid = ac.attnum<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> ad.attgenerated &lt;&gt; <span class="Special">''<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> pg_has_role(c.relowner, <span class="Special">'</span><span class="Constant">USAGE</span><span class="Special">'</span>);<br/></li>
<li><br/></li>
<li><span class="Statement">GRANT</span> SELECT <span class="Special">ON</span> column_column_usage <span class="Special">TO</span> <span class="Special">PUBLIC</span>;<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * 6.19<br/></li>
<li></span><span class="Comment"> * COLUMN_DOMAIN_USAGE view<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> column_domain_usage <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT</span> <span class="Identifier">CAST</span>(current_database() <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> domain_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(nt.nspname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> domain_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(t.typname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> domain_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(current_database() <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> table_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(nc.nspname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> table_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(c.relname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> table_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(a.attname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> column_name<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> pg_type t, pg_namespace nt, pg_class c, pg_namespace nc,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; pg_attribute a<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Special">WHERE</span> t.typnamespace = nt.oid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> c.relnamespace = nc.oid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> a.attrelid = c.oid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> a.atttypid = t.oid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> t.typtype = <span class="Special">'</span><span class="Constant">d</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> c.relkind <span class="Statement">IN</span> (<span class="Special">'</span><span class="Constant">r</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">v</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">f</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">p</span><span class="Special">'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> a.attnum &gt; <span class="Constant">0<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> <span class="Statement">NOT</span> a.attisdropped<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> pg_has_role(t.typowner, <span class="Special">'</span><span class="Constant">USAGE</span><span class="Special">'</span>);<br/></li>
<li><br/></li>
<li><span class="Statement">GRANT</span> SELECT <span class="Special">ON</span> column_domain_usage <span class="Special">TO</span> <span class="Special">PUBLIC</span>;<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * 6.20<br/></li>
<li></span><span class="Comment"> * COLUMN_PRIVILEGES<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> column_privileges <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT</span> <span class="Identifier">CAST</span>(u_grantor.rolname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> grantor,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(grantee.rolname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> grantee,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(current_database() <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> table_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(nc.nspname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> table_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(x.relname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> table_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(x.attname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> column_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(x.prtype <span class="Special">AS</span> character_data) <span class="Special">AS</span> privilege_type,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">CASE</span> <span class="Special">WHEN<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Comment">-- object owner always has grant options<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pg_has_role(x.grantee, x.relowner, <span class="Special">'</span><span class="Constant">USAGE</span><span class="Special">'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">OR</span> x.grantable<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">YES</span><span class="Special">'</span> <span class="Special">ELSE</span> <span class="Special">'</span><span class="Constant">NO</span><span class="Special">'</span> <span class="Special">END</span> <span class="Special">AS</span> yes_or_no) <span class="Special">AS</span> is_grantable<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> (<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">SELECT</span> pr_c.grantor,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pr_c.grantee,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; attname,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; relname,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; relnamespace,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pr_c.prtype,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pr_c.grantable,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pr_c.relowner<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">FROM</span> (<span class="Statement">SELECT</span> oid, relname, relnamespace, relowner, (aclexplode(<span class="Identifier">coalesce</span>(relacl, acldefault(<span class="Special">'</span><span class="Constant">r</span><span class="Special">'</span>, relowner)))).*<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">FROM</span> pg_class<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">WHERE</span> relkind <span class="Statement">IN</span> (<span class="Special">'</span><span class="Constant">r</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">v</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">f</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">p</span><span class="Special">'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ) pr_c (oid, relname, relnamespace, relowner, grantor, grantee, prtype, grantable),<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pg_attribute a<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">WHERE</span> a.attrelid = pr_c.oid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">AND</span> a.attnum &gt; <span class="Constant">0<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">AND</span> <span class="Statement">NOT</span> a.attisdropped<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">UNION<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">SELECT</span> pr_a.grantor,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pr_a.grantee,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; attname,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; relname,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; relnamespace,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pr_a.prtype,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pr_a.grantable,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; c.relowner<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">FROM</span> (<span class="Statement">SELECT</span> attrelid, attname, (aclexplode(<span class="Identifier">coalesce</span>(attacl, acldefault(<span class="Special">'</span><span class="Constant">c</span><span class="Special">'</span>, relowner)))).*<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">FROM</span> pg_attribute a <span class="Special">JOIN</span> pg_class cc <span class="Special">ON</span> (a.attrelid = cc.oid)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">WHERE</span> attnum &gt; <span class="Constant">0<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">AND</span> <span class="Statement">NOT</span> attisdropped<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ) pr_a (attrelid, attname, grantor, grantee, prtype, grantable),<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pg_class c<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">WHERE</span> pr_a.attrelid = c.oid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">AND</span> relkind <span class="Statement">IN</span> (<span class="Special">'</span><span class="Constant">r</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">v</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">f</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">p</span><span class="Special">'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ) x,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; pg_namespace nc,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; pg_authid u_grantor,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; (<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">SELECT</span> oid, rolname <span class="Special">FROM</span> pg_authid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">UNION</span> <span class="Statement">ALL<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">SELECT</span> <span class="Constant">0</span>::oid, <span class="Special">'</span><span class="Constant">PUBLIC</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ) <span class="Special">AS</span> grantee (oid, rolname)<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Special">WHERE</span> x.relnamespace = nc.oid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> x.grantee = grantee.oid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> x.grantor = u_grantor.oid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> x.prtype <span class="Statement">IN</span> (<span class="Special">'</span><span class="Constant">INSERT</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">SELECT</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">UPDATE</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">REFERENCES</span><span class="Special">'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> (pg_has_role(u_grantor.oid, <span class="Special">'</span><span class="Constant">USAGE</span><span class="Special">'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">OR</span> pg_has_role(grantee.oid, <span class="Special">'</span><span class="Constant">USAGE</span><span class="Special">'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">OR</span> grantee.rolname = <span class="Special">'</span><span class="Constant">PUBLIC</span><span class="Special">'</span>);<br/></li>
<li><br/></li>
<li><span class="Statement">GRANT</span> SELECT <span class="Special">ON</span> column_privileges <span class="Special">TO</span> <span class="Special">PUBLIC</span>;<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * 6.21<br/></li>
<li></span><span class="Comment"> * COLUMN_UDT_USAGE view<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> column_udt_usage <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT</span> <span class="Identifier">CAST</span>(current_database() <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> udt_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Identifier">coalesce</span>(nbt.nspname, nt.nspname) <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> udt_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Identifier">coalesce</span>(bt.typname, t.typname) <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> udt_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(current_database() <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> table_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(nc.nspname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> table_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(c.relname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> table_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(a.attname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> column_name<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> pg_attribute a, pg_class c, pg_namespace nc,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; (pg_type t <span class="Special">JOIN</span> pg_namespace nt <span class="Special">ON</span> (t.typnamespace = nt.oid))<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">LEFT</span> <span class="Special">JOIN</span> (pg_type bt <span class="Special">JOIN</span> pg_namespace nbt <span class="Special">ON</span> (bt.typnamespace = nbt.oid))<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">ON</span> (t.typtype = <span class="Special">'</span><span class="Constant">d</span><span class="Special">'</span> <span class="Statement">AND</span> t.typbasetype = bt.oid)<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Special">WHERE</span> a.attrelid = c.oid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> a.atttypid = t.oid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> nc.oid = c.relnamespace<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> a.attnum &gt; <span class="Constant">0</span> <span class="Statement">AND</span> <span class="Statement">NOT</span> a.attisdropped<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> c.relkind <span class="Statement">in</span> (<span class="Special">'</span><span class="Constant">r</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">v</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">f</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">p</span><span class="Special">'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> pg_has_role(<span class="Identifier">coalesce</span>(bt.typowner, t.typowner), <span class="Special">'</span><span class="Constant">USAGE</span><span class="Special">'</span>);<br/></li>
<li><br/></li>
<li><span class="Statement">GRANT</span> SELECT <span class="Special">ON</span> column_udt_usage <span class="Special">TO</span> <span class="Special">PUBLIC</span>;<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * 6.22<br/></li>
<li></span><span class="Comment"> * COLUMNS view<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> columns <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT</span> <span class="Identifier">CAST</span>(current_database() <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> table_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(nc.nspname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> table_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(c.relname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> table_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(a.attname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> column_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(a.attnum <span class="Special">AS</span> cardinal_number) <span class="Special">AS</span> ordinal_position,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">CASE</span> <span class="Special">WHEN</span> a.attgenerated = <span class="Special">''</span> <span class="Special">THEN</span> pg_get_expr(ad.adbin, ad.adrelid) <span class="Special">END</span> <span class="Special">AS</span> character_data) <span class="Special">AS</span> column_default,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">CASE</span> <span class="Special">WHEN</span> a.attnotnull <span class="Statement">OR</span> (t.typtype = <span class="Special">'</span><span class="Constant">d</span><span class="Special">'</span> <span class="Statement">AND</span> t.typnotnull) <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">NO</span><span class="Special">'</span> <span class="Special">ELSE</span> <span class="Special">'</span><span class="Constant">YES</span><span class="Special">'</span> <span class="Special">END<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">AS</span> yes_or_no)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">AS</span> is_nullable,<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">CASE</span> <span class="Special">WHEN</span> t.typtype = <span class="Special">'</span><span class="Constant">d</span><span class="Special">'</span> <span class="Special">THEN<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">CASE</span> <span class="Special">WHEN</span> bt.typelem &lt;&gt; <span class="Constant">0</span> <span class="Statement">AND</span> bt.typlen = <span class="Constant">-1</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">ARRAY</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> nbt.nspname = <span class="Special">'</span><span class="Constant">pg_catalog</span><span class="Special">'</span> <span class="Special">THEN</span> format_type(t.typbasetype, <span class="Special">null</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">ELSE</span> <span class="Special">'</span><span class="Constant">USER-DEFINED</span><span class="Special">'</span> <span class="Special">END<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">ELSE<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">CASE</span> <span class="Special">WHEN</span> t.typelem &lt;&gt; <span class="Constant">0</span> <span class="Statement">AND</span> t.typlen = <span class="Constant">-1</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">ARRAY</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> nt.nspname = <span class="Special">'</span><span class="Constant">pg_catalog</span><span class="Special">'</span> <span class="Special">THEN</span> format_type(a.atttypid, <span class="Special">null</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">ELSE</span> <span class="Special">'</span><span class="Constant">USER-DEFINED</span><span class="Special">'</span> <span class="Special">END<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">END<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">AS</span> character_data)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">AS</span> data_type,<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; _pg_char_max_length(_pg_truetypid(a, t), _pg_truetypmod(a, t))<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">AS</span> cardinal_number)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">AS</span> character_maximum_length,<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; _pg_char_octet_length(_pg_truetypid(a, t), _pg_truetypmod(a, t))<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">AS</span> cardinal_number)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">AS</span> character_octet_length,<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; _pg_numeric_precision(_pg_truetypid(a, t), _pg_truetypmod(a, t))<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">AS</span> cardinal_number)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">AS</span> numeric_precision,<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; _pg_numeric_precision_radix(_pg_truetypid(a, t), _pg_truetypmod(a, t))<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">AS</span> cardinal_number)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">AS</span> numeric_precision_radix,<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; _pg_numeric_scale(_pg_truetypid(a, t), _pg_truetypmod(a, t))<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">AS</span> cardinal_number)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">AS</span> numeric_scale,<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; _pg_datetime_precision(_pg_truetypid(a, t), _pg_truetypmod(a, t))<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">AS</span> cardinal_number)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">AS</span> datetime_precision,<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; _pg_interval_type(_pg_truetypid(a, t), _pg_truetypmod(a, t))<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">AS</span> character_data)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">AS</span> interval_type,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> cardinal_number) <span class="Special">AS</span> interval_precision,<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> character_set_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> character_set_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> character_set_name,<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">CASE</span> <span class="Special">WHEN</span> nco.nspname <span class="Special">IS</span> <span class="Statement">NOT</span> <span class="Special">NULL</span> <span class="Special">THEN</span> current_database() <span class="Special">END</span> <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> collation_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(nco.nspname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> collation_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(co.collname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> collation_name,<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">CASE</span> <span class="Special">WHEN</span> t.typtype = <span class="Special">'</span><span class="Constant">d</span><span class="Special">'</span> <span class="Special">THEN</span> current_database() <span class="Special">ELSE</span> <span class="Special">null</span> <span class="Special">END<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> domain_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">CASE</span> <span class="Special">WHEN</span> t.typtype = <span class="Special">'</span><span class="Constant">d</span><span class="Special">'</span> <span class="Special">THEN</span> nt.nspname <span class="Special">ELSE</span> <span class="Special">null</span> <span class="Special">END<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> domain_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">CASE</span> <span class="Special">WHEN</span> t.typtype = <span class="Special">'</span><span class="Constant">d</span><span class="Special">'</span> <span class="Special">THEN</span> t.typname <span class="Special">ELSE</span> <span class="Special">null</span> <span class="Special">END<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> domain_name,<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(current_database() <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> udt_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Identifier">coalesce</span>(nbt.nspname, nt.nspname) <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> udt_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Identifier">coalesce</span>(bt.typname, t.typname) <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> udt_name,<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> scope_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> scope_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> scope_name,<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> cardinal_number) <span class="Special">AS</span> maximum_cardinality,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(a.attnum <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> dtd_identifier,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">'</span><span class="Constant">NO</span><span class="Special">'</span> <span class="Special">AS</span> yes_or_no) <span class="Special">AS</span> is_self_referencing,<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">CASE</span> <span class="Special">WHEN</span> a.attidentity <span class="Statement">IN</span> (<span class="Special">'</span><span class="Constant">a</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">d</span><span class="Special">'</span>) <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">YES</span><span class="Special">'</span> <span class="Special">ELSE</span> <span class="Special">'</span><span class="Constant">NO</span><span class="Special">'</span> <span class="Special">END</span> <span class="Special">AS</span> yes_or_no) <span class="Special">AS</span> is_identity,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">CASE</span> a.attidentity <span class="Special">WHEN</span> <span class="Special">'</span><span class="Constant">a</span><span class="Special">'</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">ALWAYS</span><span class="Special">'</span> <span class="Special">WHEN</span> <span class="Special">'</span><span class="Constant">d</span><span class="Special">'</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">BY DEFAULT</span><span class="Special">'</span> <span class="Special">END</span> <span class="Special">AS</span> character_data) <span class="Special">AS</span> identity_generation,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(seq.seqstart <span class="Special">AS</span> character_data) <span class="Special">AS</span> identity_start,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(seq.seqincrement <span class="Special">AS</span> character_data) <span class="Special">AS</span> identity_increment,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(seq.seqmax <span class="Special">AS</span> character_data) <span class="Special">AS</span> identity_maximum,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(seq.seqmin <span class="Special">AS</span> character_data) <span class="Special">AS</span> identity_minimum,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">CASE</span> <span class="Special">WHEN</span> seq.seqcycle <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">YES</span><span class="Special">'</span> <span class="Special">ELSE</span> <span class="Special">'</span><span class="Constant">NO</span><span class="Special">'</span> <span class="Special">END</span> <span class="Special">AS</span> yes_or_no) <span class="Special">AS</span> identity_cycle,<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">CASE</span> <span class="Special">WHEN</span> a.attgenerated &lt;&gt; <span class="Special">''</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">ALWAYS</span><span class="Special">'</span> <span class="Special">ELSE</span> <span class="Special">'</span><span class="Constant">NEVER</span><span class="Special">'</span> <span class="Special">END</span> <span class="Special">AS</span> character_data) <span class="Special">AS</span> is_generated,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">CASE</span> <span class="Special">WHEN</span> a.attgenerated &lt;&gt; <span class="Special">''</span> <span class="Special">THEN</span> pg_get_expr(ad.adbin, ad.adrelid) <span class="Special">END</span> <span class="Special">AS</span> character_data) <span class="Special">AS</span> generation_expression,<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">CASE</span> <span class="Special">WHEN</span> c.relkind <span class="Statement">IN</span> (<span class="Special">'</span><span class="Constant">r</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">p</span><span class="Special">'</span>) <span class="Statement">OR<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (c.relkind <span class="Statement">IN</span> (<span class="Special">'</span><span class="Constant">v</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">f</span><span class="Special">'</span>) <span class="Statement">AND<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; pg_column_is_updatable(c.oid, a.attnum, <span class="Special">false</span>))<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">YES</span><span class="Special">'</span> <span class="Special">ELSE</span> <span class="Special">'</span><span class="Constant">NO</span><span class="Special">'</span> <span class="Special">END</span> <span class="Special">AS</span> yes_or_no) <span class="Special">AS</span> is_updatable<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> (pg_attribute a <span class="Special">LEFT</span> <span class="Special">JOIN</span> pg_attrdef ad <span class="Special">ON</span> attrelid = adrelid <span class="Statement">AND</span> attnum = adnum)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">JOIN</span> (pg_class c <span class="Special">JOIN</span> pg_namespace nc <span class="Special">ON</span> (c.relnamespace = nc.oid)) <span class="Special">ON</span> a.attrelid = c.oid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">JOIN</span> (pg_type t <span class="Special">JOIN</span> pg_namespace nt <span class="Special">ON</span> (t.typnamespace = nt.oid)) <span class="Special">ON</span> a.atttypid = t.oid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">LEFT</span> <span class="Special">JOIN</span> (pg_type bt <span class="Special">JOIN</span> pg_namespace nbt <span class="Special">ON</span> (bt.typnamespace = nbt.oid))<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">ON</span> (t.typtype = <span class="Special">'</span><span class="Constant">d</span><span class="Special">'</span> <span class="Statement">AND</span> t.typbasetype = bt.oid)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">LEFT</span> <span class="Special">JOIN</span> (pg_collation co <span class="Special">JOIN</span> pg_namespace nco <span class="Special">ON</span> (co.collnamespace = nco.oid))<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">ON</span> a.attcollation = co.oid <span class="Statement">AND</span> (nco.nspname, co.collname) &lt;&gt; (<span class="Special">'</span><span class="Constant">pg_catalog</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">default</span><span class="Special">'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">LEFT</span> <span class="Special">JOIN</span> (pg_depend dep <span class="Special">JOIN</span> pg_sequence seq <span class="Special">ON</span> (dep.classid = <span class="Special">'</span><span class="Constant">pg_class</span><span class="Special">'</span>::regclass <span class="Statement">AND</span> dep.objid = seq.seqrelid <span class="Statement">AND</span> dep.deptype = <span class="Special">'</span><span class="Constant">i</span><span class="Special">'</span>))<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">ON</span> (dep.refclassid = <span class="Special">'</span><span class="Constant">pg_class</span><span class="Special">'</span>::regclass <span class="Statement">AND</span> dep.refobjid = c.oid <span class="Statement">AND</span> dep.refobjsubid = a.attnum)<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Special">WHERE</span> (<span class="Statement">NOT</span> pg_is_other_temp_schema(nc.oid))<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> a.attnum &gt; <span class="Constant">0</span> <span class="Statement">AND</span> <span class="Statement">NOT</span> a.attisdropped<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> c.relkind <span class="Statement">IN</span> (<span class="Special">'</span><span class="Constant">r</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">v</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">f</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">p</span><span class="Special">'</span>)<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> (pg_has_role(c.relowner, <span class="Special">'</span><span class="Constant">USAGE</span><span class="Special">'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">OR</span> has_column_privilege(c.oid, a.attnum,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">'</span><span class="Constant">SELECT, INSERT, UPDATE, REFERENCES</span><span class="Special">'</span>));<br/></li>
<li><br/></li>
<li><span class="Statement">GRANT</span> SELECT <span class="Special">ON</span> columns <span class="Special">TO</span> <span class="Special">PUBLIC</span>;<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * 6.23<br/></li>
<li></span><span class="Comment"> * CONSTRAINT_COLUMN_USAGE view<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> constraint_column_usage <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT</span> <span class="Identifier">CAST</span>(current_database() <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> table_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(tblschema <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> table_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(tblname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> table_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(colname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> column_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(current_database() <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> constraint_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(cstrschema <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> constraint_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(cstrname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> constraint_name<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> (<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Comment">/* check constraints */<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">SELECT</span> <span class="Statement">DISTINCT</span> nr.nspname, r.relname, r.relowner, a.attname, nc.nspname, c.conname<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">FROM</span> pg_namespace nr, pg_class r, pg_attribute a, pg_depend d, pg_namespace nc, pg_constraint c<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHERE</span> nr.oid = r.relnamespace<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> r.oid = a.attrelid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> d.refclassid = <span class="Special">'</span><span class="Constant">pg_catalog.pg_class</span><span class="Special">'</span>::regclass<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> d.refobjid = r.oid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> d.refobjsubid = a.attnum<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> d.classid = <span class="Special">'</span><span class="Constant">pg_catalog.pg_constraint</span><span class="Special">'</span>::regclass<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> d.objid = c.oid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> c.connamespace = nc.oid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> c.contype = <span class="Special">'</span><span class="Constant">c</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> r.relkind <span class="Statement">IN</span> (<span class="Special">'</span><span class="Constant">r</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">p</span><span class="Special">'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> <span class="Statement">NOT</span> a.attisdropped<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">UNION</span> <span class="Statement">ALL<br/></li>
<li></span><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Comment">/* not-null constraints */<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">SELECT</span> <span class="Statement">DISTINCT</span> nr.nspname, r.relname, r.relowner, a.attname, nc.nspname, c.conname<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">FROM</span> pg_namespace nr, pg_class r, pg_attribute a, pg_namespace nc, pg_constraint c<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHERE</span> nr.oid = r.relnamespace<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> r.oid = a.attrelid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> r.oid = c.conrelid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> a.attnum = c.conkey[<span class="Constant">1</span>]<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> c.connamespace = nc.oid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> c.contype = <span class="Special">'</span><span class="Constant">n</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> r.relkind <span class="Statement">in</span> (<span class="Special">'</span><span class="Constant">r</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">p</span><span class="Special">'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> <span class="Statement">not</span> a.attisdropped<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">UNION</span> <span class="Statement">ALL<br/></li>
<li></span><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Comment">/* unique/primary key/foreign key constraints */<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">SELECT</span> nr.nspname, r.relname, r.relowner, a.attname, nc.nspname, c.conname<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">FROM</span> pg_namespace nr, pg_class r, pg_attribute a, pg_namespace nc,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; pg_constraint c<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHERE</span> nr.oid = r.relnamespace<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> r.oid = a.attrelid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> nc.oid = c.connamespace<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> r.oid = <span class="Special">CASE</span> c.contype <span class="Special">WHEN</span> <span class="Special">'</span><span class="Constant">f</span><span class="Special">'</span> <span class="Special">THEN</span> c.confrelid <span class="Special">ELSE</span> c.conrelid <span class="Special">END<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> a.attnum = <span class="Statement">ANY</span> (<span class="Special">CASE</span> c.contype <span class="Special">WHEN</span> <span class="Special">'</span><span class="Constant">f</span><span class="Special">'</span> <span class="Special">THEN</span> c.confkey <span class="Special">ELSE</span> c.conkey <span class="Special">END</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> <span class="Statement">NOT</span> a.attisdropped<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> c.contype <span class="Statement">IN</span> (<span class="Special">'</span><span class="Constant">p</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">u</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">f</span><span class="Special">'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> r.relkind <span class="Statement">IN</span> (<span class="Special">'</span><span class="Constant">r</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">p</span><span class="Special">'</span>)<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; ) <span class="Special">AS</span> x (tblschema, tblname, tblowner, colname, cstrschema, cstrname)<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Special">WHERE</span> pg_has_role(x.tblowner, <span class="Special">'</span><span class="Constant">USAGE</span><span class="Special">'</span>);<br/></li>
<li><br/></li>
<li><span class="Statement">GRANT</span> SELECT <span class="Special">ON</span> constraint_column_usage <span class="Special">TO</span> <span class="Special">PUBLIC</span>;<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * 6.24<br/></li>
<li></span><span class="Comment"> * CONSTRAINT_PERIOD_USAGE view<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><br/></li>
<li><span class="Comment">-- feature not supported<br/></li>
<li></span><br/></li>
<li><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * 6.25<br/></li>
<li></span><span class="Comment"> * CONSTRAINT_TABLE_USAGE view<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> constraint_table_usage <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT</span> <span class="Identifier">CAST</span>(current_database() <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> table_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(nr.nspname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> table_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(r.relname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> table_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(current_database() <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> constraint_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(nc.nspname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> constraint_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(c.conname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> constraint_name<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> pg_constraint c, pg_namespace nc,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; pg_class r, pg_namespace nr<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Special">WHERE</span> c.connamespace = nc.oid <span class="Statement">AND</span> r.relnamespace = nr.oid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> ( (c.contype = <span class="Special">'</span><span class="Constant">f</span><span class="Special">'</span> <span class="Statement">AND</span> c.confrelid = r.oid)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">OR</span> (c.contype <span class="Statement">IN</span> (<span class="Special">'</span><span class="Constant">p</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">u</span><span class="Special">'</span>) <span class="Statement">AND</span> c.conrelid = r.oid) )<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> r.relkind <span class="Statement">IN</span> (<span class="Special">'</span><span class="Constant">r</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">p</span><span class="Special">'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> pg_has_role(r.relowner, <span class="Special">'</span><span class="Constant">USAGE</span><span class="Special">'</span>);<br/></li>
<li><br/></li>
<li><span class="Statement">GRANT</span> SELECT <span class="Special">ON</span> constraint_table_usage <span class="Special">TO</span> <span class="Special">PUBLIC</span>;<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Comment">-- 6.26 DATA_TYPE_PRIVILEGES view appears later.<br/></li>
<li></span><br/></li>
<li><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * 6.27<br/></li>
<li></span><span class="Comment"> * DIRECT_SUPERTABLES view<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><br/></li>
<li><span class="Comment">-- feature not supported<br/></li>
<li></span><br/></li>
<li><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * 6.28<br/></li>
<li></span><span class="Comment"> * DIRECT_SUPERTYPES view<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><br/></li>
<li><span class="Comment">-- feature not supported<br/></li>
<li></span><br/></li>
<li><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * 6.29<br/></li>
<li></span><span class="Comment"> * DOMAIN_CONSTRAINTS view<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> domain_constraints <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT</span> <span class="Identifier">CAST</span>(current_database() <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> constraint_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(rs.nspname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> constraint_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(con.conname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> constraint_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(current_database() <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> domain_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(n.nspname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> domain_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(t.typname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> domain_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">CASE</span> <span class="Special">WHEN</span> condeferrable <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">YES</span><span class="Special">'</span> <span class="Special">ELSE</span> <span class="Special">'</span><span class="Constant">NO</span><span class="Special">'</span> <span class="Special">END<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">AS</span> yes_or_no) <span class="Special">AS</span> is_deferrable,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">CASE</span> <span class="Special">WHEN</span> condeferred <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">YES</span><span class="Special">'</span> <span class="Special">ELSE</span> <span class="Special">'</span><span class="Constant">NO</span><span class="Special">'</span> <span class="Special">END<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">AS</span> yes_or_no) <span class="Special">AS</span> initially_deferred<br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> pg_namespace rs, pg_namespace n, pg_constraint con, pg_type t<br/></li>
<li>&nbsp; &nbsp; <span class="Special">WHERE</span> rs.oid = con.connamespace<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> n.oid = t.typnamespace<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> t.oid = con.contypid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> (pg_has_role(t.typowner, <span class="Special">'</span><span class="Constant">USAGE</span><span class="Special">'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">OR</span> has_type_privilege(t.oid, <span class="Special">'</span><span class="Constant">USAGE</span><span class="Special">'</span>));<br/></li>
<li><br/></li>
<li><span class="Statement">GRANT</span> SELECT <span class="Special">ON</span> domain_constraints <span class="Special">TO</span> <span class="Special">PUBLIC</span>;<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * DOMAIN_UDT_USAGE view<br/></li>
<li></span><span class="Comment"> * apparently removed in SQL:2003<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> domain_udt_usage <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT</span> <span class="Identifier">CAST</span>(current_database() <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> udt_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(nbt.nspname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> udt_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(bt.typname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> udt_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(current_database() <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> domain_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(nt.nspname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> domain_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(t.typname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> domain_name<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> pg_type t, pg_namespace nt,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; pg_type bt, pg_namespace nbt<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Special">WHERE</span> t.typnamespace = nt.oid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> t.typbasetype = bt.oid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> bt.typnamespace = nbt.oid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> t.typtype = <span class="Special">'</span><span class="Constant">d</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> pg_has_role(bt.typowner, <span class="Special">'</span><span class="Constant">USAGE</span><span class="Special">'</span>);<br/></li>
<li><br/></li>
<li><span class="Statement">GRANT</span> SELECT <span class="Special">ON</span> domain_udt_usage <span class="Special">TO</span> <span class="Special">PUBLIC</span>;<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * 6.30<br/></li>
<li></span><span class="Comment"> * DOMAINS view<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> domains <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT</span> <span class="Identifier">CAST</span>(current_database() <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> domain_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(nt.nspname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> domain_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(t.typname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> domain_name,<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">CASE</span> <span class="Special">WHEN</span> t.typelem &lt;&gt; <span class="Constant">0</span> <span class="Statement">AND</span> t.typlen = <span class="Constant">-1</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">ARRAY</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> nbt.nspname = <span class="Special">'</span><span class="Constant">pg_catalog</span><span class="Special">'</span> <span class="Special">THEN</span> format_type(t.typbasetype, <span class="Special">null</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">ELSE</span> <span class="Special">'</span><span class="Constant">USER-DEFINED</span><span class="Special">'</span> <span class="Special">END<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">AS</span> character_data)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">AS</span> data_type,<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; _pg_char_max_length(t.typbasetype, t.typtypmod)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">AS</span> cardinal_number)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">AS</span> character_maximum_length,<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; _pg_char_octet_length(t.typbasetype, t.typtypmod)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">AS</span> cardinal_number)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">AS</span> character_octet_length,<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> character_set_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> character_set_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> character_set_name,<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">CASE</span> <span class="Special">WHEN</span> nco.nspname <span class="Special">IS</span> <span class="Statement">NOT</span> <span class="Special">NULL</span> <span class="Special">THEN</span> current_database() <span class="Special">END</span> <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> collation_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(nco.nspname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> collation_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(co.collname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> collation_name,<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; _pg_numeric_precision(t.typbasetype, t.typtypmod)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">AS</span> cardinal_number)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">AS</span> numeric_precision,<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; _pg_numeric_precision_radix(t.typbasetype, t.typtypmod)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">AS</span> cardinal_number)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">AS</span> numeric_precision_radix,<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; _pg_numeric_scale(t.typbasetype, t.typtypmod)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">AS</span> cardinal_number)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">AS</span> numeric_scale,<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; _pg_datetime_precision(t.typbasetype, t.typtypmod)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">AS</span> cardinal_number)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">AS</span> datetime_precision,<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; _pg_interval_type(t.typbasetype, t.typtypmod)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">AS</span> character_data)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">AS</span> interval_type,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> cardinal_number) <span class="Special">AS</span> interval_precision,<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(t.typdefault <span class="Special">AS</span> character_data) <span class="Special">AS</span> domain_default,<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(current_database() <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> udt_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(nbt.nspname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> udt_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(bt.typname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> udt_name,<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> scope_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> scope_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> scope_name,<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> cardinal_number) <span class="Special">AS</span> maximum_cardinality,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Constant">1</span> <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> dtd_identifier<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> (pg_type t <span class="Special">JOIN</span> pg_namespace nt <span class="Special">ON</span> t.typnamespace = nt.oid)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">JOIN</span> (pg_type bt <span class="Special">JOIN</span> pg_namespace nbt <span class="Special">ON</span> bt.typnamespace = nbt.oid)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">ON</span> (t.typbasetype = bt.oid <span class="Statement">AND</span> t.typtype = <span class="Special">'</span><span class="Constant">d</span><span class="Special">'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">LEFT</span> <span class="Special">JOIN</span> (pg_collation co <span class="Special">JOIN</span> pg_namespace nco <span class="Special">ON</span> (co.collnamespace = nco.oid))<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">ON</span> t.typcollation = co.oid <span class="Statement">AND</span> (nco.nspname, co.collname) &lt;&gt; (<span class="Special">'</span><span class="Constant">pg_catalog</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">default</span><span class="Special">'</span>)<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Special">WHERE</span> (pg_has_role(t.typowner, <span class="Special">'</span><span class="Constant">USAGE</span><span class="Special">'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">OR</span> has_type_privilege(t.oid, <span class="Special">'</span><span class="Constant">USAGE</span><span class="Special">'</span>));<br/></li>
<li><br/></li>
<li><span class="Statement">GRANT</span> SELECT <span class="Special">ON</span> domains <span class="Special">TO</span> <span class="Special">PUBLIC</span>;<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Comment">-- 6.31 ELEMENT_TYPES view appears later.<br/></li>
<li></span><br/></li>
<li><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * 6.32<br/></li>
<li></span><span class="Comment"> * ENABLED_ROLES view<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> enabled_roles <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT</span> <span class="Identifier">CAST</span>(a.rolname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> role_name<br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> pg_authid a<br/></li>
<li>&nbsp; &nbsp; <span class="Special">WHERE</span> pg_has_role(a.oid, <span class="Special">'</span><span class="Constant">USAGE</span><span class="Special">'</span>);<br/></li>
<li><br/></li>
<li><span class="Statement">GRANT</span> SELECT <span class="Special">ON</span> enabled_roles <span class="Special">TO</span> <span class="Special">PUBLIC</span>;<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * 6.33<br/></li>
<li></span><span class="Comment"> * FIELDS view<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><br/></li>
<li><span class="Comment">-- feature not supported<br/></li>
<li></span><br/></li>
<li><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * 6.34<br/></li>
<li></span><span class="Comment"> * KEY_COLUMN_USAGE view<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> key_column_usage <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT</span> <span class="Identifier">CAST</span>(current_database() <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> constraint_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(nc_nspname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> constraint_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(conname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> constraint_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(current_database() <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> table_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(nr_nspname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> table_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(relname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> table_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(a.attname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> column_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>((ss.x).n <span class="Special">AS</span> cardinal_number) <span class="Special">AS</span> ordinal_position,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">CASE</span> <span class="Special">WHEN</span> contype = <span class="Special">'</span><span class="Constant">f</span><span class="Special">'</span> <span class="Special">THEN<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; _pg_index_position(ss.conindid, ss.confkey[(ss.x).n])<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">ELSE</span> <span class="Special">NULL<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">END</span> <span class="Special">AS</span> cardinal_number)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">AS</span> position_in_unique_constraint<br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> pg_attribute a,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; (<span class="Statement">SELECT</span> r.oid <span class="Special">AS</span> roid, r.relname, r.relowner,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; nc.nspname <span class="Special">AS</span> nc_nspname, nr.nspname <span class="Special">AS</span> nr_nspname,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; c.oid <span class="Special">AS</span> coid, c.conname, c.contype, c.conindid,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; c.confkey, c.confrelid,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <a href="#L43" title="catalog/information_schema.sql:43">_pg_expandarray</a>(c.conkey) <span class="Special">AS</span> x<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">FROM</span> pg_namespace nr, pg_class r, pg_namespace nc,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; pg_constraint c<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHERE</span> nr.oid = r.relnamespace<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> r.oid = c.conrelid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> nc.oid = c.connamespace<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> c.contype <span class="Statement">IN</span> (<span class="Special">'</span><span class="Constant">p</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">u</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">f</span><span class="Special">'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> r.relkind <span class="Statement">IN</span> (<span class="Special">'</span><span class="Constant">r</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">p</span><span class="Special">'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> (<span class="Statement">NOT</span> pg_is_other_temp_schema(nr.oid)) ) <span class="Special">AS</span> ss<br/></li>
<li>&nbsp; &nbsp; <span class="Special">WHERE</span> ss.roid = a.attrelid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> a.attnum = (ss.x).x<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> <span class="Statement">NOT</span> a.attisdropped<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> (pg_has_role(relowner, <span class="Special">'</span><span class="Constant">USAGE</span><span class="Special">'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">OR</span> has_column_privilege(roid, a.attnum,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">'</span><span class="Constant">SELECT, INSERT, UPDATE, REFERENCES</span><span class="Special">'</span>));<br/></li>
<li><br/></li>
<li><span class="Statement">GRANT</span> SELECT <span class="Special">ON</span> key_column_usage <span class="Special">TO</span> <span class="Special">PUBLIC</span>;<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * 6.35<br/></li>
<li></span><span class="Comment"> * KEY_PERIOD_USAGE view<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><br/></li>
<li><span class="Comment">-- feature not supported<br/></li>
<li></span><br/></li>
<li><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * 6.36<br/></li>
<li></span><span class="Comment"> * METHOD_SPECIFICATION_PARAMETERS view<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><br/></li>
<li><span class="Comment">-- feature not supported<br/></li>
<li></span><br/></li>
<li><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * 6.37<br/></li>
<li></span><span class="Comment"> * METHOD_SPECIFICATIONS view<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><br/></li>
<li><span class="Comment">-- feature not supported<br/></li>
<li></span><br/></li>
<li><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * 6.38<br/></li>
<li></span><span class="Comment"> * PARAMETERS view<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> parameters <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT</span> <span class="Identifier">CAST</span>(current_database() <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> specific_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(n_nspname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> specific_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(nameconcatoid(proname, p_oid) <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> specific_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>((ss.x).n <span class="Special">AS</span> cardinal_number) <span class="Special">AS</span> ordinal_position,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">CASE</span> <span class="Special">WHEN</span> proargmodes <span class="Special">IS</span> <span class="Special">NULL</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">IN</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> proargmodes[(ss.x).n] = <span class="Special">'</span><span class="Constant">i</span><span class="Special">'</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">IN</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> proargmodes[(ss.x).n] = <span class="Special">'</span><span class="Constant">o</span><span class="Special">'</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">OUT</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> proargmodes[(ss.x).n] = <span class="Special">'</span><span class="Constant">b</span><span class="Special">'</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">INOUT</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> proargmodes[(ss.x).n] = <span class="Special">'</span><span class="Constant">v</span><span class="Special">'</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">IN</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> proargmodes[(ss.x).n] = <span class="Special">'</span><span class="Constant">t</span><span class="Special">'</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">OUT</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">END</span> <span class="Special">AS</span> character_data) <span class="Special">AS</span> parameter_mode,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">'</span><span class="Constant">NO</span><span class="Special">'</span> <span class="Special">AS</span> yes_or_no) <span class="Special">AS</span> is_result,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">'</span><span class="Constant">NO</span><span class="Special">'</span> <span class="Special">AS</span> yes_or_no) <span class="Special">AS</span> as_locator,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Identifier">NULLIF</span>(proargnames[(ss.x).n], <span class="Special">''</span>) <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> parameter_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">CASE</span> <span class="Special">WHEN</span> t.typelem &lt;&gt; <span class="Constant">0</span> <span class="Statement">AND</span> t.typlen = <span class="Constant">-1</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">ARRAY</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> nt.nspname = <span class="Special">'</span><span class="Constant">pg_catalog</span><span class="Special">'</span> <span class="Special">THEN</span> format_type(t.oid, <span class="Special">null</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">ELSE</span> <span class="Special">'</span><span class="Constant">USER-DEFINED</span><span class="Special">'</span> <span class="Special">END</span> <span class="Special">AS</span> character_data)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">AS</span> data_type,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> cardinal_number) <span class="Special">AS</span> character_maximum_length,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> cardinal_number) <span class="Special">AS</span> character_octet_length,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> character_set_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> character_set_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> character_set_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> collation_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> collation_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> collation_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> cardinal_number) <span class="Special">AS</span> numeric_precision,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> cardinal_number) <span class="Special">AS</span> numeric_precision_radix,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> cardinal_number) <span class="Special">AS</span> numeric_scale,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> cardinal_number) <span class="Special">AS</span> datetime_precision,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> character_data) <span class="Special">AS</span> interval_type,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> cardinal_number) <span class="Special">AS</span> interval_precision,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(current_database() <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> udt_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(nt.nspname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> udt_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(t.typname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> udt_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> scope_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> scope_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> scope_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> cardinal_number) <span class="Special">AS</span> maximum_cardinality,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>((ss.x).n <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> dtd_identifier,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">CASE</span> <span class="Special">WHEN</span> pg_has_role(proowner, <span class="Special">'</span><span class="Constant">USAGE</span><span class="Special">'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">THEN</span> pg_get_function_arg_default(p_oid, (ss.x).n)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">ELSE</span> <span class="Special">NULL</span> <span class="Special">END<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">AS</span> character_data) <span class="Special">AS</span> parameter_default<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> pg_type t, pg_namespace nt,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; (SELECT n.nspname <span class="Special">AS</span> n_nspname, p.proname, p.oid <span class="Special">AS</span> p_oid, p.proowner,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; p.proargnames, p.proargmodes,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <a href="#L43" title="catalog/information_schema.sql:43">_pg_expandarray</a>(<span class="Identifier">coalesce</span>(p.proallargtypes, p.proargtypes::oid[])) <span class="Special">AS</span> x<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">FROM</span> pg_namespace n, pg_proc p<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHERE</span> n.oid = p.pronamespace<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> (pg_has_role(p.proowner, <span class="Special">'</span><span class="Constant">USAGE</span><span class="Special">'</span>) <span class="Statement">OR<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; has_function_privilege(p.oid, <span class="Special">'</span><span class="Constant">EXECUTE</span><span class="Special">'</span>))) <span class="Special">AS</span> ss<br/></li>
<li>&nbsp; &nbsp; <span class="Special">WHERE</span> t.oid = (ss.x).x <span class="Statement">AND</span> t.typnamespace = nt.oid;<br/></li>
<li><br/></li>
<li><span class="Statement">GRANT</span> SELECT <span class="Special">ON</span> parameters <span class="Special">TO</span> <span class="Special">PUBLIC</span>;<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * 6.39<br/></li>
<li></span><span class="Comment"> * PERIODS view<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><br/></li>
<li><span class="Comment">-- feature not supported<br/></li>
<li></span><br/></li>
<li><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * 6.40<br/></li>
<li></span><span class="Comment"> * PRIVATE_PARAMETERS view<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><br/></li>
<li><span class="Comment">-- feature not supported<br/></li>
<li></span><br/></li>
<li><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * 6.41<br/></li>
<li></span><span class="Comment"> * REFERENCED_TYPES view<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><br/></li>
<li><span class="Comment">-- feature not supported<br/></li>
<li></span><br/></li>
<li><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * 6.42<br/></li>
<li></span><span class="Comment"> * REFERENTIAL_CONSTRAINTS view<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> referential_constraints <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT</span> <span class="Identifier">CAST</span>(current_database() <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> constraint_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(ncon.nspname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> constraint_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(con.conname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> constraint_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">CASE</span> <span class="Special">WHEN</span> npkc.nspname <span class="Special">IS</span> <span class="Special">NULL</span> <span class="Special">THEN</span> <span class="Special">NULL<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">ELSE</span> current_database() <span class="Special">END<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> unique_constraint_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(npkc.nspname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> unique_constraint_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(pkc.conname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> unique_constraint_name,<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">CASE</span> con.confmatchtype <span class="Special">WHEN</span> <span class="Special">'</span><span class="Constant">f</span><span class="Special">'</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">FULL</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> <span class="Special">'</span><span class="Constant">p</span><span class="Special">'</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">PARTIAL</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> <span class="Special">'</span><span class="Constant">s</span><span class="Special">'</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">NONE</span><span class="Special">'</span> <span class="Special">END<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">AS</span> character_data) <span class="Special">AS</span> match_option,<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">CASE</span> con.confupdtype <span class="Special">WHEN</span> <span class="Special">'</span><span class="Constant">c</span><span class="Special">'</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">CASCADE</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> <span class="Special">'</span><span class="Constant">n</span><span class="Special">'</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">SET NULL</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> <span class="Special">'</span><span class="Constant">d</span><span class="Special">'</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">SET DEFAULT</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> <span class="Special">'</span><span class="Constant">r</span><span class="Special">'</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">RESTRICT</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> <span class="Special">'</span><span class="Constant">a</span><span class="Special">'</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">NO ACTION</span><span class="Special">'</span> <span class="Special">END<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">AS</span> character_data) <span class="Special">AS</span> update_rule,<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">CASE</span> con.confdeltype <span class="Special">WHEN</span> <span class="Special">'</span><span class="Constant">c</span><span class="Special">'</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">CASCADE</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> <span class="Special">'</span><span class="Constant">n</span><span class="Special">'</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">SET NULL</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> <span class="Special">'</span><span class="Constant">d</span><span class="Special">'</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">SET DEFAULT</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> <span class="Special">'</span><span class="Constant">r</span><span class="Special">'</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">RESTRICT</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> <span class="Special">'</span><span class="Constant">a</span><span class="Special">'</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">NO ACTION</span><span class="Special">'</span> <span class="Special">END<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">AS</span> character_data) <span class="Special">AS</span> delete_rule<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> (pg_namespace ncon<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">INNER</span> <span class="Special">JOIN</span> pg_constraint con <span class="Special">ON</span> ncon.oid = con.connamespace<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">INNER</span> <span class="Special">JOIN</span> pg_class c <span class="Special">ON</span> con.conrelid = c.oid <span class="Statement">AND</span> con.contype = <span class="Special">'</span><span class="Constant">f</span><span class="Special">'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">LEFT</span> <span class="Special">JOIN</span> pg_depend d1&nbsp; <span class="Comment">-- find constraint's dependency on an index<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">ON</span> d1.objid = con.oid <span class="Statement">AND</span> d1.classid = <span class="Special">'</span><span class="Constant">pg_constraint</span><span class="Special">'</span>::regclass<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">AND</span> d1.refclassid = <span class="Special">'</span><span class="Constant">pg_class</span><span class="Special">'</span>::regclass <span class="Statement">AND</span> d1.refobjsubid = <span class="Constant">0<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">LEFT</span> <span class="Special">JOIN</span> pg_depend d2&nbsp; <span class="Comment">-- find pkey/unique constraint for that index<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">ON</span> d2.refclassid = <span class="Special">'</span><span class="Constant">pg_constraint</span><span class="Special">'</span>::regclass<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">AND</span> d2.classid = <span class="Special">'</span><span class="Constant">pg_class</span><span class="Special">'</span>::regclass<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">AND</span> d2.objid = d1.refobjid <span class="Statement">AND</span> d2.objsubid = <span class="Constant">0<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">AND</span> d2.deptype = <span class="Special">'</span><span class="Constant">i</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">LEFT</span> <span class="Special">JOIN</span> pg_constraint pkc <span class="Special">ON</span> pkc.oid = d2.refobjid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> pkc.contype <span class="Statement">IN</span> (<span class="Special">'</span><span class="Constant">p</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">u</span><span class="Special">'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> pkc.conrelid = con.confrelid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">LEFT</span> <span class="Special">JOIN</span> pg_namespace npkc <span class="Special">ON</span> pkc.connamespace = npkc.oid<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Special">WHERE</span> pg_has_role(c.relowner, <span class="Special">'</span><span class="Constant">USAGE</span><span class="Special">'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Comment">-- SELECT privilege omitted, per SQL standard<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">OR</span> has_table_privilege(c.oid, <span class="Special">'</span><span class="Constant">INSERT, UPDATE, DELETE, TRUNCATE, REFERENCES, TRIGGER</span><span class="Special">'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">OR</span> has_any_column_privilege(c.oid, <span class="Special">'</span><span class="Constant">INSERT, UPDATE, REFERENCES</span><span class="Special">'</span>) ;<br/></li>
<li><br/></li>
<li><span class="Statement">GRANT</span> SELECT <span class="Special">ON</span> referential_constraints <span class="Special">TO</span> <span class="Special">PUBLIC</span>;<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * 6.43<br/></li>
<li></span><span class="Comment"> * ROLE_COLUMN_GRANTS view<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> role_column_grants <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT</span> grantor,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; grantee,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; table_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; table_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; table_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; column_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; privilege_type,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; is_grantable<br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> column_privileges<br/></li>
<li>&nbsp; &nbsp; <span class="Special">WHERE</span> grantor <span class="Statement">IN</span> (<span class="Statement">SELECT</span> role_name <span class="Special">FROM</span> enabled_roles)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">OR</span> grantee <span class="Statement">IN</span> (<span class="Statement">SELECT</span> role_name <span class="Special">FROM</span> enabled_roles);<br/></li>
<li><br/></li>
<li><span class="Statement">GRANT</span> SELECT <span class="Special">ON</span> role_column_grants <span class="Special">TO</span> <span class="Special">PUBLIC</span>;<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Comment">-- 6.44 ROLE_ROUTINE_GRANTS view is based on 6.51 ROUTINE_PRIVILEGES and is defined there instead.<br/></li>
<li></span><br/></li>
<li><br/></li>
<li><span class="Comment">-- 6.45 ROLE_TABLE_GRANTS view is based on 6.64 TABLE_PRIVILEGES and is defined there instead.<br/></li>
<li></span><br/></li>
<li><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * 6.46<br/></li>
<li></span><span class="Comment"> * ROLE_TABLE_METHOD_GRANTS view<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><br/></li>
<li><span class="Comment">-- feature not supported<br/></li>
<li></span><br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Comment">-- 6.47 ROLE_USAGE_GRANTS view is based on 6.76 USAGE_PRIVILEGES and is defined there instead.<br/></li>
<li></span><br/></li>
<li><br/></li>
<li><span class="Comment">-- 6.48 ROLE_UDT_GRANTS view is based on 6.75 UDT_PRIVILEGES and is defined there instead.<br/></li>
<li></span><br/></li>
<li><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * 6.49<br/></li>
<li></span><span class="Comment"> * ROUTINE_COLUMN_USAGE view<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> routine_column_usage <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT</span> <span class="Statement">DISTINCT<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(current_database() <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> specific_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(np.nspname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> specific_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(nameconcatoid(p.proname, p.oid) <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> specific_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(current_database() <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> routine_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(np.nspname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> routine_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(p.proname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> routine_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(current_database() <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> table_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(nt.nspname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> table_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(t.relname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> table_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(a.attname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> column_name<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> pg_namespace np, pg_proc p, pg_depend d,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; pg_class t, pg_namespace nt, pg_attribute a<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Special">WHERE</span> np.oid = p.pronamespace<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> p.oid = d.objid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> d.classid = <span class="Special">'</span><span class="Constant">pg_catalog.pg_proc</span><span class="Special">'</span>::regclass<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> d.refobjid = t.oid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> d.refclassid = <span class="Special">'</span><span class="Constant">pg_catalog.pg_class</span><span class="Special">'</span>::regclass<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> t.relnamespace = nt.oid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> t.relkind <span class="Statement">IN</span> (<span class="Special">'</span><span class="Constant">r</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">v</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">f</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">p</span><span class="Special">'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> t.oid = a.attrelid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> d.refobjsubid = a.attnum<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> pg_has_role(t.relowner, <span class="Special">'</span><span class="Constant">USAGE</span><span class="Special">'</span>);<br/></li>
<li><br/></li>
<li><span class="Statement">GRANT</span> SELECT <span class="Special">ON</span> routine_column_usage <span class="Special">TO</span> <span class="Special">PUBLIC</span>;<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * 6.50<br/></li>
<li></span><span class="Comment"> * ROUTINE_PERIOD_USAGE view<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><br/></li>
<li><span class="Comment">-- feature not supported<br/></li>
<li></span><br/></li>
<li><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * 6.51<br/></li>
<li></span><span class="Comment"> * ROUTINE_PRIVILEGES view<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> routine_privileges <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT</span> <span class="Identifier">CAST</span>(u_grantor.rolname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> grantor,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(grantee.rolname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> grantee,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(current_database() <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> specific_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(n.nspname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> specific_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(nameconcatoid(p.proname, p.oid) <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> specific_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(current_database() <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> routine_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(n.nspname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> routine_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(p.proname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> routine_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">'</span><span class="Constant">EXECUTE</span><span class="Special">'</span> <span class="Special">AS</span> character_data) <span class="Special">AS</span> privilege_type,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">CASE</span> <span class="Special">WHEN<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Comment">-- object owner always has grant options<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pg_has_role(grantee.oid, p.proowner, <span class="Special">'</span><span class="Constant">USAGE</span><span class="Special">'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">OR</span> p.grantable<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">YES</span><span class="Special">'</span> <span class="Special">ELSE</span> <span class="Special">'</span><span class="Constant">NO</span><span class="Special">'</span> <span class="Special">END</span> <span class="Special">AS</span> yes_or_no) <span class="Special">AS</span> is_grantable<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> (<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">SELECT</span> oid, proname, proowner, pronamespace, (aclexplode(<span class="Identifier">coalesce</span>(proacl, acldefault(<span class="Special">'</span><span class="Constant">f</span><span class="Special">'</span>, proowner)))).* <span class="Special">FROM</span> pg_proc<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ) p (oid, proname, proowner, pronamespace, grantor, grantee, prtype, grantable),<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; pg_namespace n,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; pg_authid u_grantor,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; (<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">SELECT</span> oid, rolname <span class="Special">FROM</span> pg_authid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">UNION</span> <span class="Statement">ALL<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">SELECT</span> <span class="Constant">0</span>::oid, <span class="Special">'</span><span class="Constant">PUBLIC</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ) <span class="Special">AS</span> grantee (oid, rolname)<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Special">WHERE</span> p.pronamespace = n.oid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> grantee.oid = p.grantee<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> u_grantor.oid = p.grantor<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> p.prtype <span class="Statement">IN</span> (<span class="Special">'</span><span class="Constant">EXECUTE</span><span class="Special">'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> (pg_has_role(u_grantor.oid, <span class="Special">'</span><span class="Constant">USAGE</span><span class="Special">'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">OR</span> pg_has_role(grantee.oid, <span class="Special">'</span><span class="Constant">USAGE</span><span class="Special">'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">OR</span> grantee.rolname = <span class="Special">'</span><span class="Constant">PUBLIC</span><span class="Special">'</span>);<br/></li>
<li><br/></li>
<li><span class="Statement">GRANT</span> SELECT <span class="Special">ON</span> routine_privileges <span class="Special">TO</span> <span class="Special">PUBLIC</span>;<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * 6.43<br/></li>
<li></span><span class="Comment"> * ROLE_ROUTINE_GRANTS view<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> role_routine_grants <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT</span> grantor,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; grantee,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; specific_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; specific_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; specific_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; routine_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; routine_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; routine_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; privilege_type,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; is_grantable<br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> routine_privileges<br/></li>
<li>&nbsp; &nbsp; <span class="Special">WHERE</span> grantor <span class="Statement">IN</span> (<span class="Statement">SELECT</span> role_name <span class="Special">FROM</span> enabled_roles)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">OR</span> grantee <span class="Statement">IN</span> (<span class="Statement">SELECT</span> role_name <span class="Special">FROM</span> enabled_roles);<br/></li>
<li><br/></li>
<li><span class="Statement">GRANT</span> SELECT <span class="Special">ON</span> role_routine_grants <span class="Special">TO</span> <span class="Special">PUBLIC</span>;<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * 6.52<br/></li>
<li></span><span class="Comment"> * ROUTINE_ROUTINE_USAGE view<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> routine_routine_usage <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT</span> <span class="Statement">DISTINCT<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(current_database() <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> specific_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(np.nspname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> specific_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(nameconcatoid(p.proname, p.oid) <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> specific_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(current_database() <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> routine_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(np1.nspname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> routine_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(nameconcatoid(p1.proname, p1.oid) <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> routine_name<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> pg_namespace np, pg_proc p, pg_depend d,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; pg_proc p1, pg_namespace np1<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Special">WHERE</span> np.oid = p.pronamespace<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> p.oid = d.objid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> d.classid = <span class="Special">'</span><span class="Constant">pg_catalog.pg_proc</span><span class="Special">'</span>::regclass<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> d.refobjid = p1.oid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> d.refclassid = <span class="Special">'</span><span class="Constant">pg_catalog.pg_proc</span><span class="Special">'</span>::regclass<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> p1.pronamespace = np1.oid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> p.prokind <span class="Statement">IN</span> (<span class="Special">'</span><span class="Constant">f</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">p</span><span class="Special">'</span>) <span class="Statement">AND</span> p1.prokind <span class="Statement">IN</span> (<span class="Special">'</span><span class="Constant">f</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">p</span><span class="Special">'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> pg_has_role(p1.proowner, <span class="Special">'</span><span class="Constant">USAGE</span><span class="Special">'</span>);<br/></li>
<li><br/></li>
<li><span class="Statement">GRANT</span> SELECT <span class="Special">ON</span> routine_routine_usage <span class="Special">TO</span> <span class="Special">PUBLIC</span>;<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * 6.53<br/></li>
<li></span><span class="Comment"> * ROUTINE_SEQUENCE_USAGE view<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> routine_sequence_usage <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT</span> <span class="Statement">DISTINCT<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(current_database() <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> specific_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(np.nspname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> specific_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(nameconcatoid(p.proname, p.oid) <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> specific_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(current_database() <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> routine_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(np.nspname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> routine_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(p.proname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> routine_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(current_database() <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> sequence_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(ns.nspname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> sequence_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(s.relname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> sequence_name<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> pg_namespace np, pg_proc p, pg_depend d,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; pg_class s, pg_namespace ns<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Special">WHERE</span> np.oid = p.pronamespace<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> p.oid = d.objid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> d.classid = <span class="Special">'</span><span class="Constant">pg_catalog.pg_proc</span><span class="Special">'</span>::regclass<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> d.refobjid = s.oid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> d.refclassid = <span class="Special">'</span><span class="Constant">pg_catalog.pg_class</span><span class="Special">'</span>::regclass<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> s.relnamespace = ns.oid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> s.relkind = <span class="Special">'</span><span class="Constant">S</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> pg_has_role(s.relowner, <span class="Special">'</span><span class="Constant">USAGE</span><span class="Special">'</span>);<br/></li>
<li><br/></li>
<li><span class="Statement">GRANT</span> SELECT <span class="Special">ON</span> routine_sequence_usage <span class="Special">TO</span> <span class="Special">PUBLIC</span>;<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * 6.54<br/></li>
<li></span><span class="Comment"> * ROUTINE_TABLE_USAGE view<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> routine_table_usage <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT</span> <span class="Statement">DISTINCT<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(current_database() <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> specific_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(np.nspname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> specific_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(nameconcatoid(p.proname, p.oid) <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> specific_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(current_database() <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> routine_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(np.nspname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> routine_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(p.proname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> routine_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(current_database() <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> table_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(nt.nspname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> table_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(t.relname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> table_name<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> pg_namespace np, pg_proc p, pg_depend d,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; pg_class t, pg_namespace nt<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Special">WHERE</span> np.oid = p.pronamespace<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> p.oid = d.objid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> d.classid = <span class="Special">'</span><span class="Constant">pg_catalog.pg_proc</span><span class="Special">'</span>::regclass<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> d.refobjid = t.oid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> d.refclassid = <span class="Special">'</span><span class="Constant">pg_catalog.pg_class</span><span class="Special">'</span>::regclass<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> t.relnamespace = nt.oid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> t.relkind <span class="Statement">IN</span> (<span class="Special">'</span><span class="Constant">r</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">v</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">f</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">p</span><span class="Special">'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> pg_has_role(t.relowner, <span class="Special">'</span><span class="Constant">USAGE</span><span class="Special">'</span>);<br/></li>
<li><br/></li>
<li><span class="Statement">GRANT</span> SELECT <span class="Special">ON</span> routine_table_usage <span class="Special">TO</span> <span class="Special">PUBLIC</span>;<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * 6.55<br/></li>
<li></span><span class="Comment"> * ROUTINES view<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> routines <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT</span> <span class="Identifier">CAST</span>(current_database() <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> specific_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(n.nspname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> specific_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(nameconcatoid(p.proname, p.oid) <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> specific_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(current_database() <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> routine_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(n.nspname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> routine_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(p.proname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> routine_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">CASE</span> p.prokind <span class="Special">WHEN</span> <span class="Special">'</span><span class="Constant">f</span><span class="Special">'</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">FUNCTION</span><span class="Special">'</span> <span class="Special">WHEN</span> <span class="Special">'</span><span class="Constant">p</span><span class="Special">'</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">PROCEDURE</span><span class="Special">'</span> <span class="Special">END<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">AS</span> character_data) <span class="Special">AS</span> routine_type,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> module_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> module_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> module_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> udt_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> udt_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> udt_name,<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">CASE</span> <span class="Special">WHEN</span> p.prokind = <span class="Special">'</span><span class="Constant">p</span><span class="Special">'</span> <span class="Special">THEN</span> <span class="Special">NULL<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> t.typelem &lt;&gt; <span class="Constant">0</span> <span class="Statement">AND</span> t.typlen = <span class="Constant">-1</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">ARRAY</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> nt.nspname = <span class="Special">'</span><span class="Constant">pg_catalog</span><span class="Special">'</span> <span class="Special">THEN</span> format_type(t.oid, <span class="Special">null</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">ELSE</span> <span class="Special">'</span><span class="Constant">USER-DEFINED</span><span class="Special">'</span> <span class="Special">END</span> <span class="Special">AS</span> character_data)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">AS</span> data_type,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> cardinal_number) <span class="Special">AS</span> character_maximum_length,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> cardinal_number) <span class="Special">AS</span> character_octet_length,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> character_set_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> character_set_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> character_set_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> collation_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> collation_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> collation_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> cardinal_number) <span class="Special">AS</span> numeric_precision,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> cardinal_number) <span class="Special">AS</span> numeric_precision_radix,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> cardinal_number) <span class="Special">AS</span> numeric_scale,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> cardinal_number) <span class="Special">AS</span> datetime_precision,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> character_data) <span class="Special">AS</span> interval_type,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> cardinal_number) <span class="Special">AS</span> interval_precision,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">CASE</span> <span class="Special">WHEN</span> nt.nspname <span class="Special">IS</span> <span class="Statement">NOT</span> <span class="Special">NULL</span> <span class="Special">THEN</span> current_database() <span class="Special">END</span> <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> type_udt_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(nt.nspname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> type_udt_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(t.typname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> type_udt_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> scope_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> scope_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> scope_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> cardinal_number) <span class="Special">AS</span> maximum_cardinality,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">CASE</span> <span class="Special">WHEN</span> p.prokind &lt;&gt; <span class="Special">'</span><span class="Constant">p</span><span class="Special">'</span> <span class="Special">THEN</span> <span class="Constant">0</span> <span class="Special">END</span> <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> dtd_identifier,<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">CASE</span> <span class="Special">WHEN</span> l.lanname = <span class="Special">'</span><span class="Constant">sql</span><span class="Special">'</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">SQL</span><span class="Special">'</span> <span class="Special">ELSE</span> <span class="Special">'</span><span class="Constant">EXTERNAL</span><span class="Special">'</span> <span class="Special">END</span> <span class="Special">AS</span> character_data)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">AS</span> routine_body,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">CASE</span> <span class="Special">WHEN</span> pg_has_role(p.proowner, <span class="Special">'</span><span class="Constant">USAGE</span><span class="Special">'</span>) <span class="Special">THEN</span> p.prosrc <span class="Special">ELSE</span> <span class="Special">null</span> <span class="Special">END<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">AS</span> character_data) <span class="Special">AS</span> routine_definition,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">CASE</span> <span class="Special">WHEN</span> l.lanname = <span class="Special">'</span><span class="Constant">c</span><span class="Special">'</span> <span class="Special">THEN</span> p.prosrc <span class="Special">ELSE</span> <span class="Special">null</span> <span class="Special">END<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">AS</span> character_data) <span class="Special">AS</span> external_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Identifier">upper</span>(l.lanname) <span class="Special">AS</span> character_data) <span class="Special">AS</span> external_language,<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">'</span><span class="Constant">GENERAL</span><span class="Special">'</span> <span class="Special">AS</span> character_data) <span class="Special">AS</span> parameter_style,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">CASE</span> <span class="Special">WHEN</span> p.provolatile = <span class="Special">'</span><span class="Constant">i</span><span class="Special">'</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">YES</span><span class="Special">'</span> <span class="Special">ELSE</span> <span class="Special">'</span><span class="Constant">NO</span><span class="Special">'</span> <span class="Special">END</span> <span class="Special">AS</span> yes_or_no) <span class="Special">AS</span> is_deterministic,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">'</span><span class="Constant">MODIFIES</span><span class="Special">'</span> <span class="Special">AS</span> character_data) <span class="Special">AS</span> sql_data_access,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">CASE</span> <span class="Special">WHEN</span> p.prokind &lt;&gt; <span class="Special">'</span><span class="Constant">p</span><span class="Special">'</span> <span class="Special">THEN<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">CASE</span> <span class="Special">WHEN</span> p.proisstrict <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">YES</span><span class="Special">'</span> <span class="Special">ELSE</span> <span class="Special">'</span><span class="Constant">NO</span><span class="Special">'</span> <span class="Special">END</span> <span class="Special">END</span> <span class="Special">AS</span> yes_or_no) <span class="Special">AS</span> is_null_call,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> character_data) <span class="Special">AS</span> sql_path,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">'</span><span class="Constant">YES</span><span class="Special">'</span> <span class="Special">AS</span> yes_or_no) <span class="Special">AS</span> schema_level_routine,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Constant">0</span> <span class="Special">AS</span> cardinal_number) <span class="Special">AS</span> max_dynamic_result_sets,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> yes_or_no) <span class="Special">AS</span> is_user_defined_cast,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> yes_or_no) <span class="Special">AS</span> is_implicitly_invocable,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">CASE</span> <span class="Special">WHEN</span> p.prosecdef <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">DEFINER</span><span class="Special">'</span> <span class="Special">ELSE</span> <span class="Special">'</span><span class="Constant">INVOKER</span><span class="Special">'</span> <span class="Special">END</span> <span class="Special">AS</span> character_data) <span class="Special">AS</span> security_type,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> to_sql_specific_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> to_sql_specific_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> to_sql_specific_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">'</span><span class="Constant">NO</span><span class="Special">'</span> <span class="Special">AS</span> yes_or_no) <span class="Special">AS</span> as_locator,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> time_stamp) <span class="Special">AS</span> created,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> time_stamp) <span class="Special">AS</span> last_altered,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> yes_or_no) <span class="Special">AS</span> new_savepoint_level,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">'</span><span class="Constant">NO</span><span class="Special">'</span> <span class="Special">AS</span> yes_or_no) <span class="Special">AS</span> is_udt_dependent,<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> character_data) <span class="Special">AS</span> result_cast_from_data_type,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> yes_or_no) <span class="Special">AS</span> result_cast_as_locator,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> cardinal_number) <span class="Special">AS</span> result_cast_char_max_length,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> cardinal_number) <span class="Special">AS</span> result_cast_char_octet_length,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> result_cast_char_set_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> result_cast_char_set_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> result_cast_char_set_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> result_cast_collation_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> result_cast_collation_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> result_cast_collation_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> cardinal_number) <span class="Special">AS</span> result_cast_numeric_precision,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> cardinal_number) <span class="Special">AS</span> result_cast_numeric_precision_radix,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> cardinal_number) <span class="Special">AS</span> result_cast_numeric_scale,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> cardinal_number) <span class="Special">AS</span> result_cast_datetime_precision,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> character_data) <span class="Special">AS</span> result_cast_interval_type,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> cardinal_number) <span class="Special">AS</span> result_cast_interval_precision,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> result_cast_type_udt_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> result_cast_type_udt_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> result_cast_type_udt_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> result_cast_scope_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> result_cast_scope_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> result_cast_scope_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> cardinal_number) <span class="Special">AS</span> result_cast_maximum_cardinality,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> result_cast_dtd_identifier<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> (pg_namespace n<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">JOIN</span> pg_proc p <span class="Special">ON</span> n.oid = p.pronamespace<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">JOIN</span> pg_language l <span class="Special">ON</span> p.prolang = l.oid)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">LEFT</span> <span class="Special">JOIN<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; (pg_type t <span class="Special">JOIN</span> pg_namespace nt <span class="Special">ON</span> t.typnamespace = nt.oid)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">ON</span> p.prorettype = t.oid <span class="Statement">AND</span> p.prokind &lt;&gt; <span class="Special">'</span><span class="Constant">p</span><span class="Special">'<br/></li>
<li></span><br/></li>
<li>&nbsp; &nbsp; <span class="Special">WHERE</span> (pg_has_role(p.proowner, <span class="Special">'</span><span class="Constant">USAGE</span><span class="Special">'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">OR</span> has_function_privilege(p.oid, <span class="Special">'</span><span class="Constant">EXECUTE</span><span class="Special">'</span>));<br/></li>
<li><br/></li>
<li><span class="Statement">GRANT</span> SELECT <span class="Special">ON</span> routines <span class="Special">TO</span> <span class="Special">PUBLIC</span>;<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * 6.56<br/></li>
<li></span><span class="Comment"> * SCHEMATA view<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> schemata <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT</span> <span class="Identifier">CAST</span>(current_database() <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> catalog_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(n.nspname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> schema_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(u.rolname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> schema_owner,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> default_character_set_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> default_character_set_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> default_character_set_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> character_data) <span class="Special">AS</span> sql_path<br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> pg_namespace n, pg_authid u<br/></li>
<li>&nbsp; &nbsp; <span class="Special">WHERE</span> n.nspowner = u.oid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> (pg_has_role(n.nspowner, <span class="Special">'</span><span class="Constant">USAGE</span><span class="Special">'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">OR</span> has_schema_privilege(n.oid, <span class="Special">'</span><span class="Constant">CREATE, USAGE</span><span class="Special">'</span>));<br/></li>
<li><br/></li>
<li><span class="Statement">GRANT</span> SELECT <span class="Special">ON</span> schemata <span class="Special">TO</span> <span class="Special">PUBLIC</span>;<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * 6.57<br/></li>
<li></span><span class="Comment"> * SEQUENCES view<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> sequences <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT</span> <span class="Identifier">CAST</span>(current_database() <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> sequence_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(nc.nspname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> sequence_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(c.relname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> sequence_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(format_type(s.seqtypid, <span class="Special">null</span>) <span class="Special">AS</span> character_data) <span class="Special">AS</span> data_type,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(_pg_numeric_precision(s.seqtypid, <span class="Constant">-1</span>) <span class="Special">AS</span> cardinal_number) <span class="Special">AS</span> numeric_precision,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Constant">2</span> <span class="Special">AS</span> cardinal_number) <span class="Special">AS</span> numeric_precision_radix,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Constant">0</span> <span class="Special">AS</span> cardinal_number) <span class="Special">AS</span> numeric_scale,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(s.seqstart <span class="Special">AS</span> character_data) <span class="Special">AS</span> start_value,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(s.seqmin <span class="Special">AS</span> character_data) <span class="Special">AS</span> minimum_value,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(s.seqmax <span class="Special">AS</span> character_data) <span class="Special">AS</span> maximum_value,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(s.seqincrement <span class="Special">AS</span> character_data) <span class="Special">AS</span> <span class="Special">increment</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">CASE</span> <span class="Special">WHEN</span> s.seqcycle <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">YES</span><span class="Special">'</span> <span class="Special">ELSE</span> <span class="Special">'</span><span class="Constant">NO</span><span class="Special">'</span> <span class="Special">END</span> <span class="Special">AS</span> yes_or_no) <span class="Special">AS</span> cycle_option<br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> pg_namespace nc, pg_class c, pg_sequence s<br/></li>
<li>&nbsp; &nbsp; <span class="Special">WHERE</span> c.relnamespace = nc.oid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> c.relkind = <span class="Special">'</span><span class="Constant">S</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> <span class="Statement">NOT</span> <span class="Statement">EXISTS</span> (<span class="Statement">SELECT</span> <span class="Constant">1</span> <span class="Special">FROM</span> pg_depend <span class="Special">WHERE</span> classid = <span class="Special">'</span><span class="Constant">pg_class</span><span class="Special">'</span>::regclass <span class="Statement">AND</span> objid = c.oid <span class="Statement">AND</span> deptype = <span class="Special">'</span><span class="Constant">i</span><span class="Special">'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> (<span class="Statement">NOT</span> pg_is_other_temp_schema(nc.oid))<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> c.oid = s.seqrelid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> (pg_has_role(c.relowner, <span class="Special">'</span><span class="Constant">USAGE</span><span class="Special">'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">OR</span> has_sequence_privilege(c.oid, <span class="Special">'</span><span class="Constant">SELECT, UPDATE, USAGE</span><span class="Special">'</span>) );<br/></li>
<li><br/></li>
<li><span class="Statement">GRANT</span> SELECT <span class="Special">ON</span> sequences <span class="Special">TO</span> <span class="Special">PUBLIC</span>;<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * 6.58<br/></li>
<li></span><span class="Comment"> * SQL_FEATURES table<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><br/></li>
<li><a id="L1710">&#x200c;</a><span class="Statement">CREATE</span> <span class="Special">TABLE</span> <span class="linkable">sql_features</span> (<br/></li>
<li>&nbsp; &nbsp; <span class="Identifier">feature_id</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; character_data,<br/></li>
<li>&nbsp; &nbsp; feature_name&nbsp; &nbsp; &nbsp; &nbsp; character_data,<br/></li>
<li>&nbsp; &nbsp; sub_feature_id&nbsp; &nbsp; &nbsp; character_data,<br/></li>
<li>&nbsp; &nbsp; sub_feature_name&nbsp; &nbsp; character_data,<br/></li>
<li>&nbsp; &nbsp; is_supported&nbsp; &nbsp; &nbsp; &nbsp; yes_or_no,<br/></li>
<li>&nbsp; &nbsp; is_verified_by&nbsp; &nbsp; &nbsp; character_data,<br/></li>
<li>&nbsp; &nbsp; comments&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; character_data<br/></li>
<li>);<br/></li>
<li><br/></li>
<li><span class="Comment">-- Will be filled with external data by initdb.<br/></li>
<li></span><br/></li>
<li><span class="Statement">GRANT</span> SELECT <span class="Special">ON</span> <a href="#L1710" title="catalog/information_schema.sql:1710">sql_features</a> <span class="Special">TO</span> <span class="Special">PUBLIC</span>;<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * 6.59<br/></li>
<li></span><span class="Comment"> * SQL_IMPLEMENTATION_INFO table<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><br/></li>
<li><a id="L1730">&#x200c;</a><span class="Statement">CREATE</span> <span class="Special">TABLE</span> <span class="linkable">sql_implementation_info</span> (<br/></li>
<li>&nbsp; &nbsp; implementation_info_id&nbsp; &nbsp; &nbsp; character_data,<br/></li>
<li>&nbsp; &nbsp; implementation_info_name&nbsp; &nbsp; character_data,<br/></li>
<li>&nbsp; &nbsp; integer_value&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; cardinal_number,<br/></li>
<li>&nbsp; &nbsp; character_value&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; character_data,<br/></li>
<li>&nbsp; &nbsp; comments&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; character_data<br/></li>
<li>);<br/></li>
<li><br/></li>
<li><span class="Statement">INSERT</span> <span class="Special">INTO</span> <a href="#L1730" title="catalog/information_schema.sql:1730">sql_implementation_info</a> <span class="Special">VALUES</span> (<span class="Special">'</span><span class="Constant">10003</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">CATALOG NAME</span><span class="Special">'</span>, <span class="Special">NULL</span>, <span class="Special">'</span><span class="Constant">Y</span><span class="Special">'</span>, <span class="Special">NULL</span>);<br/></li>
<li><span class="Statement">INSERT</span> <span class="Special">INTO</span> <a href="#L1730" title="catalog/information_schema.sql:1730">sql_implementation_info</a> <span class="Special">VALUES</span> (<span class="Special">'</span><span class="Constant">10004</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">COLLATING SEQUENCE</span><span class="Special">'</span>, <span class="Special">NULL</span>, (<span class="Statement">SELECT</span> default_collate_name <span class="Special">FROM</span> character_sets), <span class="Special">NULL</span>);<br/></li>
<li><span class="Statement">INSERT</span> <span class="Special">INTO</span> <a href="#L1730" title="catalog/information_schema.sql:1730">sql_implementation_info</a> <span class="Special">VALUES</span> (<span class="Special">'</span><span class="Constant">23</span><span class="Special">'</span>,&nbsp; &nbsp; <span class="Special">'</span><span class="Constant">CURSOR COMMIT BEHAVIOR</span><span class="Special">'</span>, <span class="Constant">1</span>, <span class="Special">NULL</span>, <span class="Special">'</span><span class="Constant">close cursors and retain prepared statements</span><span class="Special">'</span>);<br/></li>
<li><span class="Statement">INSERT</span> <span class="Special">INTO</span> <a href="#L1730" title="catalog/information_schema.sql:1730">sql_implementation_info</a> <span class="Special">VALUES</span> (<span class="Special">'</span><span class="Constant">2</span><span class="Special">'</span>,&nbsp; &nbsp;&nbsp; <span class="Special">'</span><span class="Constant">DATA SOURCE NAME</span><span class="Special">'</span>, <span class="Special">NULL</span>, <span class="Special">''</span>, <span class="Special">NULL</span>);<br/></li>
<li><span class="Statement">INSERT</span> <span class="Special">INTO</span> <a href="#L1730" title="catalog/information_schema.sql:1730">sql_implementation_info</a> <span class="Special">VALUES</span> (<span class="Special">'</span><span class="Constant">17</span><span class="Special">'</span>,&nbsp; &nbsp; <span class="Special">'</span><span class="Constant">DBMS NAME</span><span class="Special">'</span>, <span class="Special">NULL</span>, (<span class="Statement">select</span> <span class="Identifier">trim</span>(trailing <span class="Special">'</span><span class="Constant"> </span><span class="Special">'</span> <span class="Special">from</span> substring(version() <span class="Special">from</span> <span class="Special">'</span><span class="Constant">^[^0-9]*</span><span class="Special">'</span>))), <span class="Special">NULL</span>);<br/></li>
<li><span class="Statement">INSERT</span> <span class="Special">INTO</span> <a href="#L1730" title="catalog/information_schema.sql:1730">sql_implementation_info</a> <span class="Special">VALUES</span> (<span class="Special">'</span><span class="Constant">18</span><span class="Special">'</span>,&nbsp; &nbsp; <span class="Special">'</span><span class="Constant">DBMS VERSION</span><span class="Special">'</span>, <span class="Special">NULL</span>, <span class="Special">'</span><span class="Constant">???</span><span class="Special">'</span>, <span class="Special">NULL</span>); <span class="Comment">-- filled by initdb<br/></li>
<li></span><span class="Statement">INSERT</span> <span class="Special">INTO</span> <a href="#L1730" title="catalog/information_schema.sql:1730">sql_implementation_info</a> <span class="Special">VALUES</span> (<span class="Special">'</span><span class="Constant">26</span><span class="Special">'</span>,&nbsp; &nbsp; <span class="Special">'</span><span class="Constant">DEFAULT TRANSACTION ISOLATION</span><span class="Special">'</span>, <span class="Constant">2</span>, <span class="Special">NULL</span>, <span class="Special">'</span><span class="Constant">READ COMMITTED; user-settable</span><span class="Special">'</span>);<br/></li>
<li><span class="Statement">INSERT</span> <span class="Special">INTO</span> <a href="#L1730" title="catalog/information_schema.sql:1730">sql_implementation_info</a> <span class="Special">VALUES</span> (<span class="Special">'</span><span class="Constant">28</span><span class="Special">'</span>,&nbsp; &nbsp; <span class="Special">'</span><span class="Constant">IDENTIFIER CASE</span><span class="Special">'</span>, <span class="Constant">3</span>, <span class="Special">NULL</span>, <span class="Special">'</span><span class="Constant">stored in mixed case - case sensitive</span><span class="Special">'</span>);<br/></li>
<li><span class="Statement">INSERT</span> <span class="Special">INTO</span> <a href="#L1730" title="catalog/information_schema.sql:1730">sql_implementation_info</a> <span class="Special">VALUES</span> (<span class="Special">'</span><span class="Constant">85</span><span class="Special">'</span>,&nbsp; &nbsp; <span class="Special">'</span><span class="Constant">NULL COLLATION</span><span class="Special">'</span>, <span class="Constant">0</span>, <span class="Special">NULL</span>, <span class="Special">'</span><span class="Constant">nulls higher than non-nulls</span><span class="Special">'</span>);<br/></li>
<li><span class="Statement">INSERT</span> <span class="Special">INTO</span> <a href="#L1730" title="catalog/information_schema.sql:1730">sql_implementation_info</a> <span class="Special">VALUES</span> (<span class="Special">'</span><span class="Constant">13</span><span class="Special">'</span>,&nbsp; &nbsp; <span class="Special">'</span><span class="Constant">SERVER NAME</span><span class="Special">'</span>, <span class="Special">NULL</span>, <span class="Special">''</span>, <span class="Special">NULL</span>);<br/></li>
<li><span class="Statement">INSERT</span> <span class="Special">INTO</span> <a href="#L1730" title="catalog/information_schema.sql:1730">sql_implementation_info</a> <span class="Special">VALUES</span> (<span class="Special">'</span><span class="Constant">94</span><span class="Special">'</span>,&nbsp; &nbsp; <span class="Special">'</span><span class="Constant">SPECIAL CHARACTERS</span><span class="Special">'</span>, <span class="Special">NULL</span>, <span class="Special">''</span>, <span class="Special">'</span><span class="Constant">all non-ASCII characters allowed</span><span class="Special">'</span>);<br/></li>
<li><span class="Statement">INSERT</span> <span class="Special">INTO</span> <a href="#L1730" title="catalog/information_schema.sql:1730">sql_implementation_info</a> <span class="Special">VALUES</span> (<span class="Special">'</span><span class="Constant">46</span><span class="Special">'</span>,&nbsp; &nbsp; <span class="Special">'</span><span class="Constant">TRANSACTION CAPABLE</span><span class="Special">'</span>, <span class="Constant">2</span>, <span class="Special">NULL</span>, <span class="Special">'</span><span class="Constant">both DML and DDL</span><span class="Special">'</span>);<br/></li>
<li><br/></li>
<li><span class="Statement">GRANT</span> SELECT <span class="Special">ON</span> <a href="#L1730" title="catalog/information_schema.sql:1730">sql_implementation_info</a> <span class="Special">TO</span> <span class="Special">PUBLIC</span>;<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * 6.60<br/></li>
<li></span><span class="Comment"> * SQL_PARTS table<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><br/></li>
<li><a id="L1759">&#x200c;</a><span class="Statement">CREATE</span> <span class="Special">TABLE</span> <span class="linkable">sql_parts</span> (<br/></li>
<li>&nbsp; &nbsp; <span class="Identifier">feature_id</span>&nbsp; &nbsp; &nbsp; character_data,<br/></li>
<li>&nbsp; &nbsp; feature_name&nbsp; &nbsp; character_data,<br/></li>
<li>&nbsp; &nbsp; is_supported&nbsp; &nbsp; yes_or_no,<br/></li>
<li>&nbsp; &nbsp; is_verified_by&nbsp; character_data,<br/></li>
<li>&nbsp; &nbsp; comments&nbsp; &nbsp; &nbsp; &nbsp; character_data<br/></li>
<li>);<br/></li>
<li><br/></li>
<li><span class="Statement">INSERT</span> <span class="Special">INTO</span> <a href="#L1759" title="catalog/information_schema.sql:1759">sql_parts</a> <span class="Special">VALUES</span> (<span class="Special">'</span><span class="Constant">1</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">Framework (SQL/Framework)</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">NO</span><span class="Special">'</span>, <span class="Special">NULL</span>, <span class="Special">''</span>);<br/></li>
<li><span class="Statement">INSERT</span> <span class="Special">INTO</span> <a href="#L1759" title="catalog/information_schema.sql:1759">sql_parts</a> <span class="Special">VALUES</span> (<span class="Special">'</span><span class="Constant">2</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">Foundation (SQL/Foundation)</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">NO</span><span class="Special">'</span>, <span class="Special">NULL</span>, <span class="Special">''</span>);<br/></li>
<li><span class="Statement">INSERT</span> <span class="Special">INTO</span> <a href="#L1759" title="catalog/information_schema.sql:1759">sql_parts</a> <span class="Special">VALUES</span> (<span class="Special">'</span><span class="Constant">3</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">Call-Level Interface (SQL/CLI)</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">NO</span><span class="Special">'</span>, <span class="Special">NULL</span>, <span class="Special">''</span>);<br/></li>
<li><span class="Statement">INSERT</span> <span class="Special">INTO</span> <a href="#L1759" title="catalog/information_schema.sql:1759">sql_parts</a> <span class="Special">VALUES</span> (<span class="Special">'</span><span class="Constant">4</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">Persistent Stored Modules (SQL/PSM)</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">NO</span><span class="Special">'</span>, <span class="Special">NULL</span>, <span class="Special">''</span>);<br/></li>
<li><span class="Statement">INSERT</span> <span class="Special">INTO</span> <a href="#L1759" title="catalog/information_schema.sql:1759">sql_parts</a> <span class="Special">VALUES</span> (<span class="Special">'</span><span class="Constant">9</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">Management of External Data (SQL/MED)</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">NO</span><span class="Special">'</span>, <span class="Special">NULL</span>, <span class="Special">''</span>);<br/></li>
<li><span class="Statement">INSERT</span> <span class="Special">INTO</span> <a href="#L1759" title="catalog/information_schema.sql:1759">sql_parts</a> <span class="Special">VALUES</span> (<span class="Special">'</span><span class="Constant">10</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">Object Language Bindings (SQL/OLB)</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">NO</span><span class="Special">'</span>, <span class="Special">NULL</span>, <span class="Special">''</span>);<br/></li>
<li><span class="Statement">INSERT</span> <span class="Special">INTO</span> <a href="#L1759" title="catalog/information_schema.sql:1759">sql_parts</a> <span class="Special">VALUES</span> (<span class="Special">'</span><span class="Constant">11</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">Information and Definition Schema (SQL/Schemata)</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">NO</span><span class="Special">'</span>, <span class="Special">NULL</span>, <span class="Special">''</span>);<br/></li>
<li><span class="Statement">INSERT</span> <span class="Special">INTO</span> <a href="#L1759" title="catalog/information_schema.sql:1759">sql_parts</a> <span class="Special">VALUES</span> (<span class="Special">'</span><span class="Constant">13</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">Routines and Types Using the Java Programming Language (SQL/JRT)</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">NO</span><span class="Special">'</span>, <span class="Special">NULL</span>, <span class="Special">''</span>);<br/></li>
<li><span class="Statement">INSERT</span> <span class="Special">INTO</span> <a href="#L1759" title="catalog/information_schema.sql:1759">sql_parts</a> <span class="Special">VALUES</span> (<span class="Special">'</span><span class="Constant">14</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">XML-Related Specifications (SQL/XML)</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">NO</span><span class="Special">'</span>, <span class="Special">NULL</span>, <span class="Special">''</span>);<br/></li>
<li><span class="Statement">INSERT</span> <span class="Special">INTO</span> <a href="#L1759" title="catalog/information_schema.sql:1759">sql_parts</a> <span class="Special">VALUES</span> (<span class="Special">'</span><span class="Constant">15</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">Multi-Dimensional Arrays (SQL/MDA)</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">NO</span><span class="Special">'</span>, <span class="Special">NULL</span>, <span class="Special">''</span>);<br/></li>
<li><span class="Statement">INSERT</span> <span class="Special">INTO</span> <a href="#L1759" title="catalog/information_schema.sql:1759">sql_parts</a> <span class="Special">VALUES</span> (<span class="Special">'</span><span class="Constant">16</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">Property Graph Queries (SQL/PGQ)</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">NO</span><span class="Special">'</span>, <span class="Special">NULL</span>, <span class="Special">''</span>);<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * 6.61<br/></li>
<li></span><span class="Comment"> * SQL_SIZING table<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><br/></li>
<li><a id="L1785">&#x200c;</a><span class="Statement">CREATE</span> <span class="Special">TABLE</span> <span class="linkable">sql_sizing</span> (<br/></li>
<li>&nbsp; &nbsp; sizing_id&nbsp; &nbsp; &nbsp;&nbsp; cardinal_number,<br/></li>
<li>&nbsp; &nbsp; sizing_name&nbsp; &nbsp;&nbsp; character_data,<br/></li>
<li>&nbsp; &nbsp; supported_value cardinal_number,<br/></li>
<li>&nbsp; &nbsp; comments&nbsp; &nbsp; &nbsp; &nbsp; character_data<br/></li>
<li>);<br/></li>
<li><br/></li>
<li><span class="Statement">INSERT</span> <span class="Special">INTO</span> <a href="#L1785" title="catalog/information_schema.sql:1785">sql_sizing</a> <span class="Special">VALUES</span> (<span class="Constant">34</span>,&nbsp; &nbsp; <span class="Special">'</span><span class="Constant">MAXIMUM CATALOG NAME LENGTH</span><span class="Special">'</span>, <span class="Constant">63</span>, <span class="Special">NULL</span>);<br/></li>
<li><span class="Statement">INSERT</span> <span class="Special">INTO</span> <a href="#L1785" title="catalog/information_schema.sql:1785">sql_sizing</a> <span class="Special">VALUES</span> (<span class="Constant">30</span>,&nbsp; &nbsp; <span class="Special">'</span><span class="Constant">MAXIMUM COLUMN NAME LENGTH</span><span class="Special">'</span>, <span class="Constant">63</span>, <span class="Special">NULL</span>);<br/></li>
<li><span class="Statement">INSERT</span> <span class="Special">INTO</span> <a href="#L1785" title="catalog/information_schema.sql:1785">sql_sizing</a> <span class="Special">VALUES</span> (<span class="Constant">97</span>,&nbsp; &nbsp; <span class="Special">'</span><span class="Constant">MAXIMUM COLUMNS IN GROUP BY</span><span class="Special">'</span>, <span class="Constant">0</span>, <span class="Special">NULL</span>);<br/></li>
<li><span class="Statement">INSERT</span> <span class="Special">INTO</span> <a href="#L1785" title="catalog/information_schema.sql:1785">sql_sizing</a> <span class="Special">VALUES</span> (<span class="Constant">99</span>,&nbsp; &nbsp; <span class="Special">'</span><span class="Constant">MAXIMUM COLUMNS IN ORDER BY</span><span class="Special">'</span>, <span class="Constant">0</span>, <span class="Special">NULL</span>);<br/></li>
<li><span class="Statement">INSERT</span> <span class="Special">INTO</span> <a href="#L1785" title="catalog/information_schema.sql:1785">sql_sizing</a> <span class="Special">VALUES</span> (<span class="Constant">100</span>,&nbsp;&nbsp; <span class="Special">'</span><span class="Constant">MAXIMUM COLUMNS IN SELECT</span><span class="Special">'</span>, <span class="Constant">1664</span>, <span class="Special">NULL</span>); <span class="Comment">-- match MaxTupleAttributeNumber<br/></li>
<li></span><span class="Statement">INSERT</span> <span class="Special">INTO</span> <a href="#L1785" title="catalog/information_schema.sql:1785">sql_sizing</a> <span class="Special">VALUES</span> (<span class="Constant">101</span>,&nbsp;&nbsp; <span class="Special">'</span><span class="Constant">MAXIMUM COLUMNS IN TABLE</span><span class="Special">'</span>, <span class="Constant">1600</span>, <span class="Special">NULL</span>); <span class="Comment">-- match MaxHeapAttributeNumber<br/></li>
<li></span><span class="Statement">INSERT</span> <span class="Special">INTO</span> <a href="#L1785" title="catalog/information_schema.sql:1785">sql_sizing</a> <span class="Special">VALUES</span> (<span class="Constant">1</span>,&nbsp; &nbsp;&nbsp; <span class="Special">'</span><span class="Constant">MAXIMUM CONCURRENT ACTIVITIES</span><span class="Special">'</span>, <span class="Constant">0</span>, <span class="Special">NULL</span>);<br/></li>
<li><span class="Statement">INSERT</span> <span class="Special">INTO</span> <a href="#L1785" title="catalog/information_schema.sql:1785">sql_sizing</a> <span class="Special">VALUES</span> (<span class="Constant">31</span>,&nbsp; &nbsp; <span class="Special">'</span><span class="Constant">MAXIMUM CURSOR NAME LENGTH</span><span class="Special">'</span>, <span class="Constant">63</span>, <span class="Special">NULL</span>);<br/></li>
<li><span class="Statement">INSERT</span> <span class="Special">INTO</span> <a href="#L1785" title="catalog/information_schema.sql:1785">sql_sizing</a> <span class="Special">VALUES</span> (<span class="Constant">0</span>,&nbsp; &nbsp;&nbsp; <span class="Special">'</span><span class="Constant">MAXIMUM DRIVER CONNECTIONS</span><span class="Special">'</span>, <span class="Special">NULL</span>, <span class="Special">NULL</span>);<br/></li>
<li><span class="Statement">INSERT</span> <span class="Special">INTO</span> <a href="#L1785" title="catalog/information_schema.sql:1785">sql_sizing</a> <span class="Special">VALUES</span> (<span class="Constant">10005</span>, <span class="Special">'</span><span class="Constant">MAXIMUM IDENTIFIER LENGTH</span><span class="Special">'</span>, <span class="Constant">63</span>, <span class="Special">NULL</span>);<br/></li>
<li><span class="Statement">INSERT</span> <span class="Special">INTO</span> <a href="#L1785" title="catalog/information_schema.sql:1785">sql_sizing</a> <span class="Special">VALUES</span> (<span class="Constant">32</span>,&nbsp; &nbsp; <span class="Special">'</span><span class="Constant">MAXIMUM SCHEMA NAME LENGTH</span><span class="Special">'</span>, <span class="Constant">63</span>, <span class="Special">NULL</span>);<br/></li>
<li><span class="Statement">INSERT</span> <span class="Special">INTO</span> <a href="#L1785" title="catalog/information_schema.sql:1785">sql_sizing</a> <span class="Special">VALUES</span> (<span class="Constant">20000</span>, <span class="Special">'</span><span class="Constant">MAXIMUM STATEMENT OCTETS</span><span class="Special">'</span>, <span class="Constant">0</span>, <span class="Special">NULL</span>);<br/></li>
<li><span class="Statement">INSERT</span> <span class="Special">INTO</span> <a href="#L1785" title="catalog/information_schema.sql:1785">sql_sizing</a> <span class="Special">VALUES</span> (<span class="Constant">20001</span>, <span class="Special">'</span><span class="Constant">MAXIMUM STATEMENT OCTETS DATA</span><span class="Special">'</span>, <span class="Constant">0</span>, <span class="Special">NULL</span>);<br/></li>
<li><span class="Statement">INSERT</span> <span class="Special">INTO</span> <a href="#L1785" title="catalog/information_schema.sql:1785">sql_sizing</a> <span class="Special">VALUES</span> (<span class="Constant">20002</span>, <span class="Special">'</span><span class="Constant">MAXIMUM STATEMENT OCTETS SCHEMA</span><span class="Special">'</span>, <span class="Constant">0</span>, <span class="Special">NULL</span>);<br/></li>
<li><span class="Statement">INSERT</span> <span class="Special">INTO</span> <a href="#L1785" title="catalog/information_schema.sql:1785">sql_sizing</a> <span class="Special">VALUES</span> (<span class="Constant">35</span>,&nbsp; &nbsp; <span class="Special">'</span><span class="Constant">MAXIMUM TABLE NAME LENGTH</span><span class="Special">'</span>, <span class="Constant">63</span>, <span class="Special">NULL</span>);<br/></li>
<li><span class="Statement">INSERT</span> <span class="Special">INTO</span> <a href="#L1785" title="catalog/information_schema.sql:1785">sql_sizing</a> <span class="Special">VALUES</span> (<span class="Constant">106</span>,&nbsp;&nbsp; <span class="Special">'</span><span class="Constant">MAXIMUM TABLES IN SELECT</span><span class="Special">'</span>, <span class="Constant">0</span>, <span class="Special">NULL</span>);<br/></li>
<li><span class="Statement">INSERT</span> <span class="Special">INTO</span> <a href="#L1785" title="catalog/information_schema.sql:1785">sql_sizing</a> <span class="Special">VALUES</span> (<span class="Constant">107</span>,&nbsp;&nbsp; <span class="Special">'</span><span class="Constant">MAXIMUM USER NAME LENGTH</span><span class="Special">'</span>, <span class="Constant">63</span>, <span class="Special">NULL</span>);<br/></li>
<li><span class="Statement">INSERT</span> <span class="Special">INTO</span> <a href="#L1785" title="catalog/information_schema.sql:1785">sql_sizing</a> <span class="Special">VALUES</span> (<span class="Constant">25000</span>, <span class="Special">'</span><span class="Constant">MAXIMUM CURRENT DEFAULT TRANSFORM GROUP LENGTH</span><span class="Special">'</span>, <span class="Special">NULL</span>, <span class="Special">NULL</span>);<br/></li>
<li><span class="Statement">INSERT</span> <span class="Special">INTO</span> <a href="#L1785" title="catalog/information_schema.sql:1785">sql_sizing</a> <span class="Special">VALUES</span> (<span class="Constant">25001</span>, <span class="Special">'</span><span class="Constant">MAXIMUM CURRENT TRANSFORM GROUP LENGTH</span><span class="Special">'</span>, <span class="Special">NULL</span>, <span class="Special">NULL</span>);<br/></li>
<li><span class="Statement">INSERT</span> <span class="Special">INTO</span> <a href="#L1785" title="catalog/information_schema.sql:1785">sql_sizing</a> <span class="Special">VALUES</span> (<span class="Constant">25002</span>, <span class="Special">'</span><span class="Constant">MAXIMUM CURRENT PATH LENGTH</span><span class="Special">'</span>, <span class="Constant">0</span>, <span class="Special">NULL</span>);<br/></li>
<li><span class="Statement">INSERT</span> <span class="Special">INTO</span> <a href="#L1785" title="catalog/information_schema.sql:1785">sql_sizing</a> <span class="Special">VALUES</span> (<span class="Constant">25003</span>, <span class="Special">'</span><span class="Constant">MAXIMUM CURRENT ROLE LENGTH</span><span class="Special">'</span>, <span class="Special">NULL</span>, <span class="Special">NULL</span>);<br/></li>
<li><span class="Statement">INSERT</span> <span class="Special">INTO</span> <a href="#L1785" title="catalog/information_schema.sql:1785">sql_sizing</a> <span class="Special">VALUES</span> (<span class="Constant">25004</span>, <span class="Special">'</span><span class="Constant">MAXIMUM SESSION USER LENGTH</span><span class="Special">'</span>, <span class="Constant">63</span>, <span class="Special">NULL</span>);<br/></li>
<li><span class="Statement">INSERT</span> <span class="Special">INTO</span> <a href="#L1785" title="catalog/information_schema.sql:1785">sql_sizing</a> <span class="Special">VALUES</span> (<span class="Constant">25005</span>, <span class="Special">'</span><span class="Constant">MAXIMUM SYSTEM USER LENGTH</span><span class="Special">'</span>, <span class="Constant">63</span>, <span class="Special">NULL</span>);<br/></li>
<li><br/></li>
<li><span class="Statement">UPDATE</span> <a href="#L1785" title="catalog/information_schema.sql:1785">sql_sizing</a><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">SET</span> supported_value = (<span class="Statement">SELECT</span> typlen<span class="Constant">-1</span> <span class="Special">FROM</span> pg_catalog.pg_type <span class="Special">WHERE</span> typname = <span class="Special">'</span><span class="Constant">name</span><span class="Special">'</span>),<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; comments = <span class="Special">'</span><span class="Constant">Might be less, depending on character set.</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; <span class="Special">WHERE</span> supported_value = <span class="Constant">63</span>;<br/></li>
<li><br/></li>
<li><span class="Statement">GRANT</span> SELECT <span class="Special">ON</span> <a href="#L1785" title="catalog/information_schema.sql:1785">sql_sizing</a> <span class="Special">TO</span> <span class="Special">PUBLIC</span>;<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * 6.62<br/></li>
<li></span><span class="Comment"> * TABLE_CONSTRAINTS view<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> table_constraints <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT</span> <span class="Identifier">CAST</span>(current_database() <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> constraint_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(nc.nspname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> constraint_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(c.conname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> constraint_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(current_database() <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> table_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(nr.nspname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> table_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(r.relname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> table_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">CASE</span> c.contype <span class="Special">WHEN</span> <span class="Special">'</span><span class="Constant">c</span><span class="Special">'</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">CHECK</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> <span class="Special">'</span><span class="Constant">n</span><span class="Special">'</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">CHECK</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> <span class="Special">'</span><span class="Constant">f</span><span class="Special">'</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">FOREIGN KEY</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> <span class="Special">'</span><span class="Constant">p</span><span class="Special">'</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">PRIMARY KEY</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> <span class="Special">'</span><span class="Constant">u</span><span class="Special">'</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">UNIQUE</span><span class="Special">'</span> <span class="Special">END<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">AS</span> character_data) <span class="Special">AS</span> constraint_type,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">CASE</span> <span class="Special">WHEN</span> c.condeferrable <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">YES</span><span class="Special">'</span> <span class="Special">ELSE</span> <span class="Special">'</span><span class="Constant">NO</span><span class="Special">'</span> <span class="Special">END</span> <span class="Special">AS</span> yes_or_no)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">AS</span> is_deferrable,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">CASE</span> <span class="Special">WHEN</span> c.condeferred <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">YES</span><span class="Special">'</span> <span class="Special">ELSE</span> <span class="Special">'</span><span class="Constant">NO</span><span class="Special">'</span> <span class="Special">END</span> <span class="Special">AS</span> yes_or_no)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">AS</span> initially_deferred,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">'</span><span class="Constant">YES</span><span class="Special">'</span> <span class="Special">AS</span> yes_or_no) <span class="Special">AS</span> enforced,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">CASE</span> <span class="Special">WHEN</span> c.contype = <span class="Special">'</span><span class="Constant">u</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">THEN</span> <span class="Special">CASE</span> <span class="Special">WHEN</span> (<span class="Statement">SELECT</span> <span class="Statement">NOT</span> indnullsnotdistinct <span class="Special">FROM</span> pg_index <span class="Special">WHERE</span> indexrelid = conindid) <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">YES</span><span class="Special">'</span> <span class="Special">ELSE</span> <span class="Special">'</span><span class="Constant">NO</span><span class="Special">'</span> <span class="Special">END<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">END<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">AS</span> yes_or_no) <span class="Special">AS</span> nulls_distinct<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> pg_namespace nc,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; pg_namespace nr,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; pg_constraint c,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; pg_class r<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Special">WHERE</span> nc.oid = c.connamespace <span class="Statement">AND</span> nr.oid = r.relnamespace<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> c.conrelid = r.oid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> c.contype <span class="Statement">NOT</span> <span class="Statement">IN</span> (<span class="Special">'</span><span class="Constant">t</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">x</span><span class="Special">'</span>)&nbsp; <span class="Comment">-- ignore nonstandard constraints<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> r.relkind <span class="Statement">IN</span> (<span class="Special">'</span><span class="Constant">r</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">p</span><span class="Special">'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> (<span class="Statement">NOT</span> pg_is_other_temp_schema(nr.oid))<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> (pg_has_role(r.relowner, <span class="Special">'</span><span class="Constant">USAGE</span><span class="Special">'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Comment">-- SELECT privilege omitted, per SQL standard<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">OR</span> has_table_privilege(r.oid, <span class="Special">'</span><span class="Constant">INSERT, UPDATE, DELETE, TRUNCATE, REFERENCES, TRIGGER</span><span class="Special">'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">OR</span> has_any_column_privilege(r.oid, <span class="Special">'</span><span class="Constant">INSERT, UPDATE, REFERENCES</span><span class="Special">'</span>) );<br/></li>
<li><br/></li>
<li><span class="Statement">GRANT</span> SELECT <span class="Special">ON</span> table_constraints <span class="Special">TO</span> <span class="Special">PUBLIC</span>;<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * 6.63<br/></li>
<li></span><span class="Comment"> * TABLE_METHOD_PRIVILEGES view<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><br/></li>
<li><span class="Comment">-- feature not supported<br/></li>
<li></span><br/></li>
<li><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * 6.64<br/></li>
<li></span><span class="Comment"> * TABLE_PRIVILEGES view<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> table_privileges <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT</span> <span class="Identifier">CAST</span>(u_grantor.rolname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> grantor,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(grantee.rolname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> grantee,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(current_database() <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> table_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(nc.nspname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> table_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(c.relname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> table_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(c.prtype <span class="Special">AS</span> character_data) <span class="Special">AS</span> privilege_type,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">CASE</span> <span class="Special">WHEN<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Comment">-- object owner always has grant options<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pg_has_role(grantee.oid, c.relowner, <span class="Special">'</span><span class="Constant">USAGE</span><span class="Special">'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">OR</span> c.grantable<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">YES</span><span class="Special">'</span> <span class="Special">ELSE</span> <span class="Special">'</span><span class="Constant">NO</span><span class="Special">'</span> <span class="Special">END</span> <span class="Special">AS</span> yes_or_no) <span class="Special">AS</span> is_grantable,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">CASE</span> <span class="Special">WHEN</span> c.prtype = <span class="Special">'</span><span class="Constant">SELECT</span><span class="Special">'</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">YES</span><span class="Special">'</span> <span class="Special">ELSE</span> <span class="Special">'</span><span class="Constant">NO</span><span class="Special">'</span> <span class="Special">END</span> <span class="Special">AS</span> yes_or_no) <span class="Special">AS</span> with_hierarchy<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> (<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">SELECT</span> oid, relname, relnamespace, relkind, relowner, (aclexplode(<span class="Identifier">coalesce</span>(relacl, acldefault(<span class="Special">'</span><span class="Constant">r</span><span class="Special">'</span>, relowner)))).* <span class="Special">FROM</span> pg_class<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ) <span class="Special">AS</span> c (oid, relname, relnamespace, relkind, relowner, grantor, grantee, prtype, grantable),<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; pg_namespace nc,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; pg_authid u_grantor,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; (<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">SELECT</span> oid, rolname <span class="Special">FROM</span> pg_authid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">UNION</span> <span class="Statement">ALL<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">SELECT</span> <span class="Constant">0</span>::oid, <span class="Special">'</span><span class="Constant">PUBLIC</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ) <span class="Special">AS</span> grantee (oid, rolname)<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Special">WHERE</span> c.relnamespace = nc.oid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> c.relkind <span class="Statement">IN</span> (<span class="Special">'</span><span class="Constant">r</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">v</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">f</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">p</span><span class="Special">'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> c.grantee = grantee.oid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> c.grantor = u_grantor.oid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> c.prtype <span class="Statement">IN</span> (<span class="Special">'</span><span class="Constant">INSERT</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">SELECT</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">UPDATE</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">DELETE</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">TRUNCATE</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">REFERENCES</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">TRIGGER</span><span class="Special">'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> (pg_has_role(u_grantor.oid, <span class="Special">'</span><span class="Constant">USAGE</span><span class="Special">'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">OR</span> pg_has_role(grantee.oid, <span class="Special">'</span><span class="Constant">USAGE</span><span class="Special">'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">OR</span> grantee.rolname = <span class="Special">'</span><span class="Constant">PUBLIC</span><span class="Special">'</span>);<br/></li>
<li><br/></li>
<li><span class="Statement">GRANT</span> SELECT <span class="Special">ON</span> table_privileges <span class="Special">TO</span> <span class="Special">PUBLIC</span>;<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * 6.45<br/></li>
<li></span><span class="Comment"> * ROLE_TABLE_GRANTS view<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> role_table_grants <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT</span> grantor,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; grantee,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; table_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; table_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; table_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; privilege_type,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; is_grantable,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; with_hierarchy<br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> table_privileges<br/></li>
<li>&nbsp; &nbsp; <span class="Special">WHERE</span> grantor <span class="Statement">IN</span> (<span class="Statement">SELECT</span> role_name <span class="Special">FROM</span> enabled_roles)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">OR</span> grantee <span class="Statement">IN</span> (<span class="Statement">SELECT</span> role_name <span class="Special">FROM</span> enabled_roles);<br/></li>
<li><br/></li>
<li><span class="Statement">GRANT</span> SELECT <span class="Special">ON</span> role_table_grants <span class="Special">TO</span> <span class="Special">PUBLIC</span>;<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * 6.65<br/></li>
<li></span><span class="Comment"> * TABLES view<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> tables <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT</span> <span class="Identifier">CAST</span>(current_database() <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> table_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(nc.nspname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> table_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(c.relname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> table_name,<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">CASE</span> <span class="Special">WHEN</span> nc.oid = pg_my_temp_schema() <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">LOCAL TEMPORARY</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> c.relkind <span class="Statement">IN</span> (<span class="Special">'</span><span class="Constant">r</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">p</span><span class="Special">'</span>) <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">BASE TABLE</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> c.relkind = <span class="Special">'</span><span class="Constant">v</span><span class="Special">'</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">VIEW</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> c.relkind = <span class="Special">'</span><span class="Constant">f</span><span class="Special">'</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">FOREIGN</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">ELSE</span> <span class="Special">null</span> <span class="Special">END<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">AS</span> character_data) <span class="Special">AS</span> table_type,<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> self_referencing_column_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> character_data) <span class="Special">AS</span> reference_generation,<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">CASE</span> <span class="Special">WHEN</span> t.typname <span class="Special">IS</span> <span class="Statement">NOT</span> <span class="Special">NULL</span> <span class="Special">THEN</span> current_database() <span class="Special">ELSE</span> <span class="Special">null</span> <span class="Special">END</span> <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> user_defined_type_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(nt.nspname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> user_defined_type_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(t.typname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> user_defined_type_name,<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">CASE</span> <span class="Special">WHEN</span> c.relkind <span class="Statement">IN</span> (<span class="Special">'</span><span class="Constant">r</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">p</span><span class="Special">'</span>) <span class="Statement">OR<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (c.relkind <span class="Statement">IN</span> (<span class="Special">'</span><span class="Constant">v</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">f</span><span class="Special">'</span>) <span class="Statement">AND<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Comment">-- 1 &lt;&lt; CMD_INSERT<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; pg_relation_is_updatable(c.oid, <span class="Special">false</span>) &amp; <span class="Constant">8</span> = <span class="Constant">8</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">YES</span><span class="Special">'</span> <span class="Special">ELSE</span> <span class="Special">'</span><span class="Constant">NO</span><span class="Special">'</span> <span class="Special">END</span> <span class="Special">AS</span> yes_or_no) <span class="Special">AS</span> is_insertable_into,<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">CASE</span> <span class="Special">WHEN</span> t.typname <span class="Special">IS</span> <span class="Statement">NOT</span> <span class="Special">NULL</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">YES</span><span class="Special">'</span> <span class="Special">ELSE</span> <span class="Special">'</span><span class="Constant">NO</span><span class="Special">'</span> <span class="Special">END</span> <span class="Special">AS</span> yes_or_no) <span class="Special">AS</span> is_typed,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> character_data) <span class="Special">AS</span> commit_action<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> pg_namespace nc <span class="Special">JOIN</span> pg_class c <span class="Special">ON</span> (nc.oid = c.relnamespace)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">LEFT</span> <span class="Special">JOIN</span> (pg_type t <span class="Special">JOIN</span> pg_namespace nt <span class="Special">ON</span> (t.typnamespace = nt.oid)) <span class="Special">ON</span> (c.reloftype = t.oid)<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Special">WHERE</span> c.relkind <span class="Statement">IN</span> (<span class="Special">'</span><span class="Constant">r</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">v</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">f</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">p</span><span class="Special">'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> (<span class="Statement">NOT</span> pg_is_other_temp_schema(nc.oid))<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> (pg_has_role(c.relowner, <span class="Special">'</span><span class="Constant">USAGE</span><span class="Special">'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">OR</span> has_table_privilege(c.oid, <span class="Special">'</span><span class="Constant">SELECT, INSERT, UPDATE, DELETE, TRUNCATE, REFERENCES, TRIGGER</span><span class="Special">'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">OR</span> has_any_column_privilege(c.oid, <span class="Special">'</span><span class="Constant">SELECT, INSERT, UPDATE, REFERENCES</span><span class="Special">'</span>) );<br/></li>
<li><br/></li>
<li><span class="Statement">GRANT</span> SELECT <span class="Special">ON</span> tables <span class="Special">TO</span> <span class="Special">PUBLIC</span>;<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * 6.66<br/></li>
<li></span><span class="Comment"> * TRANSFORMS view<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> transforms <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT</span> <span class="Identifier">CAST</span>(current_database() <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> udt_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(nt.nspname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> udt_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(t.typname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> udt_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(current_database() <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> specific_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(np.nspname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> specific_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(nameconcatoid(p.proname, p.oid) <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> specific_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(l.lanname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> group_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">'</span><span class="Constant">FROM SQL</span><span class="Special">'</span> <span class="Special">AS</span> character_data) <span class="Special">AS</span> transform_type<br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> pg_type t <span class="Special">JOIN</span> pg_transform x <span class="Special">ON</span> t.oid = x.trftype<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">JOIN</span> pg_language l <span class="Special">ON</span> x.trflang = l.oid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">JOIN</span> pg_proc p <span class="Special">ON</span> x.trffromsql = p.oid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">JOIN</span> pg_namespace nt <span class="Special">ON</span> t.typnamespace = nt.oid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">JOIN</span> pg_namespace np <span class="Special">ON</span> p.pronamespace = np.oid<br/></li>
<li><br/></li>
<li>&nbsp; <span class="Statement">UNION<br/></li>
<li></span><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">SELECT</span> <span class="Identifier">CAST</span>(current_database() <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> udt_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(nt.nspname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> udt_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(t.typname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> udt_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(current_database() <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> specific_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(np.nspname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> specific_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(nameconcatoid(p.proname, p.oid) <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> specific_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(l.lanname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> group_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">'</span><span class="Constant">TO SQL</span><span class="Special">'</span> <span class="Special">AS</span> character_data) <span class="Special">AS</span> transform_type<br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> pg_type t <span class="Special">JOIN</span> pg_transform x <span class="Special">ON</span> t.oid = x.trftype<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">JOIN</span> pg_language l <span class="Special">ON</span> x.trflang = l.oid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">JOIN</span> pg_proc p <span class="Special">ON</span> x.trftosql = p.oid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">JOIN</span> pg_namespace nt <span class="Special">ON</span> t.typnamespace = nt.oid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">JOIN</span> pg_namespace np <span class="Special">ON</span> p.pronamespace = np.oid<br/></li>
<li><br/></li>
<li>&nbsp; <span class="Special">ORDER</span> <span class="Special">BY</span> udt_catalog, udt_schema, udt_name, group_name, transform_type&nbsp; <span class="Comment">-- some sensible grouping for interactive use<br/></li>
<li></span>;<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * 6.67<br/></li>
<li></span><span class="Comment"> * TRANSLATIONS view<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><br/></li>
<li><span class="Comment">-- feature not supported<br/></li>
<li></span><br/></li>
<li><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * 6.68<br/></li>
<li></span><span class="Comment"> * TRIGGERED_UPDATE_COLUMNS view<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> triggered_update_columns <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT</span> <span class="Identifier">CAST</span>(current_database() <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> trigger_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(n.nspname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> trigger_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(t.tgname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> trigger_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(current_database() <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> event_object_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(n.nspname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> event_object_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(c.relname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> event_object_table,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(a.attname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> event_object_column<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> pg_namespace n, pg_class c, pg_trigger t,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; (SELECT tgoid, (ta0.tgat).x <span class="Special">AS</span> tgattnum, (ta0.tgat).n <span class="Special">AS</span> tgattpos<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">FROM</span> (SELECT oid <span class="Special">AS</span> tgoid, information_schema.<a href="#L43" title="catalog/information_schema.sql:43">_pg_expandarray</a>(tgattr) <span class="Special">AS</span> tgat <span class="Special">FROM</span> pg_trigger) <span class="Special">AS</span> ta0) <span class="Special">AS</span> ta,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; pg_attribute a<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Special">WHERE</span> n.oid = c.relnamespace<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> c.oid = t.tgrelid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> t.oid = ta.tgoid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> (a.attrelid, a.attnum) = (t.tgrelid, ta.tgattnum)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> <span class="Statement">NOT</span> t.tgisinternal<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> (<span class="Statement">NOT</span> pg_is_other_temp_schema(n.oid))<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> (pg_has_role(c.relowner, <span class="Special">'</span><span class="Constant">USAGE</span><span class="Special">'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Comment">-- SELECT privilege omitted, per SQL standard<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">OR</span> has_column_privilege(c.oid, a.attnum, <span class="Special">'</span><span class="Constant">INSERT, UPDATE, REFERENCES</span><span class="Special">'</span>) );<br/></li>
<li><br/></li>
<li><span class="Statement">GRANT</span> SELECT <span class="Special">ON</span> triggered_update_columns <span class="Special">TO</span> <span class="Special">PUBLIC</span>;<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * 6.69<br/></li>
<li></span><span class="Comment"> * TRIGGER_COLUMN_USAGE view<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><br/></li>
<li><span class="Comment">-- not tracked by PostgreSQL<br/></li>
<li></span><br/></li>
<li><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * 6.70<br/></li>
<li></span><span class="Comment"> * TRIGGER_PERIOD_USAGE view<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><br/></li>
<li><span class="Comment">-- feature not supported<br/></li>
<li></span><br/></li>
<li><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * 6.71<br/></li>
<li></span><span class="Comment"> * TRIGGER_ROUTINE_USAGE view<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><br/></li>
<li><span class="Comment">-- not tracked by PostgreSQL<br/></li>
<li></span><br/></li>
<li><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * 6.72<br/></li>
<li></span><span class="Comment"> * TRIGGER_SEQUENCE_USAGE view<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><br/></li>
<li><span class="Comment">-- not tracked by PostgreSQL<br/></li>
<li></span><br/></li>
<li><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * 6.73<br/></li>
<li></span><span class="Comment"> * TRIGGER_TABLE_USAGE view<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><br/></li>
<li><span class="Comment">-- not tracked by PostgreSQL<br/></li>
<li></span><br/></li>
<li><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * 6.74<br/></li>
<li></span><span class="Comment"> * TRIGGERS view<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> triggers <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT</span> <span class="Identifier">CAST</span>(current_database() <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> trigger_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(n.nspname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> trigger_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(t.tgname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> trigger_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(em.text <span class="Special">AS</span> character_data) <span class="Special">AS</span> event_manipulation,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(current_database() <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> event_object_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(n.nspname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> event_object_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(c.relname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> event_object_table,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Comment">-- To determine action order, partition by schema, table,<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Comment">-- event_manipulation (INSERT/DELETE/UPDATE), ROW/STATEMENT (1),<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Comment">-- BEFORE/AFTER (66), then order by trigger name.&nbsp; It's preferable<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Comment">-- to partition by view output columns, so that query constraints<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Comment">-- can be pushed down below the window function.<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">rank</span>() OVER (PARTITION <span class="Special">BY</span> <span class="Identifier">CAST</span>(n.nspname <span class="Special">AS</span> sql_identifier),<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(c.relname <span class="Special">AS</span> sql_identifier),<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; em.num,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; t.tgtype &amp; <span class="Constant">1</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; t.tgtype &amp; <span class="Constant">66<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">ORDER</span> <span class="Special">BY</span> t.tgname)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">AS</span> cardinal_number) <span class="Special">AS</span> action_order,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">CASE</span> <span class="Special">WHEN</span> pg_has_role(c.relowner, <span class="Special">'</span><span class="Constant">USAGE</span><span class="Special">'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">THEN</span> (regexp_match(pg_get_triggerdef(t.oid), E<span class="Special">'</span><span class="Constant">.{35,} WHEN \\((.+)\\) EXECUTE FUNCTION</span><span class="Special">'</span>))[<span class="Constant">1</span>]<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">ELSE</span> <span class="Special">null</span> <span class="Special">END<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">AS</span> character_data) <span class="Special">AS</span> action_condition,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; substring(pg_get_triggerdef(t.oid) <span class="Special">from<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; position(<span class="Special">'</span><span class="Constant">EXECUTE FUNCTION</span><span class="Special">'</span> <span class="Statement">in</span> substring(pg_get_triggerdef(t.oid) <span class="Special">from</span> <span class="Constant">48</span>)) + <span class="Constant">47</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">AS</span> character_data) <span class="Special">AS</span> action_statement,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Comment">-- hard-wired reference to TRIGGER_TYPE_ROW<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">CASE</span> t.tgtype &amp; <span class="Constant">1</span> <span class="Special">WHEN</span> <span class="Constant">1</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">ROW</span><span class="Special">'</span> <span class="Special">ELSE</span> <span class="Special">'</span><span class="Constant">STATEMENT</span><span class="Special">'</span> <span class="Special">END<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">AS</span> character_data) <span class="Special">AS</span> action_orientation,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Comment">-- hard-wired refs to TRIGGER_TYPE_BEFORE, TRIGGER_TYPE_INSTEAD<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">CASE</span> t.tgtype &amp; <span class="Constant">66</span> <span class="Special">WHEN</span> <span class="Constant">2</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">BEFORE</span><span class="Special">'</span> <span class="Special">WHEN</span> <span class="Constant">64</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">INSTEAD OF</span><span class="Special">'</span> <span class="Special">ELSE</span> <span class="Special">'</span><span class="Constant">AFTER</span><span class="Special">'</span> <span class="Special">END<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">AS</span> character_data) <span class="Special">AS</span> action_timing,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(tgoldtable <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> action_reference_old_table,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(tgnewtable <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> action_reference_new_table,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> action_reference_old_row,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> action_reference_new_row,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> time_stamp) <span class="Special">AS</span> created<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> pg_namespace n, pg_class c, pg_trigger t,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Comment">-- hard-wired refs to TRIGGER_TYPE_INSERT, TRIGGER_TYPE_DELETE,<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Comment">-- TRIGGER_TYPE_UPDATE; we intentionally omit TRIGGER_TYPE_TRUNCATE<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; (<span class="Special">VALUES</span> (<span class="Constant">4</span>, <span class="Special">'</span><span class="Constant">INSERT</span><span class="Special">'</span>),<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; (<span class="Constant">8</span>, <span class="Special">'</span><span class="Constant">DELETE</span><span class="Special">'</span>),<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; (<span class="Constant">16</span>, <span class="Special">'</span><span class="Constant">UPDATE</span><span class="Special">'</span>)) <span class="Special">AS</span> em (num, text)<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Special">WHERE</span> n.oid = c.relnamespace<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> c.oid = t.tgrelid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> t.tgtype &amp; em.num &lt;&gt; <span class="Constant">0<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> <span class="Statement">NOT</span> t.tgisinternal<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> (<span class="Statement">NOT</span> pg_is_other_temp_schema(n.oid))<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> (pg_has_role(c.relowner, <span class="Special">'</span><span class="Constant">USAGE</span><span class="Special">'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Comment">-- SELECT privilege omitted, per SQL standard<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">OR</span> has_table_privilege(c.oid, <span class="Special">'</span><span class="Constant">INSERT, UPDATE, DELETE, TRUNCATE, REFERENCES, TRIGGER</span><span class="Special">'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">OR</span> has_any_column_privilege(c.oid, <span class="Special">'</span><span class="Constant">INSERT, UPDATE, REFERENCES</span><span class="Special">'</span>) );<br/></li>
<li><br/></li>
<li><span class="Statement">GRANT</span> SELECT <span class="Special">ON</span> triggers <span class="Special">TO</span> <span class="Special">PUBLIC</span>;<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * 6.75<br/></li>
<li></span><span class="Comment"> * UDT_PRIVILEGES view<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> udt_privileges <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT</span> <span class="Identifier">CAST</span>(u_grantor.rolname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> grantor,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(grantee.rolname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> grantee,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(current_database() <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> udt_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(n.nspname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> udt_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(t.typname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> udt_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">'</span><span class="Constant">TYPE USAGE</span><span class="Special">'</span> <span class="Special">AS</span> character_data) <span class="Special">AS</span> privilege_type, <span class="Comment">-- sic<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">CASE</span> <span class="Special">WHEN<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Comment">-- object owner always has grant options<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pg_has_role(grantee.oid, t.typowner, <span class="Special">'</span><span class="Constant">USAGE</span><span class="Special">'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">OR</span> t.grantable<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">YES</span><span class="Special">'</span> <span class="Special">ELSE</span> <span class="Special">'</span><span class="Constant">NO</span><span class="Special">'</span> <span class="Special">END</span> <span class="Special">AS</span> yes_or_no) <span class="Special">AS</span> is_grantable<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> (<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">SELECT</span> oid, typname, typnamespace, typtype, typowner, (aclexplode(<span class="Identifier">coalesce</span>(typacl, acldefault(<span class="Special">'</span><span class="Constant">T</span><span class="Special">'</span>, typowner)))).* <span class="Special">FROM</span> pg_type<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ) <span class="Special">AS</span> t (oid, typname, typnamespace, typtype, typowner, grantor, grantee, prtype, grantable),<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; pg_namespace n,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; pg_authid u_grantor,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; (<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">SELECT</span> oid, rolname <span class="Special">FROM</span> pg_authid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">UNION</span> <span class="Statement">ALL<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">SELECT</span> <span class="Constant">0</span>::oid, <span class="Special">'</span><span class="Constant">PUBLIC</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ) <span class="Special">AS</span> grantee (oid, rolname)<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Special">WHERE</span> t.typnamespace = n.oid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> t.typtype = <span class="Special">'</span><span class="Constant">c</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> t.grantee = grantee.oid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> t.grantor = u_grantor.oid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> t.prtype <span class="Statement">IN</span> (<span class="Special">'</span><span class="Constant">USAGE</span><span class="Special">'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> (pg_has_role(u_grantor.oid, <span class="Special">'</span><span class="Constant">USAGE</span><span class="Special">'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">OR</span> pg_has_role(grantee.oid, <span class="Special">'</span><span class="Constant">USAGE</span><span class="Special">'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">OR</span> grantee.rolname = <span class="Special">'</span><span class="Constant">PUBLIC</span><span class="Special">'</span>);<br/></li>
<li><br/></li>
<li><span class="Statement">GRANT</span> SELECT <span class="Special">ON</span> udt_privileges <span class="Special">TO</span> <span class="Special">PUBLIC</span>;<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * 6.48<br/></li>
<li></span><span class="Comment"> * ROLE_UDT_GRANTS view<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> role_udt_grants <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT</span> grantor,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; grantee,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; udt_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; udt_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; udt_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; privilege_type,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; is_grantable<br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> udt_privileges<br/></li>
<li>&nbsp; &nbsp; <span class="Special">WHERE</span> grantor <span class="Statement">IN</span> (<span class="Statement">SELECT</span> role_name <span class="Special">FROM</span> enabled_roles)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">OR</span> grantee <span class="Statement">IN</span> (<span class="Statement">SELECT</span> role_name <span class="Special">FROM</span> enabled_roles);<br/></li>
<li><br/></li>
<li><span class="Statement">GRANT</span> SELECT <span class="Special">ON</span> role_udt_grants <span class="Special">TO</span> <span class="Special">PUBLIC</span>;<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * 6.76<br/></li>
<li></span><span class="Comment"> * USAGE_PRIVILEGES view<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> usage_privileges <span class="Special">AS<br/></li>
<li></span><br/></li>
<li>&nbsp; &nbsp; <span class="Comment">/* collations */<br/></li>
<li></span>&nbsp; &nbsp; <span class="Comment">-- Collations have no real privileges, so we represent all collations with implicit usage privilege here.<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT</span> <span class="Identifier">CAST</span>(u.rolname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> grantor,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">'</span><span class="Constant">PUBLIC</span><span class="Special">'</span> <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> grantee,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(current_database() <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> object_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(n.nspname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> object_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(c.collname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> object_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">'</span><span class="Constant">COLLATION</span><span class="Special">'</span> <span class="Special">AS</span> character_data) <span class="Special">AS</span> object_type,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">'</span><span class="Constant">USAGE</span><span class="Special">'</span> <span class="Special">AS</span> character_data) <span class="Special">AS</span> privilege_type,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">'</span><span class="Constant">NO</span><span class="Special">'</span> <span class="Special">AS</span> yes_or_no) <span class="Special">AS</span> is_grantable<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> pg_authid u,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; pg_namespace n,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; pg_collation c<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Special">WHERE</span> u.oid = c.collowner<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> c.collnamespace = n.oid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> collencoding <span class="Statement">IN</span> (<span class="Constant">-1</span>, (SELECT encoding <span class="Special">FROM</span> pg_database <span class="Special">WHERE</span> datname = current_database()))<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">UNION</span> <span class="Statement">ALL<br/></li>
<li></span><br/></li>
<li>&nbsp; &nbsp; <span class="Comment">/* domains */<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT</span> <span class="Identifier">CAST</span>(u_grantor.rolname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> grantor,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(grantee.rolname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> grantee,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(current_database() <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> object_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(n.nspname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> object_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(t.typname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> object_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">'</span><span class="Constant">DOMAIN</span><span class="Special">'</span> <span class="Special">AS</span> character_data) <span class="Special">AS</span> object_type,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">'</span><span class="Constant">USAGE</span><span class="Special">'</span> <span class="Special">AS</span> character_data) <span class="Special">AS</span> privilege_type,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">CASE</span> <span class="Special">WHEN<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Comment">-- object owner always has grant options<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pg_has_role(grantee.oid, t.typowner, <span class="Special">'</span><span class="Constant">USAGE</span><span class="Special">'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">OR</span> t.grantable<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">YES</span><span class="Special">'</span> <span class="Special">ELSE</span> <span class="Special">'</span><span class="Constant">NO</span><span class="Special">'</span> <span class="Special">END</span> <span class="Special">AS</span> yes_or_no) <span class="Special">AS</span> is_grantable<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> (<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">SELECT</span> oid, typname, typnamespace, typtype, typowner, (aclexplode(<span class="Identifier">coalesce</span>(typacl, acldefault(<span class="Special">'</span><span class="Constant">T</span><span class="Special">'</span>, typowner)))).* <span class="Special">FROM</span> pg_type<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ) <span class="Special">AS</span> t (oid, typname, typnamespace, typtype, typowner, grantor, grantee, prtype, grantable),<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; pg_namespace n,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; pg_authid u_grantor,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; (<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">SELECT</span> oid, rolname <span class="Special">FROM</span> pg_authid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">UNION</span> <span class="Statement">ALL<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">SELECT</span> <span class="Constant">0</span>::oid, <span class="Special">'</span><span class="Constant">PUBLIC</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ) <span class="Special">AS</span> grantee (oid, rolname)<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Special">WHERE</span> t.typnamespace = n.oid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> t.typtype = <span class="Special">'</span><span class="Constant">d</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> t.grantee = grantee.oid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> t.grantor = u_grantor.oid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> t.prtype <span class="Statement">IN</span> (<span class="Special">'</span><span class="Constant">USAGE</span><span class="Special">'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> (pg_has_role(u_grantor.oid, <span class="Special">'</span><span class="Constant">USAGE</span><span class="Special">'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">OR</span> pg_has_role(grantee.oid, <span class="Special">'</span><span class="Constant">USAGE</span><span class="Special">'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">OR</span> grantee.rolname = <span class="Special">'</span><span class="Constant">PUBLIC</span><span class="Special">'</span>)<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">UNION</span> <span class="Statement">ALL<br/></li>
<li></span><br/></li>
<li>&nbsp; &nbsp; <span class="Comment">/* foreign-data wrappers */<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT</span> <span class="Identifier">CAST</span>(u_grantor.rolname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> grantor,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(grantee.rolname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> grantee,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(current_database() <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> object_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">''</span> <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> object_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(fdw.fdwname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> object_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">'</span><span class="Constant">FOREIGN DATA WRAPPER</span><span class="Special">'</span> <span class="Special">AS</span> character_data) <span class="Special">AS</span> object_type,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">'</span><span class="Constant">USAGE</span><span class="Special">'</span> <span class="Special">AS</span> character_data) <span class="Special">AS</span> privilege_type,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">CASE</span> <span class="Special">WHEN<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Comment">-- object owner always has grant options<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pg_has_role(grantee.oid, fdw.fdwowner, <span class="Special">'</span><span class="Constant">USAGE</span><span class="Special">'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">OR</span> fdw.grantable<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">YES</span><span class="Special">'</span> <span class="Special">ELSE</span> <span class="Special">'</span><span class="Constant">NO</span><span class="Special">'</span> <span class="Special">END</span> <span class="Special">AS</span> yes_or_no) <span class="Special">AS</span> is_grantable<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> (<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">SELECT</span> fdwname, fdwowner, (aclexplode(<span class="Identifier">coalesce</span>(fdwacl, acldefault(<span class="Special">'</span><span class="Constant">F</span><span class="Special">'</span>, fdwowner)))).* <span class="Special">FROM</span> pg_foreign_data_wrapper<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ) <span class="Special">AS</span> fdw (fdwname, fdwowner, grantor, grantee, prtype, grantable),<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; pg_authid u_grantor,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; (<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">SELECT</span> oid, rolname <span class="Special">FROM</span> pg_authid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">UNION</span> <span class="Statement">ALL<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">SELECT</span> <span class="Constant">0</span>::oid, <span class="Special">'</span><span class="Constant">PUBLIC</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ) <span class="Special">AS</span> grantee (oid, rolname)<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Special">WHERE</span> u_grantor.oid = fdw.grantor<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> grantee.oid = fdw.grantee<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> fdw.prtype <span class="Statement">IN</span> (<span class="Special">'</span><span class="Constant">USAGE</span><span class="Special">'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> (pg_has_role(u_grantor.oid, <span class="Special">'</span><span class="Constant">USAGE</span><span class="Special">'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">OR</span> pg_has_role(grantee.oid, <span class="Special">'</span><span class="Constant">USAGE</span><span class="Special">'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">OR</span> grantee.rolname = <span class="Special">'</span><span class="Constant">PUBLIC</span><span class="Special">'</span>)<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">UNION</span> <span class="Statement">ALL<br/></li>
<li></span><br/></li>
<li>&nbsp; &nbsp; <span class="Comment">/* foreign servers */<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT</span> <span class="Identifier">CAST</span>(u_grantor.rolname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> grantor,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(grantee.rolname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> grantee,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(current_database() <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> object_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">''</span> <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> object_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(srv.srvname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> object_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">'</span><span class="Constant">FOREIGN SERVER</span><span class="Special">'</span> <span class="Special">AS</span> character_data) <span class="Special">AS</span> object_type,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">'</span><span class="Constant">USAGE</span><span class="Special">'</span> <span class="Special">AS</span> character_data) <span class="Special">AS</span> privilege_type,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">CASE</span> <span class="Special">WHEN<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Comment">-- object owner always has grant options<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pg_has_role(grantee.oid, srv.srvowner, <span class="Special">'</span><span class="Constant">USAGE</span><span class="Special">'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">OR</span> srv.grantable<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">YES</span><span class="Special">'</span> <span class="Special">ELSE</span> <span class="Special">'</span><span class="Constant">NO</span><span class="Special">'</span> <span class="Special">END</span> <span class="Special">AS</span> yes_or_no) <span class="Special">AS</span> is_grantable<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> (<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">SELECT</span> srvname, srvowner, (aclexplode(<span class="Identifier">coalesce</span>(srvacl, acldefault(<span class="Special">'</span><span class="Constant">S</span><span class="Special">'</span>, srvowner)))).* <span class="Special">FROM</span> pg_foreign_server<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ) <span class="Special">AS</span> srv (srvname, srvowner, grantor, grantee, prtype, grantable),<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; pg_authid u_grantor,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; (<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">SELECT</span> oid, rolname <span class="Special">FROM</span> pg_authid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">UNION</span> <span class="Statement">ALL<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">SELECT</span> <span class="Constant">0</span>::oid, <span class="Special">'</span><span class="Constant">PUBLIC</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ) <span class="Special">AS</span> grantee (oid, rolname)<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Special">WHERE</span> u_grantor.oid = srv.grantor<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> grantee.oid = srv.grantee<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> srv.prtype <span class="Statement">IN</span> (<span class="Special">'</span><span class="Constant">USAGE</span><span class="Special">'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> (pg_has_role(u_grantor.oid, <span class="Special">'</span><span class="Constant">USAGE</span><span class="Special">'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">OR</span> pg_has_role(grantee.oid, <span class="Special">'</span><span class="Constant">USAGE</span><span class="Special">'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">OR</span> grantee.rolname = <span class="Special">'</span><span class="Constant">PUBLIC</span><span class="Special">'</span>)<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">UNION</span> <span class="Statement">ALL<br/></li>
<li></span><br/></li>
<li>&nbsp; &nbsp; <span class="Comment">/* sequences */<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT</span> <span class="Identifier">CAST</span>(u_grantor.rolname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> grantor,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(grantee.rolname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> grantee,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(current_database() <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> object_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(n.nspname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> object_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(c.relname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> object_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">'</span><span class="Constant">SEQUENCE</span><span class="Special">'</span> <span class="Special">AS</span> character_data) <span class="Special">AS</span> object_type,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">'</span><span class="Constant">USAGE</span><span class="Special">'</span> <span class="Special">AS</span> character_data) <span class="Special">AS</span> privilege_type,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">CASE</span> <span class="Special">WHEN<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Comment">-- object owner always has grant options<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pg_has_role(grantee.oid, c.relowner, <span class="Special">'</span><span class="Constant">USAGE</span><span class="Special">'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">OR</span> c.grantable<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">YES</span><span class="Special">'</span> <span class="Special">ELSE</span> <span class="Special">'</span><span class="Constant">NO</span><span class="Special">'</span> <span class="Special">END</span> <span class="Special">AS</span> yes_or_no) <span class="Special">AS</span> is_grantable<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> (<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">SELECT</span> oid, relname, relnamespace, relkind, relowner, (aclexplode(<span class="Identifier">coalesce</span>(relacl, acldefault(<span class="Special">'</span><span class="Constant">r</span><span class="Special">'</span>, relowner)))).* <span class="Special">FROM</span> pg_class<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ) <span class="Special">AS</span> c (oid, relname, relnamespace, relkind, relowner, grantor, grantee, prtype, grantable),<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; pg_namespace n,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; pg_authid u_grantor,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; (<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">SELECT</span> oid, rolname <span class="Special">FROM</span> pg_authid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">UNION</span> <span class="Statement">ALL<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">SELECT</span> <span class="Constant">0</span>::oid, <span class="Special">'</span><span class="Constant">PUBLIC</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ) <span class="Special">AS</span> grantee (oid, rolname)<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Special">WHERE</span> c.relnamespace = n.oid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> c.relkind = <span class="Special">'</span><span class="Constant">S</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> c.grantee = grantee.oid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> c.grantor = u_grantor.oid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> c.prtype <span class="Statement">IN</span> (<span class="Special">'</span><span class="Constant">USAGE</span><span class="Special">'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> (pg_has_role(u_grantor.oid, <span class="Special">'</span><span class="Constant">USAGE</span><span class="Special">'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">OR</span> pg_has_role(grantee.oid, <span class="Special">'</span><span class="Constant">USAGE</span><span class="Special">'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">OR</span> grantee.rolname = <span class="Special">'</span><span class="Constant">PUBLIC</span><span class="Special">'</span>);<br/></li>
<li><br/></li>
<li><span class="Statement">GRANT</span> SELECT <span class="Special">ON</span> usage_privileges <span class="Special">TO</span> <span class="Special">PUBLIC</span>;<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * 6.47<br/></li>
<li></span><span class="Comment"> * ROLE_USAGE_GRANTS view<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> role_usage_grants <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT</span> grantor,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; grantee,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; object_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; object_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; object_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; object_type,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; privilege_type,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; is_grantable<br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> usage_privileges<br/></li>
<li>&nbsp; &nbsp; <span class="Special">WHERE</span> grantor <span class="Statement">IN</span> (<span class="Statement">SELECT</span> role_name <span class="Special">FROM</span> enabled_roles)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">OR</span> grantee <span class="Statement">IN</span> (<span class="Statement">SELECT</span> role_name <span class="Special">FROM</span> enabled_roles);<br/></li>
<li><br/></li>
<li><span class="Statement">GRANT</span> SELECT <span class="Special">ON</span> role_usage_grants <span class="Special">TO</span> <span class="Special">PUBLIC</span>;<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * 6.77<br/></li>
<li></span><span class="Comment"> * USER_DEFINED_TYPES view<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> user_defined_types <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT</span> <span class="Identifier">CAST</span>(current_database() <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> user_defined_type_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(n.nspname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> user_defined_type_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(c.relname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> user_defined_type_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">'</span><span class="Constant">STRUCTURED</span><span class="Special">'</span> <span class="Special">AS</span> character_data) <span class="Special">AS</span> user_defined_type_category,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">'</span><span class="Constant">YES</span><span class="Special">'</span> <span class="Special">AS</span> yes_or_no) <span class="Special">AS</span> is_instantiable,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> yes_or_no) <span class="Special">AS</span> is_final,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> character_data) <span class="Special">AS</span> ordering_form,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> character_data) <span class="Special">AS</span> ordering_category,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> ordering_routine_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> ordering_routine_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> ordering_routine_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> character_data) <span class="Special">AS</span> reference_type,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> character_data) <span class="Special">AS</span> data_type,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> cardinal_number) <span class="Special">AS</span> character_maximum_length,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> cardinal_number) <span class="Special">AS</span> character_octet_length,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> character_set_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> character_set_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> character_set_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> collation_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> collation_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> collation_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> cardinal_number) <span class="Special">AS</span> numeric_precision,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> cardinal_number) <span class="Special">AS</span> numeric_precision_radix,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> cardinal_number) <span class="Special">AS</span> numeric_scale,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> cardinal_number) <span class="Special">AS</span> datetime_precision,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> character_data) <span class="Special">AS</span> interval_type,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> cardinal_number) <span class="Special">AS</span> interval_precision,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> source_dtd_identifier,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> ref_dtd_identifier<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> pg_namespace n, pg_class c, pg_type t<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Special">WHERE</span> n.oid = c.relnamespace<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> t.typrelid = c.oid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> c.relkind = <span class="Special">'</span><span class="Constant">c</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> (pg_has_role(t.typowner, <span class="Special">'</span><span class="Constant">USAGE</span><span class="Special">'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">OR</span> has_type_privilege(t.oid, <span class="Special">'</span><span class="Constant">USAGE</span><span class="Special">'</span>));<br/></li>
<li><br/></li>
<li><span class="Statement">GRANT</span> SELECT <span class="Special">ON</span> user_defined_types <span class="Special">TO</span> <span class="Special">PUBLIC</span>;<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * 6.78<br/></li>
<li></span><span class="Comment"> * VIEW_COLUMN_USAGE<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> view_column_usage <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT</span> <span class="Statement">DISTINCT<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(current_database() <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> view_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(nv.nspname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> view_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(v.relname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> view_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(current_database() <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> table_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(nt.nspname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> table_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(t.relname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> table_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(a.attname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> column_name<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> pg_namespace nv, pg_class v, pg_depend dv,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; pg_depend dt, pg_class t, pg_namespace nt,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; pg_attribute a<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Special">WHERE</span> nv.oid = v.relnamespace<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> v.relkind = <span class="Special">'</span><span class="Constant">v</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> v.oid = dv.refobjid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> dv.refclassid = <span class="Special">'</span><span class="Constant">pg_catalog.pg_class</span><span class="Special">'</span>::regclass<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> dv.classid = <span class="Special">'</span><span class="Constant">pg_catalog.pg_rewrite</span><span class="Special">'</span>::regclass<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> dv.deptype = <span class="Special">'</span><span class="Constant">i</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> dv.objid = dt.objid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> dv.refobjid &lt;&gt; dt.refobjid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> dt.classid = <span class="Special">'</span><span class="Constant">pg_catalog.pg_rewrite</span><span class="Special">'</span>::regclass<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> dt.refclassid = <span class="Special">'</span><span class="Constant">pg_catalog.pg_class</span><span class="Special">'</span>::regclass<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> dt.refobjid = t.oid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> t.relnamespace = nt.oid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> t.relkind <span class="Statement">IN</span> (<span class="Special">'</span><span class="Constant">r</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">v</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">f</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">p</span><span class="Special">'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> t.oid = a.attrelid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> dt.refobjsubid = a.attnum<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> pg_has_role(t.relowner, <span class="Special">'</span><span class="Constant">USAGE</span><span class="Special">'</span>);<br/></li>
<li><br/></li>
<li><span class="Statement">GRANT</span> SELECT <span class="Special">ON</span> view_column_usage <span class="Special">TO</span> <span class="Special">PUBLIC</span>;<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * 6.79<br/></li>
<li></span><span class="Comment"> * VIEW_PERIOD_USAGE<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><br/></li>
<li><span class="Comment">-- feature not supported<br/></li>
<li></span><br/></li>
<li><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * 6.80<br/></li>
<li></span><span class="Comment"> * VIEW_ROUTINE_USAGE<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> view_routine_usage <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT</span> <span class="Statement">DISTINCT<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(current_database() <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> table_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(nv.nspname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> table_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(v.relname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> table_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(current_database() <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> specific_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(np.nspname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> specific_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(nameconcatoid(p.proname, p.oid) <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> specific_name<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> pg_namespace nv, pg_class v, pg_depend dv,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; pg_depend dp, pg_proc p, pg_namespace np<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Special">WHERE</span> nv.oid = v.relnamespace<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> v.relkind = <span class="Special">'</span><span class="Constant">v</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> v.oid = dv.refobjid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> dv.refclassid = <span class="Special">'</span><span class="Constant">pg_catalog.pg_class</span><span class="Special">'</span>::regclass<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> dv.classid = <span class="Special">'</span><span class="Constant">pg_catalog.pg_rewrite</span><span class="Special">'</span>::regclass<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> dv.deptype = <span class="Special">'</span><span class="Constant">i</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> dv.objid = dp.objid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> dp.classid = <span class="Special">'</span><span class="Constant">pg_catalog.pg_rewrite</span><span class="Special">'</span>::regclass<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> dp.refclassid = <span class="Special">'</span><span class="Constant">pg_catalog.pg_proc</span><span class="Special">'</span>::regclass<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> dp.refobjid = p.oid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> p.pronamespace = np.oid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> pg_has_role(p.proowner, <span class="Special">'</span><span class="Constant">USAGE</span><span class="Special">'</span>);<br/></li>
<li><br/></li>
<li><span class="Statement">GRANT</span> SELECT <span class="Special">ON</span> view_routine_usage <span class="Special">TO</span> <span class="Special">PUBLIC</span>;<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * 6.81<br/></li>
<li></span><span class="Comment"> * VIEW_TABLE_USAGE<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> view_table_usage <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT</span> <span class="Statement">DISTINCT<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(current_database() <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> view_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(nv.nspname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> view_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(v.relname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> view_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(current_database() <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> table_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(nt.nspname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> table_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(t.relname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> table_name<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> pg_namespace nv, pg_class v, pg_depend dv,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; pg_depend dt, pg_class t, pg_namespace nt<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Special">WHERE</span> nv.oid = v.relnamespace<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> v.relkind = <span class="Special">'</span><span class="Constant">v</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> v.oid = dv.refobjid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> dv.refclassid = <span class="Special">'</span><span class="Constant">pg_catalog.pg_class</span><span class="Special">'</span>::regclass<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> dv.classid = <span class="Special">'</span><span class="Constant">pg_catalog.pg_rewrite</span><span class="Special">'</span>::regclass<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> dv.deptype = <span class="Special">'</span><span class="Constant">i</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> dv.objid = dt.objid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> dv.refobjid &lt;&gt; dt.refobjid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> dt.classid = <span class="Special">'</span><span class="Constant">pg_catalog.pg_rewrite</span><span class="Special">'</span>::regclass<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> dt.refclassid = <span class="Special">'</span><span class="Constant">pg_catalog.pg_class</span><span class="Special">'</span>::regclass<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> dt.refobjid = t.oid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> t.relnamespace = nt.oid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> t.relkind <span class="Statement">IN</span> (<span class="Special">'</span><span class="Constant">r</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">v</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">f</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">p</span><span class="Special">'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> pg_has_role(t.relowner, <span class="Special">'</span><span class="Constant">USAGE</span><span class="Special">'</span>);<br/></li>
<li><br/></li>
<li><span class="Statement">GRANT</span> SELECT <span class="Special">ON</span> view_table_usage <span class="Special">TO</span> <span class="Special">PUBLIC</span>;<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * 6.82<br/></li>
<li></span><span class="Comment"> * VIEWS view<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> views <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT</span> <span class="Identifier">CAST</span>(current_database() <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> table_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(nc.nspname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> table_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(c.relname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> table_name,<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">CASE</span> <span class="Special">WHEN</span> pg_has_role(c.relowner, <span class="Special">'</span><span class="Constant">USAGE</span><span class="Special">'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">THEN</span> pg_get_viewdef(c.oid)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">ELSE</span> <span class="Special">null</span> <span class="Special">END<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">AS</span> character_data) <span class="Special">AS</span> view_definition,<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">CASE</span> <span class="Special">WHEN</span> <span class="Special">'</span><span class="Constant">check_option=cascaded</span><span class="Special">'</span> = <span class="Statement">ANY</span> (c.reloptions)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">CASCADED</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">WHEN</span> <span class="Special">'</span><span class="Constant">check_option=local</span><span class="Special">'</span> = <span class="Statement">ANY</span> (c.reloptions)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">LOCAL</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">ELSE</span> <span class="Special">'</span><span class="Constant">NONE</span><span class="Special">'</span> <span class="Special">END<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">AS</span> character_data) <span class="Special">AS</span> check_option,<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Comment">-- (1 &lt;&lt; CMD_UPDATE) + (1 &lt;&lt; CMD_DELETE)<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">CASE</span> <span class="Special">WHEN</span> pg_relation_is_updatable(c.oid, <span class="Special">false</span>) &amp; <span class="Constant">20</span> = <span class="Constant">20<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">YES</span><span class="Special">'</span> <span class="Special">ELSE</span> <span class="Special">'</span><span class="Constant">NO</span><span class="Special">'</span> <span class="Special">END<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">AS</span> yes_or_no) <span class="Special">AS</span> is_updatable,<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Comment">-- 1 &lt;&lt; CMD_INSERT<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">CASE</span> <span class="Special">WHEN</span> pg_relation_is_updatable(c.oid, <span class="Special">false</span>) &amp; <span class="Constant">8</span> = <span class="Constant">8<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">YES</span><span class="Special">'</span> <span class="Special">ELSE</span> <span class="Special">'</span><span class="Constant">NO</span><span class="Special">'</span> <span class="Special">END<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">AS</span> yes_or_no) <span class="Special">AS</span> is_insertable_into,<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Comment">-- TRIGGER_TYPE_ROW + TRIGGER_TYPE_INSTEAD + TRIGGER_TYPE_UPDATE<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">CASE</span> <span class="Special">WHEN</span> <span class="Statement">EXISTS</span> (SELECT <span class="Constant">1</span> <span class="Special">FROM</span> pg_trigger <span class="Special">WHERE</span> tgrelid = c.oid <span class="Statement">AND</span> tgtype &amp; <span class="Constant">81</span> = <span class="Constant">81</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">YES</span><span class="Special">'</span> <span class="Special">ELSE</span> <span class="Special">'</span><span class="Constant">NO</span><span class="Special">'</span> <span class="Special">END<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">AS</span> yes_or_no) <span class="Special">AS</span> is_trigger_updatable,<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Comment">-- TRIGGER_TYPE_ROW + TRIGGER_TYPE_INSTEAD + TRIGGER_TYPE_DELETE<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">CASE</span> <span class="Special">WHEN</span> <span class="Statement">EXISTS</span> (SELECT <span class="Constant">1</span> <span class="Special">FROM</span> pg_trigger <span class="Special">WHERE</span> tgrelid = c.oid <span class="Statement">AND</span> tgtype &amp; <span class="Constant">73</span> = <span class="Constant">73</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">YES</span><span class="Special">'</span> <span class="Special">ELSE</span> <span class="Special">'</span><span class="Constant">NO</span><span class="Special">'</span> <span class="Special">END<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">AS</span> yes_or_no) <span class="Special">AS</span> is_trigger_deletable,<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Comment">-- TRIGGER_TYPE_ROW + TRIGGER_TYPE_INSTEAD + TRIGGER_TYPE_INSERT<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">CASE</span> <span class="Special">WHEN</span> <span class="Statement">EXISTS</span> (SELECT <span class="Constant">1</span> <span class="Special">FROM</span> pg_trigger <span class="Special">WHERE</span> tgrelid = c.oid <span class="Statement">AND</span> tgtype &amp; <span class="Constant">69</span> = <span class="Constant">69</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">YES</span><span class="Special">'</span> <span class="Special">ELSE</span> <span class="Special">'</span><span class="Constant">NO</span><span class="Special">'</span> <span class="Special">END<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">AS</span> yes_or_no) <span class="Special">AS</span> is_trigger_insertable_into<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> pg_namespace nc, pg_class c<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Special">WHERE</span> c.relnamespace = nc.oid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> c.relkind = <span class="Special">'</span><span class="Constant">v</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> (<span class="Statement">NOT</span> pg_is_other_temp_schema(nc.oid))<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> (pg_has_role(c.relowner, <span class="Special">'</span><span class="Constant">USAGE</span><span class="Special">'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">OR</span> has_table_privilege(c.oid, <span class="Special">'</span><span class="Constant">SELECT, INSERT, UPDATE, DELETE, TRUNCATE, REFERENCES, TRIGGER</span><span class="Special">'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">OR</span> has_any_column_privilege(c.oid, <span class="Special">'</span><span class="Constant">SELECT, INSERT, UPDATE, REFERENCES</span><span class="Special">'</span>) );<br/></li>
<li><br/></li>
<li><span class="Statement">GRANT</span> SELECT <span class="Special">ON</span> views <span class="Special">TO</span> <span class="Special">PUBLIC</span>;<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Comment">-- The following views have dependencies that force them to appear out of order.<br/></li>
<li></span><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * 6.26<br/></li>
<li></span><span class="Comment"> * DATA_TYPE_PRIVILEGES view<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> data_type_privileges <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT</span> <span class="Identifier">CAST</span>(current_database() <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> object_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(x.objschema <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> object_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(x.objname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> object_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(x.objtype <span class="Special">AS</span> character_data) <span class="Special">AS</span> object_type,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(x.objdtdid <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> dtd_identifier<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; (<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">SELECT</span> udt_schema, udt_name, <span class="Special">'</span><span class="Constant">USER-DEFINED TYPE</span><span class="Special">'</span>::text, dtd_identifier <span class="Special">FROM</span> attributes<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">UNION</span> <span class="Statement">ALL<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">SELECT</span> table_schema, table_name, <span class="Special">'</span><span class="Constant">TABLE</span><span class="Special">'</span>::text, dtd_identifier <span class="Special">FROM</span> columns<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">UNION</span> <span class="Statement">ALL<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">SELECT</span> domain_schema, domain_name, <span class="Special">'</span><span class="Constant">DOMAIN</span><span class="Special">'</span>::text, dtd_identifier <span class="Special">FROM</span> domains<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">UNION</span> <span class="Statement">ALL<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">SELECT</span> specific_schema, specific_name, <span class="Special">'</span><span class="Constant">ROUTINE</span><span class="Special">'</span>::text, dtd_identifier <span class="Special">FROM</span> parameters<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">UNION</span> <span class="Statement">ALL<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">SELECT</span> specific_schema, specific_name, <span class="Special">'</span><span class="Constant">ROUTINE</span><span class="Special">'</span>::text, dtd_identifier <span class="Special">FROM</span> routines<br/></li>
<li>&nbsp; &nbsp; &nbsp; ) <span class="Special">AS</span> x (objschema, objname, objtype, objdtdid);<br/></li>
<li><br/></li>
<li><span class="Statement">GRANT</span> SELECT <span class="Special">ON</span> data_type_privileges <span class="Special">TO</span> <span class="Special">PUBLIC</span>;<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * 6.31<br/></li>
<li></span><span class="Comment"> * ELEMENT_TYPES view<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><br/></li>
<li><span class="Statement">CREATE</span> <span class="Special">VIEW</span> element_types <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT</span> <span class="Identifier">CAST</span>(current_database() <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> object_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(n.nspname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> object_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(x.objname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> object_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(x.objtype <span class="Special">AS</span> character_data) <span class="Special">AS</span> object_type,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(x.objdtdid <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> collection_type_identifier,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">CASE</span> <span class="Special">WHEN</span> nbt.nspname = <span class="Special">'</span><span class="Constant">pg_catalog</span><span class="Special">'</span> <span class="Special">THEN</span> format_type(bt.oid, <span class="Special">null</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">ELSE</span> <span class="Special">'</span><span class="Constant">USER-DEFINED</span><span class="Special">'</span> <span class="Special">END</span> <span class="Special">AS</span> character_data) <span class="Special">AS</span> data_type,<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> cardinal_number) <span class="Special">AS</span> character_maximum_length,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> cardinal_number) <span class="Special">AS</span> character_octet_length,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> character_set_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> character_set_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> character_set_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">CASE</span> <span class="Special">WHEN</span> nco.nspname <span class="Special">IS</span> <span class="Statement">NOT</span> <span class="Special">NULL</span> <span class="Special">THEN</span> current_database() <span class="Special">END</span> <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> collation_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(nco.nspname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> collation_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(co.collname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> collation_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> cardinal_number) <span class="Special">AS</span> numeric_precision,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> cardinal_number) <span class="Special">AS</span> numeric_precision_radix,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> cardinal_number) <span class="Special">AS</span> numeric_scale,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> cardinal_number) <span class="Special">AS</span> datetime_precision,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> character_data) <span class="Special">AS</span> interval_type,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> cardinal_number) <span class="Special">AS</span> interval_precision,<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(current_database() <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> udt_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(nbt.nspname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> udt_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(bt.typname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> udt_name,<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> scope_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> scope_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> scope_name,<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">null</span> <span class="Special">AS</span> cardinal_number) <span class="Special">AS</span> maximum_cardinality,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">'</span><span class="Constant">a</span><span class="Special">'</span> || <span class="Identifier">CAST</span>(x.objdtdid <span class="Special">AS</span> text) <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> dtd_identifier<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> pg_namespace n, pg_type at, pg_namespace nbt, pg_type bt,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; (<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Comment">/* columns, attributes */<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">SELECT</span> c.relnamespace, <span class="Identifier">CAST</span>(c.relname <span class="Special">AS</span> sql_identifier),<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">CASE</span> <span class="Special">WHEN</span> c.relkind = <span class="Special">'</span><span class="Constant">c</span><span class="Special">'</span> <span class="Special">THEN</span> <span class="Special">'</span><span class="Constant">USER-DEFINED TYPE</span><span class="Special">'</span>::text <span class="Special">ELSE</span> <span class="Special">'</span><span class="Constant">TABLE</span><span class="Special">'</span>::text <span class="Special">END</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; a.attnum, a.atttypid, a.attcollation<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">FROM</span> pg_class c, pg_attribute a<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">WHERE</span> c.oid = a.attrelid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">AND</span> c.relkind <span class="Statement">IN</span> (<span class="Special">'</span><span class="Constant">r</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">v</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">f</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">c</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">p</span><span class="Special">'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">AND</span> attnum &gt; <span class="Constant">0</span> <span class="Statement">AND</span> <span class="Statement">NOT</span> attisdropped<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">UNION</span> <span class="Statement">ALL<br/></li>
<li></span><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Comment">/* domains */<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">SELECT</span> t.typnamespace, <span class="Identifier">CAST</span>(t.typname <span class="Special">AS</span> sql_identifier),<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">'</span><span class="Constant">DOMAIN</span><span class="Special">'</span>::text, <span class="Constant">1</span>, t.typbasetype, t.typcollation<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">FROM</span> pg_type t<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">WHERE</span> t.typtype = <span class="Special">'</span><span class="Constant">d</span><span class="Special">'<br/></li>
<li></span><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">UNION</span> <span class="Statement">ALL<br/></li>
<li></span><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Comment">/* parameters */<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">SELECT</span> pronamespace,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Identifier">CAST</span>(nameconcatoid(proname, oid) <span class="Special">AS</span> sql_identifier),<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">'</span><span class="Constant">ROUTINE</span><span class="Special">'</span>::text, (ss.x).n, (ss.x).x, <span class="Constant">0<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">FROM</span> (<span class="Statement">SELECT</span> p.pronamespace, p.proname, p.oid,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="#L43" title="catalog/information_schema.sql:43">_pg_expandarray</a>(<span class="Identifier">coalesce</span>(p.proallargtypes, p.proargtypes::oid[])) <span class="Special">AS</span> x<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">FROM</span> pg_proc p) <span class="Special">AS</span> ss<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">UNION</span> <span class="Statement">ALL<br/></li>
<li></span><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Comment">/* result types */<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">SELECT</span> p.pronamespace,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Identifier">CAST</span>(nameconcatoid(p.proname, p.oid) <span class="Special">AS</span> sql_identifier),<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">'</span><span class="Constant">ROUTINE</span><span class="Special">'</span>::text, <span class="Constant">0</span>, p.prorettype, <span class="Constant">0<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">FROM</span> pg_proc p<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ) <span class="Special">AS</span> x (objschema, objname, objtype, objdtdid, objtypeid, objcollation)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">LEFT</span> <span class="Special">JOIN</span> (pg_collation co <span class="Special">JOIN</span> pg_namespace nco <span class="Special">ON</span> (co.collnamespace = nco.oid))<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">ON</span> x.objcollation = co.oid <span class="Statement">AND</span> (nco.nspname, co.collname) &lt;&gt; (<span class="Special">'</span><span class="Constant">pg_catalog</span><span class="Special">'</span>, <span class="Special">'</span><span class="Constant">default</span><span class="Special">'</span>)<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Special">WHERE</span> n.oid = x.objschema<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> at.oid = x.objtypeid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> (at.typelem &lt;&gt; <span class="Constant">0</span> <span class="Statement">AND</span> at.typlen = <span class="Constant">-1</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> at.typelem = bt.oid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> nbt.oid = bt.typnamespace<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> (n.nspname, x.objname, x.objtype, <span class="Identifier">CAST</span>(x.objdtdid <span class="Special">AS</span> sql_identifier)) <span class="Statement">IN<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ( SELECT object_schema, object_name, object_type, dtd_identifier<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Special">FROM</span> data_type_privileges );<br/></li>
<li><br/></li>
<li><span class="Statement">GRANT</span> SELECT <span class="Special">ON</span> element_types <span class="Special">TO</span> <span class="Special">PUBLIC</span>;<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Comment">-- SQL/MED views; these use section numbers from part 9 of the standard.<br/></li>
<li></span><br/></li>
<li><span class="Comment">/* Base view for foreign table columns */<br/></li>
<li></span><span class="Statement">CREATE</span> <span class="Special">VIEW</span> _pg_foreign_table_columns <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT</span> n.nspname,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; c.relname,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; a.attname,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; a.attfdwoptions<br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> pg_foreign_table t, pg_authid u, pg_namespace n, pg_class c,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; pg_attribute a<br/></li>
<li>&nbsp; &nbsp; <span class="Special">WHERE</span> u.oid = c.relowner<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> (pg_has_role(c.relowner, <span class="Special">'</span><span class="Constant">USAGE</span><span class="Special">'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">OR</span> has_column_privilege(c.oid, a.attnum, <span class="Special">'</span><span class="Constant">SELECT, INSERT, UPDATE, REFERENCES</span><span class="Special">'</span>))<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> n.oid = c.relnamespace<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> c.oid = t.ftrelid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> c.relkind = <span class="Special">'</span><span class="Constant">f</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> a.attrelid = c.oid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> a.attnum &gt; <span class="Constant">0</span>;<br/></li>
<li><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * 24.3<br/></li>
<li></span><span class="Comment"> * COLUMN_OPTIONS view<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><span class="Statement">CREATE</span> <span class="Special">VIEW</span> column_options <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT</span> <span class="Identifier">CAST</span>(current_database() <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> table_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(c.nspname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> table_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(c.relname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> table_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(c.attname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> column_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>((pg_options_to_table(c.attfdwoptions)).option_name <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> option_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>((pg_options_to_table(c.attfdwoptions)).option_value <span class="Special">AS</span> character_data) <span class="Special">AS</span> option_value<br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> _pg_foreign_table_columns c;<br/></li>
<li><br/></li>
<li><span class="Statement">GRANT</span> SELECT <span class="Special">ON</span> column_options <span class="Special">TO</span> <span class="Special">PUBLIC</span>;<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Comment">/* Base view for foreign-data wrappers */<br/></li>
<li></span><span class="Statement">CREATE</span> <span class="Special">VIEW</span> _pg_foreign_data_wrappers <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT</span> w.oid,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; w.fdwowner,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; w.fdwoptions,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(current_database() <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> foreign_data_wrapper_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(fdwname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> foreign_data_wrapper_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(u.rolname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> authorization_identifier,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">'</span><span class="Constant">c</span><span class="Special">'</span> <span class="Special">AS</span> character_data) <span class="Special">AS</span> foreign_data_wrapper_language<br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> pg_foreign_data_wrapper w, pg_authid u<br/></li>
<li>&nbsp; &nbsp; <span class="Special">WHERE</span> u.oid = w.fdwowner<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> (pg_has_role(fdwowner, <span class="Special">'</span><span class="Constant">USAGE</span><span class="Special">'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">OR</span> has_foreign_data_wrapper_privilege(w.oid, <span class="Special">'</span><span class="Constant">USAGE</span><span class="Special">'</span>));<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * 24.5<br/></li>
<li></span><span class="Comment"> * FOREIGN_DATA_WRAPPER_OPTIONS view<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><span class="Statement">CREATE</span> <span class="Special">VIEW</span> foreign_data_wrapper_options <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT</span> foreign_data_wrapper_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreign_data_wrapper_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>((pg_options_to_table(w.fdwoptions)).option_name <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> option_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>((pg_options_to_table(w.fdwoptions)).option_value <span class="Special">AS</span> character_data) <span class="Special">AS</span> option_value<br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> _pg_foreign_data_wrappers w;<br/></li>
<li><br/></li>
<li><span class="Statement">GRANT</span> SELECT <span class="Special">ON</span> foreign_data_wrapper_options <span class="Special">TO</span> <span class="Special">PUBLIC</span>;<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * 24.6<br/></li>
<li></span><span class="Comment"> * FOREIGN_DATA_WRAPPERS view<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><span class="Statement">CREATE</span> <span class="Special">VIEW</span> foreign_data_wrappers <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT</span> foreign_data_wrapper_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreign_data_wrapper_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; authorization_identifier,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">NULL</span> <span class="Special">AS</span> character_data) <span class="Special">AS</span> library_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreign_data_wrapper_language<br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> _pg_foreign_data_wrappers w;<br/></li>
<li><br/></li>
<li><span class="Statement">GRANT</span> SELECT <span class="Special">ON</span> foreign_data_wrappers <span class="Special">TO</span> <span class="Special">PUBLIC</span>;<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Comment">/* Base view for foreign servers */<br/></li>
<li></span><span class="Statement">CREATE</span> <span class="Special">VIEW</span> _pg_foreign_servers <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT</span> s.oid,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; s.srvoptions,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(current_database() <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> foreign_server_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(srvname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> foreign_server_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(current_database() <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> foreign_data_wrapper_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(w.fdwname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> foreign_data_wrapper_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(srvtype <span class="Special">AS</span> character_data) <span class="Special">AS</span> foreign_server_type,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(srvversion <span class="Special">AS</span> character_data) <span class="Special">AS</span> foreign_server_version,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(u.rolname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> authorization_identifier<br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> pg_foreign_server s, pg_foreign_data_wrapper w, pg_authid u<br/></li>
<li>&nbsp; &nbsp; <span class="Special">WHERE</span> w.oid = s.srvfdw<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> u.oid = s.srvowner<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> (pg_has_role(s.srvowner, <span class="Special">'</span><span class="Constant">USAGE</span><span class="Special">'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">OR</span> has_server_privilege(s.oid, <span class="Special">'</span><span class="Constant">USAGE</span><span class="Special">'</span>));<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * 24.7<br/></li>
<li></span><span class="Comment"> * FOREIGN_SERVER_OPTIONS view<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><span class="Statement">CREATE</span> <span class="Special">VIEW</span> foreign_server_options <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT</span> foreign_server_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreign_server_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>((pg_options_to_table(s.srvoptions)).option_name <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> option_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>((pg_options_to_table(s.srvoptions)).option_value <span class="Special">AS</span> character_data) <span class="Special">AS</span> option_value<br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> _pg_foreign_servers s;<br/></li>
<li><br/></li>
<li><span class="Statement">GRANT</span> SELECT <span class="Special">ON</span> <span class="Special">TABLE</span> foreign_server_options <span class="Special">TO</span> <span class="Special">PUBLIC</span>;<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * 24.8<br/></li>
<li></span><span class="Comment"> * FOREIGN_SERVERS view<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><span class="Statement">CREATE</span> <span class="Special">VIEW</span> foreign_servers <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT</span> foreign_server_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreign_server_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreign_data_wrapper_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreign_data_wrapper_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreign_server_type,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreign_server_version,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; authorization_identifier<br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> _pg_foreign_servers;<br/></li>
<li><br/></li>
<li><span class="Statement">GRANT</span> SELECT <span class="Special">ON</span> foreign_servers <span class="Special">TO</span> <span class="Special">PUBLIC</span>;<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Comment">/* Base view for foreign tables */<br/></li>
<li></span><span class="Statement">CREATE</span> <span class="Special">VIEW</span> _pg_foreign_tables <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(current_database() <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> foreign_table_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(n.nspname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> foreign_table_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(c.relname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> foreign_table_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; t.ftoptions <span class="Special">AS</span> ftoptions,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(current_database() <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> foreign_server_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(srvname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> foreign_server_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(u.rolname <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> authorization_identifier<br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> pg_foreign_table t, pg_foreign_server s, pg_foreign_data_wrapper w,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; pg_authid u, pg_namespace n, pg_class c<br/></li>
<li>&nbsp; &nbsp; <span class="Special">WHERE</span> w.oid = s.srvfdw<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> u.oid = c.relowner<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> (pg_has_role(c.relowner, <span class="Special">'</span><span class="Constant">USAGE</span><span class="Special">'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">OR</span> has_table_privilege(c.oid, <span class="Special">'</span><span class="Constant">SELECT, INSERT, UPDATE, DELETE, TRUNCATE, REFERENCES, TRIGGER</span><span class="Special">'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">OR</span> has_any_column_privilege(c.oid, <span class="Special">'</span><span class="Constant">SELECT, INSERT, UPDATE, REFERENCES</span><span class="Special">'</span>))<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> n.oid = c.relnamespace<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> c.oid = t.ftrelid<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> c.relkind = <span class="Special">'</span><span class="Constant">f</span><span class="Special">'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">AND</span> s.oid = t.ftserver;<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * 24.9<br/></li>
<li></span><span class="Comment"> * FOREIGN_TABLE_OPTIONS view<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><span class="Statement">CREATE</span> <span class="Special">VIEW</span> foreign_table_options <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT</span> foreign_table_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreign_table_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreign_table_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>((pg_options_to_table(t.ftoptions)).option_name <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> option_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>((pg_options_to_table(t.ftoptions)).option_value <span class="Special">AS</span> character_data) <span class="Special">AS</span> option_value<br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> _pg_foreign_tables t;<br/></li>
<li><br/></li>
<li><span class="Statement">GRANT</span> SELECT <span class="Special">ON</span> <span class="Special">TABLE</span> foreign_table_options <span class="Special">TO</span> <span class="Special">PUBLIC</span>;<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * 24.10<br/></li>
<li></span><span class="Comment"> * FOREIGN_TABLES view<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><span class="Statement">CREATE</span> <span class="Special">VIEW</span> foreign_tables <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT</span> foreign_table_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreign_table_schema,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreign_table_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreign_server_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreign_server_name<br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> _pg_foreign_tables;<br/></li>
<li><br/></li>
<li><span class="Statement">GRANT</span> SELECT <span class="Special">ON</span> foreign_tables <span class="Special">TO</span> <span class="Special">PUBLIC</span>;<br/></li>
<li><br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Comment">/* Base view for user mappings */<br/></li>
<li></span><span class="Statement">CREATE</span> <span class="Special">VIEW</span> _pg_user_mappings <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT</span> um.oid,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; um.umoptions,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; um.umuser,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Identifier">COALESCE</span>(u.rolname,<span class="Special">'</span><span class="Constant">PUBLIC</span><span class="Special">'</span>) <span class="Special">AS</span> sql_identifier ) <span class="Special">AS</span> authorization_identifier,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; s.foreign_server_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; s.foreign_server_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; s.authorization_identifier <span class="Special">AS</span> srvowner<br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> pg_user_mapping um <span class="Special">LEFT</span> <span class="Special">JOIN</span> pg_authid u <span class="Special">ON</span> (u.oid = um.umuser),<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; _pg_foreign_servers s<br/></li>
<li>&nbsp; &nbsp; <span class="Special">WHERE</span> s.oid = um.umserver;<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * 24.13<br/></li>
<li></span><span class="Comment"> * USER_MAPPING_OPTIONS view<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><span class="Statement">CREATE</span> <span class="Special">VIEW</span> user_mapping_options <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT</span> authorization_identifier,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreign_server_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreign_server_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(opts.option_name <span class="Special">AS</span> sql_identifier) <span class="Special">AS</span> option_name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Identifier">CAST</span>(<span class="Special">CASE</span> <span class="Special">WHEN</span> (umuser &lt;&gt; <span class="Constant">0</span> <span class="Statement">AND</span> authorization_identifier = current_user)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">OR</span> (umuser = <span class="Constant">0</span> <span class="Statement">AND</span> pg_has_role(srvowner, <span class="Special">'</span><span class="Constant">USAGE</span><span class="Special">'</span>))<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">OR</span> (<span class="Statement">SELECT</span> rolsuper <span class="Special">FROM</span> pg_authid <span class="Special">WHERE</span> rolname = current_user)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">THEN</span> opts.option_value<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Special">ELSE</span> <span class="Special">NULL</span> <span class="Special">END</span> <span class="Special">AS</span> character_data) <span class="Special">AS</span> option_value<br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> _pg_user_mappings um,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; pg_options_to_table(um.umoptions) opts;<br/></li>
<li><br/></li>
<li><span class="Statement">GRANT</span> SELECT <span class="Special">ON</span> user_mapping_options <span class="Special">TO</span> <span class="Special">PUBLIC</span>;<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment"> * 24.14<br/></li>
<li></span><span class="Comment"> * USER_MAPPINGS view<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li></span><span class="Statement">CREATE</span> <span class="Special">VIEW</span> user_mappings <span class="Special">AS<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">SELECT</span> authorization_identifier,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreign_server_catalog,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreign_server_name<br/></li>
<li>&nbsp; &nbsp; <span class="Special">FROM</span> _pg_user_mappings;<br/></li>
<li><br/></li>
<li><span class="Statement">GRANT</span> SELECT <span class="Special">ON</span> user_mappings <span class="Special">TO</span> <span class="Special">PUBLIC</span>;<br/></li>
</ol></code>
 <p class="nav-bar">
  <span class="nav-link"><a href="./index.html">One Level Up</a></span>
  <span class="nav-link"><a href="../index.html">Top Level</a></span>
 </p>

 </body>
</html>
